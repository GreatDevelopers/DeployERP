{"version":3,"file":"bank-reconciliation-tool.min.js","sources":["../../../apps/erpnext/erpnext/public/js/bank_reconciliation_tool/data_table_manager.js","../../../apps/erpnext/erpnext/public/js/bank_reconciliation_tool/number_card.js","../../../apps/erpnext/erpnext/public/js/bank_reconciliation_tool/dialog_manager.js"],"sourcesContent":["frappe.provide(\"erpnext.accounts.bank_reconciliation\");\n\nerpnext.accounts.bank_reconciliation.DataTableManager = class DataTableManager {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\t\tthis.dialog_manager = new erpnext.accounts.bank_reconciliation.DialogManager(\n\t\t\tthis.company,\n\t\t\tthis.bank_account\n\t\t);\n\t\tthis.make_dt();\n\t}\n\n\tmake_dt() {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.get_bank_transactions\",\n\t\t\targs: {\n\t\t\t\tbank_account: this.bank_account,\n\t\t\t},\n\t\t\tcallback: function (response) {\n\t\t\t\tme.format_data(response.message);\n\t\t\t\tme.get_dt_columns();\n\t\t\t\tme.get_datatable();\n\t\t\t\tme.set_listeners();\n\t\t\t},\n\t\t});\n\t}\n\n\tget_dt_columns() {\n\t\tthis.columns = [\n\t\t\t{\n\t\t\t\tname: \"Date\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t},\n\n\t\t\t{\n\t\t\t\tname: \"Party Type\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 95,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Party\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Description\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 350,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Deposit\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t\tformat: (value) =>\n\t\t\t\t\t\"<span style='color:green;'>\" +\n\t\t\t\t\tformat_currency(value, this.currency) +\n\t\t\t\t\t\"</span>\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Withdrawal\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t\tformat: (value) =>\n\t\t\t\t\t\"<span style='color:red;'>\" +\n\t\t\t\t\tformat_currency(value, this.currency) +\n\t\t\t\t\t\"</span>\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Unallocated Amount\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t\tformat: (value) =>\n\t\t\t\t\t\"<span style='color:blue;'>\" +\n\t\t\t\t\tformat_currency(value, this.currency) +\n\t\t\t\t\t\"</span>\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Reference Number\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 140,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Actions\",\n\t\t\t\teditable: false,\n\t\t\t\tsortable: false,\n\t\t\t\tfocusable: false,\n\t\t\t\tdropdown: false,\n\t\t\t\twidth: 80,\n\t\t\t},\n\t\t];\n\t}\n\n\tformat_data(transactions) {\n\t\tthis.transactions = [];\n\t\tif (transactions[0]) {\n\t\t\tthis.currency = transactions[0][\"currency\"];\n\t\t}\n\t\tthis.transaction_dt_map = {};\n\t\tlet length;\n\t\ttransactions.forEach((row) => {\n\t\t\tlength = this.transactions.push(this.format_row(row));\n\t\t\tthis.transaction_dt_map[row[\"name\"]] = length - 1;\n\t\t});\n\t}\n\n\tformat_row(row) {\n\t\treturn [\n\t\t\trow[\"date\"],\n\t\t\trow[\"party_type\"],\n\t\t\trow[\"party\"],\n\t\t\trow[\"description\"],\n\t\t\trow[\"deposit\"],\n\t\t\trow[\"withdrawal\"],\n\t\t\trow[\"unallocated_amount\"],\n\t\t\trow[\"reference_number\"],\n\t\t\t`\n\t\t\t<Button class=\"btn btn-primary btn-xs center\"  data-name = ${row[\"name\"]} >\n\t\t\t\tActions\n\t\t\t</a>\n\t\t\t`,\n\t\t];\n\t}\n\n\tget_datatable() {\n\t\tconst datatable_options = {\n\t\t\tcolumns: this.columns,\n\t\t\tdata: this.transactions,\n\t\t\tdynamicRowHeight: true,\n\t\t\tcheckboxColumn: false,\n\t\t\tinlineFilters: true,\n\t\t};\n\t\tthis.datatable = new frappe.DataTable(\n\t\t\tthis.$reconciliation_tool_dt.get(0),\n\t\t\tdatatable_options\n\t\t);\n\t\t$(`.${this.datatable.style.scopeClass} .dt-scrollable`).css(\n\t\t\t\"max-height\",\n\t\t\t\"calc(100vh - 400px)\"\n\t\t);\n\n\t\tif (this.transactions.length > 0) {\n\t\t\tthis.$reconciliation_tool_dt.show();\n\t\t\tthis.$no_bank_transactions.hide();\n\t\t} else {\n\t\t\tthis.$reconciliation_tool_dt.hide();\n\t\t\tthis.$no_bank_transactions.show();\n\t\t}\n\t}\n\n\tset_listeners() {\n\t\tvar me = this;\n\t\t$(`.${this.datatable.style.scopeClass} .dt-scrollable`).on(\n\t\t\t\"click\",\n\t\t\t`.btn`,\n\t\t\tfunction () {\n\t\t\t\tme.dialog_manager.show_dialog(\n\t\t\t\t\t$(this).attr(\"data-name\"),\n\t\t\t\t\t(bank_transaction) => me.update_dt_cards(bank_transaction)\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t);\n\t}\n\n\tupdate_dt_cards(bank_transaction) {\n\t\tconst transaction_index = this.transaction_dt_map[\n\t\t\tbank_transaction.name\n\t\t];\n\t\tif (bank_transaction.unallocated_amount > 0) {\n\t\t\tthis.transactions[transaction_index] = this.format_row(\n\t\t\t\tbank_transaction\n\t\t\t);\n\t\t} else {\n\t\t\tthis.transactions.splice(transaction_index, 1);\n\t\t}\n\t\tthis.datatable.refresh(this.transactions, this.columns);\n\n\t\tif (this.transactions.length == 0) {\n\t\t\tthis.$reconciliation_tool_dt.hide();\n\t\t\tthis.$no_bank_transactions.show();\n\t\t}\n\n\t\t// this.make_dt();\n\t\tthis.get_cleared_balance().then(() => {\n\t\t\tthis.cards_manager.$cards[1].set_value(\n\t\t\t\tformat_currency(this.cleared_balance),\n\t\t\t\tthis.currency\n\t\t\t);\n\t\t\tthis.cards_manager.$cards[2].set_value(\n\t\t\t\tformat_currency(\n\t\t\t\t\tthis.bank_statement_closing_balance - this.cleared_balance\n\t\t\t\t),\n\t\t\t\tthis.currency\n\t\t\t);\n\t\t\tthis.cards_manager.$cards[2].set_value_color(\n\t\t\t\tthis.bank_statement_closing_balance - this.cleared_balance == 0\n\t\t\t\t\t? \"text-success\"\n\t\t\t\t\t: \"text-danger\"\n\t\t\t);\n\t\t});\n\t}\n\n\tget_cleared_balance() {\n\t\tif (this.bank_account && this.bank_statement_to_date) {\n\t\t\treturn frappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.get_account_balance\",\n\t\t\t\targs: {\n\t\t\t\t\tbank_account: this.bank_account,\n\t\t\t\t\ttill_date: this.bank_statement_to_date,\n\t\t\t\t},\n\t\t\t\tcallback: (response) =>\n\t\t\t\t\t(this.cleared_balance = response.message),\n\t\t\t});\n\t\t}\n\t}\n};\n","frappe.provide(\"erpnext.accounts.bank_reconciliation\");\n\nerpnext.accounts.bank_reconciliation.NumberCardManager = class NumberCardManager {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\t\tthis.make_cards();\n\t}\n\n\tmake_cards() {\n\t\tthis.$reconciliation_tool_cards.empty();\n\t\tthis.$cards = [];\n\t\tthis.$summary = $(`<div class=\"report-summary\"></div>`)\n\t\t\t.hide()\n\t\t\t.appendTo(this.$reconciliation_tool_cards);\n\t\tvar chart_data = [\n\t\t\t{\n\t\t\t\tvalue: this.bank_statement_closing_balance,\n\t\t\t\tlabel: \"Closing Balance as per Bank Statement\",\n\t\t\t\tdatatype: \"Currency\",\n\t\t\t\tcurrency: this.currency,\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: this.cleared_balance,\n\t\t\t\tlabel: \"Closing Balance as per ERP\",\n\t\t\t\tdatatype: \"Currency\",\n\t\t\t\tcurrency: this.currency,\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue:\n\t\t\t\t\tthis.bank_statement_closing_balance - this.cleared_balance,\n\t\t\t\tlabel: \"Difference\",\n\t\t\t\tdatatype: \"Currency\",\n\t\t\t\tcurrency: this.currency,\n\t\t\t},\n\t\t];\n\n\t\tchart_data.forEach((summary) => {\n\t\t\tlet number_card = new erpnext.accounts.NumberCard(summary);\n\t\t\tthis.$cards.push(number_card);\n\n\t\t\tnumber_card.$card.appendTo(this.$summary);\n\t\t});\n\t\tthis.$cards[2].set_value_color(\n\t\t\tthis.bank_statement_closing_balance - this.cleared_balance == 0\n\t\t\t\t? \"text-success\"\n\t\t\t\t: \"text-danger\"\n\t\t);\n\t\tthis.$summary.css({\"border-bottom\": \"0px\", \"margin-left\": \"0px\", \"margin-right\": \"0px\"});\n\t\tthis.$summary.show();\n\t}\n};\n\nerpnext.accounts.NumberCard = class NumberCard {\n\tconstructor(options) {\n\t\tthis.$card = frappe.utils.build_summary_item(options);\n\t}\n\n\tset_value(value) {\n\t\tthis.$card.find(\"div\").text(value);\n\t}\n\n\tset_value_color(color) {\n\t\tthis.$card\n\t\t\t.find(\"div\")\n\t\t\t.removeClass(\"text-danger text-success\")\n\t\t\t.addClass(`${color}`);\n\t}\n\n\tset_indicator(color) {\n\t\tthis.$card\n\t\t\t.find(\"span\")\n\t\t\t.removeClass(\"indicator red green\")\n\t\t\t.addClass(`indicator ${color}`);\n\t}\n};\n","frappe.provide(\"erpnext.accounts.bank_reconciliation\");\n\nerpnext.accounts.bank_reconciliation.DialogManager = class DialogManager {\n\tconstructor(company, bank_account) {\n\t\tthis.bank_account = bank_account;\n\t\tthis.company = company;\n\t\tthis.make_dialog();\n\t}\n\n\tshow_dialog(bank_transaction_name, update_dt_cards) {\n\t\tthis.bank_transaction_name = bank_transaction_name;\n\t\tthis.update_dt_cards = update_dt_cards;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get_value\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Bank Transaction\",\n\t\t\t\tfilters: { name: this.bank_transaction_name },\n\t\t\t\tfieldname: [\n\t\t\t\t\t\"date\",\n\t\t\t\t\t\"deposit\",\n\t\t\t\t\t\"withdrawal\",\n\t\t\t\t\t\"currency\",\n\t\t\t\t\t\"description\",\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"bank_account\",\n\t\t\t\t\t\"company\",\n\t\t\t\t\t\"reference_number\",\n\t\t\t\t\t\"party_type\",\n\t\t\t\t\t\"party\",\n\t\t\t\t\t\"unallocated_amount\",\n\t\t\t\t\t\"allocated_amount\",\n\t\t\t\t],\n\t\t\t},\n\t\t\tcallback: (r) => {\n\t\t\t\tif (r.message) {\n\t\t\t\t\tthis.bank_transaction = r.message;\n\t\t\t\t\tr.message.payment_entry = 1;\n\t\t\t\t\tthis.dialog.set_values(r.message);\n\t\t\t\t\tthis.dialog.show();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\tget_linked_vouchers(document_types) {\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.get_linked_payments\",\n\t\t\targs: {\n\t\t\t\tbank_transaction_name: this.bank_transaction_name,\n\t\t\t\tdocument_types: document_types,\n\t\t\t},\n\n\t\t\tcallback: (result) => {\n\t\t\t\tconst data = result.message;\n\n\n\t\t\t\tif (data && data.length > 0) {\n\t\t\t\t\tconst proposals_wrapper = this.dialog.fields_dict.payment_proposals.$wrapper;\n\t\t\t\t\tproposals_wrapper.show();\n\t\t\t\t\tthis.dialog.fields_dict.no_matching_vouchers.$wrapper.hide();\n\t\t\t\t\tthis.data = [];\n\t\t\t\t\tdata.forEach((row) => {\n\t\t\t\t\t\tconst reference_date = row[5] ? row[5] : row[8];\n\t\t\t\t\t\tthis.data.push([\n\t\t\t\t\t\t\trow[1],\n\t\t\t\t\t\t\trow[2],\n\t\t\t\t\t\t\treference_date,\n\t\t\t\t\t\t\tformat_currency(row[3], row[9]),\n\t\t\t\t\t\t\trow[6],\n\t\t\t\t\t\t\trow[4],\n\t\t\t\t\t\t]);\n\t\t\t\t\t});\n\t\t\t\t\tthis.get_dt_columns();\n\t\t\t\t\tthis.get_datatable(proposals_wrapper);\n\t\t\t\t} else {\n\t\t\t\t\tconst proposals_wrapper = this.dialog.fields_dict.payment_proposals.$wrapper;\n\t\t\t\t\tproposals_wrapper.hide();\n\t\t\t\t\tthis.dialog.fields_dict.no_matching_vouchers.$wrapper.show();\n\n\t\t\t\t}\n\t\t\t\tthis.dialog.show();\n\t\t\t},\n\t\t});\n\t}\n\n\tget_dt_columns() {\n\t\tthis.columns = [\n\t\t\t{\n\t\t\t\tname: \"Document Type\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 125,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Document Name\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 150,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Reference Date\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 120,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Amount\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Party\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 120,\n\t\t\t},\n\n\t\t\t{\n\t\t\t\tname: \"Reference Number\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 140,\n\t\t\t},\n\t\t];\n\t}\n\n\tget_datatable(proposals_wrapper) {\n\t\tif (!this.datatable) {\n\t\t\tconst datatable_options = {\n\t\t\t\tcolumns: this.columns,\n\t\t\t\tdata: this.data,\n\t\t\t\tdynamicRowHeight: true,\n\t\t\t\tcheckboxColumn: true,\n\t\t\t\tinlineFilters: true,\n\t\t\t};\n\t\t\tthis.datatable = new frappe.DataTable(\n\t\t\t\tproposals_wrapper.get(0),\n\t\t\t\tdatatable_options\n\t\t\t);\n\t\t} else {\n\t\t\tthis.datatable.refresh(this.data, this.columns);\n\t\t\tthis.datatable.rowmanager.checkMap = [];\n\t\t}\n\t}\n\n\tmake_dialog() {\n\t\tconst me = this;\n\t\tme.selected_payment = null;\n\n\t\tconst fields = [\n\t\t\t{\n\t\t\t\tlabel: __(\"Action\"),\n\t\t\t\tfieldname: \"action\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\toptions: `Match Against Voucher\\nCreate Voucher\\nUpdate Bank Transaction`,\n\t\t\t\tdefault: \"Match Against Voucher\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"column_break_4\",\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Document Type\"),\n\t\t\t\tfieldname: \"document_type\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\toptions: `Payment Entry\\nJournal Entry`,\n\t\t\t\tdefault: \"Payment Entry\",\n\t\t\t\tdepends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"section_break_1\",\n\t\t\t\tlabel: __(\"Filters\"),\n\t\t\t\tdepends_on: \"eval:doc.action=='Match Against Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Payment Entry\",\n\t\t\t\tfieldname: \"payment_entry\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Journal Entry\",\n\t\t\t\tfieldname: \"journal_entry\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Loan Repayment\",\n\t\t\t\tfieldname: \"loan_repayment\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"column_break_5\",\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Sales Invoice\",\n\t\t\t\tfieldname: \"sales_invoice\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Purchase Invoice\",\n\t\t\t\tfieldname: \"purchase_invoice\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Show Only Exact Amount\",\n\t\t\t\tfieldname: \"exact_match\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"column_break_5\",\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Expense Claim\",\n\t\t\t\tfieldname: \"expense_claim\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Loan Disbursement\",\n\t\t\t\tfieldname: \"loan_disbursement\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"section_break_1\",\n\t\t\t\tlabel: __(\"Select Vouchers to Match\"),\n\t\t\t\tdepends_on: \"eval:doc.action=='Match Against Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\tfieldname: \"payment_proposals\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\tfieldname: \"no_matching_vouchers\",\n\t\t\t\toptions: \"<div class=\\\"text-muted text-center\\\">No Matching Vouchers Found</div>\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"details\",\n\t\t\t\tlabel: \"Details\",\n\t\t\t\tdepends_on: \"eval:doc.action!='Match Against Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"reference_number\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tlabel: \"Reference Number\",\n\t\t\t\tmandatory_depends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefault: \"Today\",\n\t\t\t\tfieldname: \"posting_date\",\n\t\t\t\tfieldtype: \"Date\",\n\t\t\t\tlabel: \"Posting Date\",\n\t\t\t\treqd: 1,\n\t\t\t\tdepends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"reference_date\",\n\t\t\t\tfieldtype: \"Date\",\n\t\t\t\tlabel: \"Cheque/Reference Date\",\n\t\t\t\tmandatory_depends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t\tdepends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t\treqd: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"mode_of_payment\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: \"Mode of Payment\",\n\t\t\t\toptions: \"Mode of Payment\",\n\t\t\t\tdepends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"edit_in_full_page\",\n\t\t\t\tfieldtype: \"Button\",\n\t\t\t\tlabel: \"Edit in Full Page\",\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.edit_in_full_page();\n\t\t\t\t},\n\t\t\t\tdepends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"column_break_7\",\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefault: \"Journal Entry Type\",\n\t\t\t\tfieldname: \"journal_entry_type\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\tlabel: \"Journal Entry Type\",\n\t\t\t\toptions:\n\t\t\t\t\t\"Journal Entry\\nInter Company Journal Entry\\nBank Entry\\nCash Entry\\nCredit Card Entry\\nDebit Note\\nCredit Note\\nContra Entry\\nExcise Entry\\nWrite Off Entry\\nOpening Entry\\nDepreciation Entry\\nExchange Rate Revaluation\\nDeferred Revenue\\nDeferred Expense\",\n\t\t\t\tdepends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' &&  doc.document_type=='Journal Entry'\",\n\t\t\t\tmandatory_depends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' &&  doc.document_type=='Journal Entry'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"second_account\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: \"Account\",\n\t\t\t\toptions: \"Account\",\n\t\t\t\tdepends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' &&  doc.document_type=='Journal Entry'\",\n\t\t\t\tmandatory_depends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' &&  doc.document_type=='Journal Entry'\",\n\t\t\t\tget_query: () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\tis_group: 0,\n\t\t\t\t\t\t\tcompany: this.company,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"party_type\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: \"Party Type\",\n\t\t\t\toptions: \"DocType\",\n\t\t\t\tmandatory_depends_on:\n\t\t\t\t\"eval:doc.action=='Create Voucher' &&  doc.document_type=='Payment Entry'\",\n\t\t\t\tget_query: function () {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\tname: [\n\t\t\t\t\t\t\t\t\"in\",\n\t\t\t\t\t\t\t\tObject.keys(frappe.boot.party_account_types),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"party\",\n\t\t\t\tfieldtype: \"Dynamic Link\",\n\t\t\t\tlabel: \"Party\",\n\t\t\t\toptions: \"party_type\",\n\t\t\t\tmandatory_depends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' && doc.document_type=='Payment Entry'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"project\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: \"Project\",\n\t\t\t\toptions: \"Project\",\n\t\t\t\tdepends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' && doc.document_type=='Payment Entry'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"cost_center\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: \"Cost Center\",\n\t\t\t\toptions: \"Cost Center\",\n\t\t\t\tdepends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' && doc.document_type=='Payment Entry'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"details_section\",\n\t\t\t\tlabel: \"Transaction Details\",\n\t\t\t\tcollapsible: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"deposit\",\n\t\t\t\tfieldtype: \"Currency\",\n\t\t\t\tlabel: \"Deposit\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"withdrawal\",\n\t\t\t\tfieldtype: \"Currency\",\n\t\t\t\tlabel: \"Withdrawal\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"description\",\n\t\t\t\tfieldtype: \"Small Text\",\n\t\t\t\tlabel: \"Description\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"column_break_17\",\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"allocated_amount\",\n\t\t\t\tfieldtype: \"Currency\",\n\t\t\t\tlabel: \"Allocated Amount\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\n\t\t\t{\n\t\t\t\tfieldname: \"unallocated_amount\",\n\t\t\t\tfieldtype: \"Currency\",\n\t\t\t\tlabel: \"Unallocated Amount\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\t\t];\n\n\t\tme.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Reconcile the Bank Transaction\"),\n\t\t\tfields: fields,\n\t\t\tsize: \"large\",\n\t\t\tprimary_action: (values) =>\n\t\t\t\tthis.reconciliation_dialog_primary_action(values),\n\t\t});\n\t}\n\n\tget_selected_attributes() {\n\t\tlet selected_attributes = [];\n\t\tthis.dialog.$wrapper.find(\".checkbox input\").each((i, col) => {\n\t\t\tif ($(col).is(\":checked\")) {\n\t\t\t\tselected_attributes.push($(col).attr(\"data-fieldname\"));\n\t\t\t}\n\t\t});\n\n\t\treturn selected_attributes;\n\t}\n\n\tupdate_options() {\n\t\tlet selected_attributes = this.get_selected_attributes();\n\t\tthis.get_linked_vouchers(selected_attributes);\n\t}\n\n\treconciliation_dialog_primary_action(values) {\n\t\tif (values.action == \"Match Against Voucher\") this.match(values);\n\t\tif (\n\t\t\tvalues.action == \"Create Voucher\" &&\n\t\t\tvalues.document_type == \"Payment Entry\"\n\t\t)\n\t\t\tthis.add_payment_entry(values);\n\t\tif (\n\t\t\tvalues.action == \"Create Voucher\" &&\n\t\t\tvalues.document_type == \"Journal Entry\"\n\t\t)\n\t\t\tthis.add_journal_entry(values);\n\t\telse if (values.action == \"Update Bank Transaction\")\n\t\t\tthis.update_transaction(values);\n\t}\n\n\tmatch() {\n\t\tvar selected_map = this.datatable.rowmanager.checkMap;\n\t\tlet rows = [];\n\t\tselected_map.forEach((val, index) => {\n\t\t\tif (val == 1) rows.push(this.datatable.datamanager.rows[index]);\n\t\t});\n\t\tlet vouchers = [];\n\t\trows.forEach((x) => {\n\t\t\tvouchers.push({\n\t\t\t\tpayment_doctype: x[2].content,\n\t\t\t\tpayment_name: x[3].content,\n\t\t\t\tamount: x[5].content,\n\t\t\t});\n\t\t});\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.reconcile_vouchers\",\n\t\t\targs: {\n\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\tvouchers: vouchers,\n\t\t\t},\n\t\t\tcallback: (response) => {\n\t\t\t\tconst alert_string =\n\t\t\t\t\t\"Bank Transaction \" +\n\t\t\t\t\tthis.bank_transaction.name +\n\t\t\t\t\t\" Matched\";\n\t\t\t\tfrappe.show_alert(alert_string);\n\t\t\t\tthis.update_dt_cards(response.message);\n\t\t\t\tthis.dialog.hide();\n\t\t\t},\n\t\t});\n\t}\n\n\tadd_payment_entry(values) {\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.create_payment_entry_bts\",\n\t\t\targs: {\n\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\treference_number: values.reference_number,\n\t\t\t\treference_date: values.reference_date,\n\t\t\t\tparty_type: values.party_type,\n\t\t\t\tparty: values.party,\n\t\t\t\tposting_date: values.posting_date,\n\t\t\t\tmode_of_payment: values.mode_of_payment,\n\t\t\t\tproject: values.project,\n\t\t\t\tcost_center: values.cost_center,\n\t\t\t},\n\t\t\tcallback: (response) => {\n\t\t\t\tconst alert_string =\n\t\t\t\t\t\"Bank Transaction \" +\n\t\t\t\t\tthis.bank_transaction.name +\n\t\t\t\t\t\" added as Payment Entry\";\n\t\t\t\tfrappe.show_alert(alert_string);\n\t\t\t\tthis.update_dt_cards(response.message);\n\t\t\t\tthis.dialog.hide();\n\t\t\t},\n\t\t});\n\t}\n\n\tadd_journal_entry(values) {\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.create_journal_entry_bts\",\n\t\t\targs: {\n\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\treference_number: values.reference_number,\n\t\t\t\treference_date: values.reference_date,\n\t\t\t\tparty_type: values.party_type,\n\t\t\t\tparty: values.party,\n\t\t\t\tposting_date: values.posting_date,\n\t\t\t\tmode_of_payment: values.mode_of_payment,\n\t\t\t\tentry_type: values.journal_entry_type,\n\t\t\t\tsecond_account: values.second_account,\n\t\t\t},\n\t\t\tcallback: (response) => {\n\t\t\t\tconst alert_string =\n\t\t\t\t\t\"Bank Transaction \" +\n\t\t\t\t\tthis.bank_transaction.name +\n\t\t\t\t\t\" added as Journal Entry\";\n\t\t\t\tfrappe.show_alert(alert_string);\n\t\t\t\tthis.update_dt_cards(response.message);\n\t\t\t\tthis.dialog.hide();\n\t\t\t},\n\t\t});\n\t}\n\n\tupdate_transaction(values) {\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.update_bank_transaction\",\n\t\t\targs: {\n\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\treference_number: values.reference_number,\n\t\t\t\tparty_type: values.party_type,\n\t\t\t\tparty: values.party,\n\t\t\t},\n\t\t\tcallback: (response) => {\n\t\t\t\tconst alert_string =\n\t\t\t\t\t\"Bank Transaction \" +\n\t\t\t\t\tthis.bank_transaction.name +\n\t\t\t\t\t\" updated\";\n\t\t\t\tfrappe.show_alert(alert_string);\n\t\t\t\tthis.update_dt_cards(response.message);\n\t\t\t\tthis.dialog.hide();\n\t\t\t},\n\t\t});\n\t}\n\n\tedit_in_full_page() {\n\t\tconst values = this.dialog.get_values(true);\n\t\tif (values.document_type == \"Payment Entry\") {\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.create_payment_entry_bts\",\n\t\t\t\targs: {\n\t\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\t\treference_number: values.reference_number,\n\t\t\t\t\treference_date: values.reference_date,\n\t\t\t\t\tparty_type: values.party_type,\n\t\t\t\t\tparty: values.party,\n\t\t\t\t\tposting_date: values.posting_date,\n\t\t\t\t\tmode_of_payment: values.mode_of_payment,\n\t\t\t\t\tproject: values.project,\n\t\t\t\t\tcost_center: values.cost_center,\n\t\t\t\t\tallow_edit: true\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tconst doc = frappe.model.sync(r.message);\n\t\t\t\t\tfrappe.set_route(\"Form\", doc[0].doctype, doc[0].name);\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.create_journal_entry_bts\",\n\t\t\t\targs: {\n\t\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\t\treference_number: values.reference_number,\n\t\t\t\t\treference_date: values.reference_date,\n\t\t\t\t\tparty_type: values.party_type,\n\t\t\t\t\tparty: values.party,\n\t\t\t\t\tposting_date: values.posting_date,\n\t\t\t\t\tmode_of_payment: values.mode_of_payment,\n\t\t\t\t\tentry_type: values.journal_entry_type,\n\t\t\t\t\tsecond_account: values.second_account,\n\t\t\t\t\tallow_edit: true\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tvar doc = frappe.model.sync(r.message);\n\t\t\t\t\tfrappe.set_route(\"Form\", doc[0].doctype, doc[0].name);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n};\n"],"names":["this","let","const","proposals_wrapper"],"mappings":"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"}