{"version":3,"file":"user_profile_controller.min.js","sources":["../../../apps/frappe/frappe/public/js/frappe/form/footer/base_timeline.js","../../../apps/frappe/frappe/desk/page/user_profile/user_profile_controller.js"],"sourcesContent":["// Copyright (c) 2020, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nclass BaseTimeline {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tthis.timeline_wrapper = $(`<div class=\"new-timeline\">`);\n\t\tthis.wrapper = this.timeline_wrapper;\n\t\tthis.timeline_items_wrapper = $(`<div class=\"timeline-items\">`);\n\t\tthis.timeline_actions_wrapper = $(`\n\t\t\t<div class=\"timeline-items timeline-actions\">\n\t\t\t\t<div class=\"timeline-item\">\n\t\t\t\t\t<div class=\"timeline-dot\"></div>\n\t\t\t\t\t<div class=\"timeline-content action-buttons\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\n\t\tthis.timeline_wrapper.append(this.timeline_actions_wrapper);\n\t\tthis.timeline_actions_wrapper.hide();\n\t\tthis.timeline_wrapper.append(this.timeline_items_wrapper);\n\n\t\tthis.parent.replaceWith(this.timeline_wrapper);\n\t\tthis.timeline_items = [];\n\t}\n\n\trefresh() {\n\t\tthis.render_timeline_items();\n\t}\n\n\tadd_action_button(label, action, icon=null, btn_class=null) {\n\t\tlet icon_element = icon ? frappe.utils.icon(icon, 'xs') : null;\n\t\tthis.timeline_actions_wrapper.show();\n\t\tlet action_btn = $(`<button class=\"btn btn-xs ${btn_class || 'btn-default'} action-btn\">\n\t\t\t${icon_element}\n\t\t\t${label}\n\t\t</button>`);\n\t\taction_btn.click(action);\n\t\tthis.timeline_actions_wrapper.find('.action-buttons').append(action_btn);\n\t\treturn action_btn;\n\t}\n\n\trender_timeline_items() {\n\t\tthis.timeline_items_wrapper.empty();\n\t\tthis.timeline_items = [];\n\t\tthis.doc_info = this.frm && this.frm.get_docinfo() || {};\n\t\tlet response = this.prepare_timeline_contents();\n\t\tif (response instanceof Promise) {\n\t\t\tresponse.then(() => {\n\t\t\t\tthis.timeline_items.sort((item1, item2) =>  new Date(item2.creation) - new Date(item1.creation));\n\t\t\t\tthis.timeline_items.forEach(this.add_timeline_item.bind(this));\n\t\t\t});\n\t\t} else {\n\t\t\tthis.timeline_items.sort((item1, item2) =>  new Date(item2.creation) - new Date(item1.creation));\n\t\t\tthis.timeline_items.forEach(this.add_timeline_item.bind(this));\n\t\t}\n\t}\n\n\tprepare_timeline_contents() {\n\t\t//\n\t}\n\n\tadd_timeline_item(item, append_at_the_end=false) {\n\t\tlet timeline_item = this.get_timeline_item(item);\n\t\tif (append_at_the_end) {\n\t\t\tthis.timeline_items_wrapper.append(timeline_item);\n\t\t} else {\n\t\t\tthis.timeline_items_wrapper.prepend(timeline_item);\n\t\t}\n\t\treturn timeline_item;\n\t}\n\n\tadd_timeline_items(items, append_at_the_end=false) {\n\t\titems.forEach((item) => this.add_timeline_item(item, append_at_the_end));\n\t}\n\n\tget_timeline_item(item) {\n\t\t// item can have content*, creation*,\n\t\t// timeline_badge, icon, icon_size,\n\t\t// hide_timestamp, is_card\n\t\tconst timeline_item = $(`<div class=\"timeline-item\">`);\n\t\ttimeline_item.attr({\n\t\t\t\"data-doctype\": item.doctype,\n\t\t\t\"data-name\": item.name,\n\t\t});\n\t\tif (item.icon) {\n\t\t\ttimeline_item.append(`\n\t\t\t\t<div class=\"timeline-badge\" title='${item.title || frappe.utils.to_title_case(item.icon)}'>\n\t\t\t\t\t${frappe.utils.icon(item.icon, item.icon_size || 'md')}\n\t\t\t\t</div>\n\t\t\t`);\n\t\t} else if (item.timeline_badge) {\n\t\t\ttimeline_item.append(item.timeline_badge);\n\t\t} else {\n\t\t\ttimeline_item.append(`<div class=\"timeline-dot\">`);\n\t\t}\n\n\t\ttimeline_item.append(`<div class=\"timeline-content ${item.is_card ? 'frappe-card' : ''}\">`);\n\t\ttimeline_item.find('.timeline-content').append(item.content);\n\t\tif (!item.hide_timestamp && !item.is_card) {\n\t\t\ttimeline_item.find('.timeline-content').append(`<span> - ${comment_when(item.creation)}</span>`);\n\t\t}\n\t\treturn timeline_item;\n\t}\n}\n\nexport default BaseTimeline;","import BaseTimeline from \"../../../public/js/frappe/form/footer/base_timeline\";\nfrappe.provide('frappe.energy_points');\n\nclass UserProfile {\n\tconstructor(wrapper) {\n\t\tthis.wrapper = $(wrapper);\n\t\tthis.page = frappe.ui.make_app_page({\n\t\t\tparent: wrapper,\n\t\t});\n\t\tthis.sidebar = this.wrapper.find('.layout-side-section');\n\t\tthis.main_section = this.wrapper.find('.layout-main-section');\n\t\tthis.wrapper.bind('show', () => {\n\t\t\tthis.show();\n\t\t});\n\t}\n\n\tshow() {\n\t\tlet route = frappe.get_route();\n\t\tthis.user_id = route[1] || frappe.session.user;\n\t\tfrappe.dom.freeze(__('Loading user profile') + '...');\n\t\tfrappe.db.exists('User', this.user_id).then(exists => {\n\t\t\tfrappe.dom.unfreeze();\n\t\t\tif (exists) {\n\t\t\t\tthis.make_user_profile();\n\t\t\t} else {\n\t\t\t\tfrappe.msgprint(__('User does not exist'));\n\t\t\t}\n\t\t});\n\t}\n\n\tmake_user_profile() {\n\t\tthis.user = frappe.user_info(this.user_id);\n\t\tthis.page.set_title(this.user.fullname);\n\t\tthis.setup_user_search();\n\t\tthis.main_section.empty().append(frappe.render_template('user_profile'));\n\t\tthis.energy_points = 0;\n\t\tthis.review_points = 0;\n\t\tthis.rank = 0;\n\t\tthis.month_rank = 0;\n\t\tthis.render_user_details();\n\t\tthis.render_points_and_rank();\n\t\tthis.render_heatmap();\n\t\tthis.render_line_chart();\n\t\tthis.render_percentage_chart('type', 'Type Distribution');\n\t\tthis.create_percentage_chart_filters();\n\t\tthis.setup_user_activity_timeline();\n\t}\n\n\tsetup_user_search() {\n\t\tthis.$user_search_button = this.page.set_secondary_action(\n\t\t\t__('Change User'),\n\t\t\t() => this.show_user_search_dialog(),\n\t\t\t{ icon: 'change', size: 'sm' }\n\t\t);\n\t}\n\n\tshow_user_search_dialog() {\n\t\tlet dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Change User'),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Link',\n\t\t\t\t\tfieldname: 'user',\n\t\t\t\t\toptions: 'User',\n\t\t\t\t\tlabel: __('User'),\n\t\t\t\t}\n\t\t\t],\n\t\t\tprimary_action_label: __('Go'),\n\t\t\tprimary_action: ({ user }) => {\n\t\t\t\tdialog.hide();\n\t\t\t\tfrappe.set_route('user-profile', user);\n\t\t\t}\n\t\t});\n\t\tdialog.show();\n\t}\n\n\trender_heatmap() {\n\t\tthis.heatmap = new frappe.Chart('.performance-heatmap', {\n\t\t\ttype: 'heatmap',\n\t\t\tcountLabel: 'Energy Points',\n\t\t\tdata: {},\n\t\t\tdiscreteDomains: 1,\n\t\t\tradius: 3,\n\t\t\theight: 150\n\t\t});\n\t\tthis.update_heatmap_data();\n\t\tthis.create_heatmap_chart_filters();\n\t}\n\n\tupdate_heatmap_data(date_from) {\n\t\tfrappe.xcall('frappe.desk.page.user_profile.user_profile.get_energy_points_heatmap_data', {\n\t\t\tuser: this.user_id,\n\t\t\tdate: date_from || frappe.datetime.year_start(),\n\t\t}).then((r) => {\n\t\t\tthis.heatmap.update({ dataPoints: r });\n\t\t});\n\t}\n\n\n\trender_line_chart() {\n\t\tthis.line_chart_filters = [\n\t\t\t['Energy Point Log', 'user', '=', this.user_id, false],\n\t\t\t['Energy Point Log', 'type', '!=', 'Review', false]\n\t\t];\n\n\t\tthis.line_chart_config = {\n\t\t\ttimespan: 'Last Month',\n\t\t\ttime_interval: 'Daily',\n\t\t\ttype: 'Line',\n\t\t\tvalue_based_on: 'points',\n\t\t\tchart_type: 'Sum',\n\t\t\tdocument_type: 'Energy Point Log',\n\t\t\tname: 'Energy Points',\n\t\t\twidth: 'half',\n\t\t\tbased_on: 'creation'\n\t\t};\n\n\t\tthis.line_chart = new frappe.Chart('.performance-line-chart', {\n\t\t\ttype: 'line',\n\t\t\theight: 200,\n\t\t\tdata: {\n\t\t\t\tlabels: [],\n\t\t\t\tdatasets: [{}]\n\t\t\t},\n\t\t\tcolors: ['purple'],\n\t\t\taxisOptions: {\n\t\t\t\txIsSeries: 1\n\t\t\t}\n\t\t});\n\t\tthis.update_line_chart_data();\n\t\tthis.create_line_chart_filters();\n\t}\n\n\tupdate_line_chart_data() {\n\t\tthis.line_chart_config.filters_json = JSON.stringify(this.line_chart_filters);\n\n\t\tfrappe.xcall('frappe.desk.doctype.dashboard_chart.dashboard_chart.get', {\n\t\t\tchart: this.line_chart_config,\n\t\t\tno_cache: 1,\n\t\t}).then(chart => {\n\t\t\tthis.line_chart.update(chart);\n\t\t});\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\trender_percentage_chart(field, title) {\n\t\tfrappe.xcall('frappe.desk.page.user_profile.user_profile.get_energy_points_percentage_chart_data', {\n\t\t\tuser: this.user_id,\n\t\t\tfield: field\n\t\t}).then(chart => {\n\t\t\tif (chart.labels.length) {\n\t\t\t\tthis.percentage_chart = new frappe.Chart('.performance-percentage-chart', {\n\t\t\t\t\ttype: 'percentage',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tlabels: chart.labels,\n\t\t\t\t\t\tdatasets: chart.datasets\n\t\t\t\t\t},\n\t\t\t\t\ttruncateLegends: 1,\n\t\t\t\t\tbarOptions: {\n\t\t\t\t\t\theight: 11,\n\t\t\t\t\t\tdepth: 1\n\t\t\t\t\t},\n\t\t\t\t\theight: 200,\n\t\t\t\t\tmaxSlices: 8,\n\t\t\t\t\tcolors: ['purple', 'blue', 'cyan', 'teal', 'pink', 'red', 'orange', 'yellow'],\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.wrapper.find('.percentage-chart-container').hide();\n\t\t\t}\n\t\t});\n\t}\n\n\tcreate_line_chart_filters() {\n\t\tlet filters = [\n\t\t\t{\n\t\t\t\tlabel: 'All',\n\t\t\t\toptions: ['All', 'Auto', 'Criticism', 'Appreciation', 'Revert'],\n\t\t\t\taction: (selected_item) => {\n\t\t\t\t\tif (selected_item === 'All') {\n\t\t\t\t\t\tthis.line_chart_filters = [\n\t\t\t\t\t\t\t['Energy Point Log', 'user', '=', this.user_id, false],\n\t\t\t\t\t\t\t['Energy Point Log', 'type', '!=', 'Review', false]\n\t\t\t\t\t\t];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.line_chart_filters[1] = ['Energy Point Log', 'type', '=', selected_item, false];\n\t\t\t\t\t}\n\t\t\t\t\tthis.update_line_chart_data();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Last Month',\n\t\t\t\toptions: ['Last Week', 'Last Month', 'Last Quarter', 'Last Year'],\n\t\t\t\taction: (selected_item) => {\n\t\t\t\t\tthis.line_chart_config.timespan = selected_item;\n\t\t\t\t\tthis.update_line_chart_data();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Daily',\n\t\t\t\toptions: ['Daily', 'Weekly', 'Monthly'],\n\t\t\t\taction: (selected_item) => {\n\t\t\t\t\tthis.line_chart_config.time_interval = selected_item;\n\t\t\t\t\tthis.update_line_chart_data();\n\t\t\t\t}\n\t\t\t},\n\t\t];\n\t\tfrappe.dashboard_utils.render_chart_filters(filters, 'chart-filter', '.line-chart-options', 1);\n\t}\n\n\tcreate_percentage_chart_filters() {\n\t\tlet filters = [\n\t\t\t{\n\t\t\t\tlabel: 'Type',\n\t\t\t\toptions: ['Type', 'Reference Doctype', 'Rule'],\n\t\t\t\tfieldnames: ['type', 'reference_doctype', 'rule'],\n\t\t\t\taction: (selected_item, fieldname) => {\n\t\t\t\t\tlet title = selected_item + ' Distribution';\n\t\t\t\t\tthis.render_percentage_chart(fieldname, title);\n\t\t\t\t}\n\t\t\t},\n\t\t];\n\t\tfrappe.dashboard_utils.render_chart_filters(filters, 'chart-filter', '.percentage-chart-options');\n\t}\n\n\tcreate_heatmap_chart_filters() {\n\t\tlet filters = [\n\t\t\t{\n\t\t\t\tlabel: frappe.dashboard_utils.get_year(frappe.datetime.now_date()),\n\t\t\t\toptions: frappe.dashboard_utils.get_years_since_creation(frappe.boot.user.creation),\n\t\t\t\taction: (selected_item) => {\n\t\t\t\t\tthis.update_heatmap_data(frappe.datetime.obj_to_str(selected_item));\n\t\t\t\t}\n\t\t\t},\n\t\t];\n\t\tfrappe.dashboard_utils.render_chart_filters(filters, 'chart-filter', '.heatmap-options');\n\t}\n\n\n\tedit_profile() {\n\t\tlet edit_profile_dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Edit Profile'),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Attach Image',\n\t\t\t\t\tfieldname: 'user_image',\n\t\t\t\t\tlabel: 'Profile Image',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\tfieldname: 'interest',\n\t\t\t\t\tlabel: 'Interests',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\tfieldname: 'location',\n\t\t\t\t\tlabel: 'Location',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\tfieldname: 'Interest',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Small Text',\n\t\t\t\t\tfieldname: 'bio',\n\t\t\t\t\tlabel: 'Bio',\n\t\t\t\t}\n\t\t\t],\n\t\t\tprimary_action: values => {\n\t\t\t\tedit_profile_dialog.disable_primary_action();\n\t\t\t\tfrappe.xcall('frappe.desk.page.user_profile.user_profile.update_profile_info', {\n\t\t\t\t\tprofile_info: values\n\t\t\t\t}).then(user => {\n\t\t\t\t\tuser.image = user.user_image;\n\t\t\t\t\tthis.user = Object.assign(values, user);\n\t\t\t\t\tedit_profile_dialog.hide();\n\t\t\t\t\tthis.render_user_details();\n\t\t\t\t}).finally(() => {\n\t\t\t\t\tedit_profile_dialog.enable_primary_action();\n\t\t\t\t});\n\t\t\t},\n\t\t\tprimary_action_label: __('Save')\n\t\t});\n\n\t\tedit_profile_dialog.set_values({\n\t\t\tuser_image: this.user.image,\n\t\t\tlocation: this.user.location,\n\t\t\tinterest: this.user.interest,\n\t\t\tbio: this.user.bio\n\t\t});\n\t\tedit_profile_dialog.show();\n\t}\n\n\trender_user_details() {\n\t\tthis.sidebar.empty().append(frappe.render_template('user_profile_sidebar', {\n\t\t\tuser_image: this.user.image,\n\t\t\tuser_abbr: this.user.abbr,\n\t\t\tuser_location: this.user.location,\n\t\t\tuser_interest: this.user.interest,\n\t\t\tuser_bio: this.user.bio,\n\t\t}));\n\n\t\tthis.setup_user_profile_links();\n\t}\n\n\tsetup_user_profile_links() {\n\t\tif (this.user_id !== frappe.session.user) {\n\t\t\tthis.wrapper.find('.profile-links').hide();\n\t\t} else {\n\t\t\tthis.wrapper.find('.edit-profile-link').on('click', () => {\n\t\t\t\tthis.edit_profile();\n\t\t\t});\n\n\t\t\tthis.wrapper.find('.user-settings-link').on('click', () => {\n\t\t\t\tthis.go_to_user_settings();\n\t\t\t});\n\t\t}\n\t}\n\n\tget_user_rank() {\n\t\treturn frappe.xcall('frappe.desk.page.user_profile.user_profile.get_user_rank', {\n\t\t\tuser: this.user_id,\n\t\t}).then(r => {\n\t\t\tif (r.monthly_rank.length) this.month_rank = r.monthly_rank[0];\n\t\t\tif (r.all_time_rank.length) this.rank = r.all_time_rank[0];\n\t\t});\n\t}\n\n\tget_user_points() {\n\t\treturn frappe.xcall(\n\t\t\t'frappe.social.doctype.energy_point_log.energy_point_log.get_user_energy_and_review_points',\n\t\t\t{\n\t\t\t\tuser: this.user_id,\n\t\t\t}\n\t\t).then(r => {\n\t\t\tif (r[this.user_id]) {\n\t\t\t\tthis.energy_points = r[this.user_id].energy_points;\n\t\t\t\tthis.review_points = r[this.user_id].review_points;\n\t\t\t}\n\t\t});\n\t}\n\n\trender_points_and_rank() {\n\t\tlet $profile_details = this.wrapper.find('.user-stats');\n\t\tlet $profile_details_wrapper = this.wrapper.find('.user-stats-detail');\n\n\t\tconst _get_stat_dom = (value, label, icon) => {\n\t\t\treturn `<div class=\"user-stats-item mt-4\">\n\t\t\t\t${frappe.utils.icon(icon, \"lg\", \"no-stroke\")}\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"stat-value\">${value}</div>\n\t\t\t\t\t<div class=\"stat-label\">${label}</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\t};\n\n\t\tthis.get_user_rank().then(() => {\n\t\t\tthis.get_user_points().then(() => {\n\t\t\t\tlet html = $(`\n\t\t\t\t\t${_get_stat_dom(this.energy_points, __('Energy Points'), \"color-energy-points\")}\n\t\t\t\t\t${_get_stat_dom(this.review_points, __('Review Points'), \"color-review-points\")}\n\t\t\t\t\t${_get_stat_dom(this.rank, __('Rank'), \"color-rank\")}\n\t\t\t\t\t${_get_stat_dom(this.month_rank, __('Monthly Rank'), \"color-monthly-rank\")}\n\t\t\t\t`);\n\n\t\t\t\t$profile_details.append(html);\n\t\t\t\t$profile_details_wrapper.removeClass(\"hide\");\n\t\t\t});\n\t\t});\n\t}\n\n\tgo_to_user_settings() {\n\t\tfrappe.set_route('Form', 'User', this.user_id);\n\t}\n\n\tsetup_user_activity_timeline() {\n\t\tthis.user_activity_timeline = new UserProfileTimeline({\n\t\t\tparent: this.wrapper.find('.recent-activity-list'),\n\t\t\tfooter: this.wrapper.find('.recent-activity-footer'),\n\t\t\tuser: this.user_id\n\t\t});\n\n\t\tthis.user_activity_timeline.refresh();\n\t}\n}\n\nclass UserProfileTimeline extends BaseTimeline {\n\tmake() {\n\t\tsuper.make();\n\t\tthis.activity_start = 0;\n\t\tthis.activity_limit = 20;\n\t\tthis.setup_show_more_activity();\n\t}\n\tprepare_timeline_contents() {\n\t\treturn this.get_user_activity_data().then((activities) => {\n\t\t\tif (!activities.length) {\n\t\t\t\tthis.show_more_button.hide();\n\t\t\t\tthis.timeline_wrapper.html(`<div>${__('No activities to show')}</div>`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.show_more_button.toggle(activities.length === this.activity_limit);\n\t\t\tthis.timeline_items = activities.map((activity) => this.get_activity_timeline_item(activity));\n\t\t});\n\t}\n\n\tget_user_activity_data() {\n\t\treturn frappe.xcall('frappe.desk.page.user_profile.user_profile.get_energy_points_list', {\n\t\t\tstart: this.activity_start,\n\t\t\tlimit: this.activity_limit,\n\t\t\tuser: this.user\n\t\t});\n\t}\n\n\tget_activity_timeline_item(data) {\n\t\tlet icon = data.type == 'Appreciation' ? 'clap': data.type == 'Criticism' ? 'criticize': null;\n\t\treturn {\n\t\t\ticon: icon,\n\t\t\tcreation: data.creation,\n\t\t\tis_card: true,\n\t\t\tcontent: frappe.energy_points.format_history_log(data),\n\t\t};\n\t}\n\n\tsetup_show_more_activity() {\n\t\tthis.show_more_button = $(`<a class=\"show-more-activity-btn\">${__('Show More Activity')}</a>`);\n\t\tthis.show_more_button.hide();\n\t\tthis.footer.append(this.show_more_button);\n\t\tthis.show_more_button.on('click', () => this.show_more_activity());\n\t}\n\n\tshow_more_activity() {\n\t\tthis.activity_start += this.activity_limit;\n\t\tthis.get_user_activity_data().then(activities => {\n\t\t\tif (!activities.length || activities.length < this.activity_limit) {\n\t\t\t\tthis.show_more_button.hide();\n\t\t\t}\n\t\t\tlet timeline_items = activities.map((activity) => this.get_activity_timeline_item(activity));\n\t\t\ttimeline_items.map((item) => this.add_timeline_item(item, true));\n\t\t});\n\t}\n}\n\nfrappe.provide('frappe.ui');\nfrappe.ui.UserProfile = UserProfile;\n"],"names":["let","this","const"],"mappings":"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"}