{"version":3,"file":"erpnext.min.js","sources":["../../../apps/erpnext/erpnext/public/js/conf.js","../../../apps/erpnext/erpnext/public/js/utils.js","../../../apps/erpnext/erpnext/public/js/queries.js","../../../apps/erpnext/erpnext/public/js/sms_manager.js","../../../apps/erpnext/erpnext/public/js/utils/party.js","../../../apps/erpnext/erpnext/public/js/controllers/stock_controller.js","../../../apps/erpnext/erpnext/public/js/payment/payments.js","../../../apps/erpnext/erpnext/public/js/controllers/taxes_and_totals.js","../../../apps/erpnext/erpnext/public/js/controllers/transaction.js","../../../apps/erpnext/erpnext/public/js/utils/item_selector.js","../../../apps/erpnext/erpnext/public/js/help_links.js","../../../apps/erpnext/erpnext/public/js/agriculture/ternary_plot.js","../../../apps/erpnext/erpnext/public/js/utils/item_quick_entry.js","../../../apps/erpnext/erpnext/public/js/utils/customer_quick_entry.js","../../../apps/erpnext/erpnext/public/js/utils/supplier_quick_entry.js","../../../apps/erpnext/erpnext/public/js/hub/hub_factory.js","../../../apps/erpnext/erpnext/public/js/call_popup/call_popup.js","../../../apps/erpnext/erpnext/public/js/utils/dimension_tree_filter.js","../../../apps/erpnext/erpnext/public/js/telephony.js"],"sourcesContent":["// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nfrappe.provide('erpnext');\n\n// preferred modules for breadcrumbs\n$.extend(frappe.breadcrumbs.preferred, {\n\t\"Item Group\": \"Stock\",\n\t\"Customer Group\": \"Selling\",\n\t\"Supplier Group\": \"Buying\",\n\t\"Territory\": \"Selling\",\n\t\"Sales Person\": \"Selling\",\n\t\"Sales Partner\": \"Selling\",\n\t\"Brand\": \"Stock\",\n\t\"Maintenance Schedule\": \"Support\",\n\t\"Maintenance Visit\": \"Support\"\n});\n\n$.extend(frappe.breadcrumbs.module_map, {\n\t'ERPNext Integrations': 'Integrations',\n\t'Geo': 'Settings',\n\t'Portal': 'Website',\n\t'Utilities': 'Settings',\n\t'E-commerce': 'Website',\n\t'Contacts': 'CRM'\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\nfrappe.provide(\"erpnext\");\nfrappe.provide(\"erpnext.utils\");\n\n$.extend(erpnext, {\n\tget_currency: function(company) {\n\t\tif(!company && cur_frm)\n\t\t\tcompany = cur_frm.doc.company;\n\t\tif(company)\n\t\t\treturn frappe.get_doc(\":Company\", company).default_currency || frappe.boot.sysdefaults.currency;\n\t\telse\n\t\t\treturn frappe.boot.sysdefaults.currency;\n\t},\n\n\tget_presentation_currency_list: () => {\n\t\tconst docs = frappe.boot.docs;\n\t\tlet currency_list = docs.filter(d => d.doctype === \":Currency\").map(d => d.name);\n\t\tcurrency_list.unshift(\"\");\n\t\treturn currency_list;\n\t},\n\n\ttoggle_naming_series: function() {\n\t\tif(cur_frm.fields_dict.naming_series) {\n\t\t\tcur_frm.toggle_display(\"naming_series\", cur_frm.doc.__islocal?true:false);\n\t\t}\n\t},\n\n\thide_company: function() {\n\t\tif(cur_frm.fields_dict.company) {\n\t\t\tvar companies = Object.keys(locals[\":Company\"] || {});\n\t\t\tif(companies.length === 1) {\n\t\t\t\tif(!cur_frm.doc.company) cur_frm.set_value(\"company\", companies[0]);\n\t\t\t\tcur_frm.toggle_display(\"company\", false);\n\t\t\t} else if(erpnext.last_selected_company) {\n\t\t\t\tif(!cur_frm.doc.company) cur_frm.set_value(\"company\", erpnext.last_selected_company);\n\t\t\t}\n\t\t}\n\t},\n\n\tis_perpetual_inventory_enabled: function(company) {\n\t\tif(company) {\n\t\t\treturn frappe.get_doc(\":Company\", company).enable_perpetual_inventory\n\t\t}\n\t},\n\n\tstale_rate_allowed: () => {\n\t\treturn cint(frappe.boot.sysdefaults.allow_stale);\n\t},\n\n\tsetup_serial_or_batch_no: function() {\n\t\tlet grid_row = cur_frm.open_grid_row();\n\t\tif (!grid_row || !grid_row.grid_form.fields_dict.serial_no ||\n\t\t\tgrid_row.grid_form.fields_dict.serial_no.get_status() !== \"Write\") return;\n\n\t\tfrappe.model.get_value('Item', {'name': grid_row.doc.item_code},\n\t\t\t['has_serial_no', 'has_batch_no'], ({has_serial_no, has_batch_no}) => {\n\t\t\t\tObject.assign(grid_row.doc, {has_serial_no, has_batch_no});\n\n\t\t\t\tif (has_serial_no) {\n\t\t\t\t\tattach_selector_button(__(\"Add Serial No\"),\n\t\t\t\t\t\tgrid_row.grid_form.fields_dict.serial_no.$wrapper, this, grid_row);\n\t\t\t\t} else if (has_batch_no) {\n\t\t\t\t\tattach_selector_button(__(\"Pick Batch No\"),\n\t\t\t\t\t\tgrid_row.grid_form.fields_dict.batch_no.$wrapper, this, grid_row);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t},\n\n\troute_to_adjustment_jv: (args) => {\n\t\tfrappe.model.with_doctype('Journal Entry', () => {\n\t\t\t// route to adjustment Journal Entry to handle Account Balance and Stock Value mismatch\n\t\t\tlet journal_entry = frappe.model.get_new_doc('Journal Entry');\n\n\t\t\targs.accounts.forEach((je_account) => {\n\t\t\t\tlet child_row = frappe.model.add_child(journal_entry, \"accounts\");\n\t\t\t\tchild_row.account = je_account.account;\n\t\t\t\tchild_row.debit_in_account_currency = je_account.debit_in_account_currency;\n\t\t\t\tchild_row.credit_in_account_currency = je_account.credit_in_account_currency;\n\t\t\t\tchild_row.party_type = \"\" ;\n\t\t\t});\n\t\t\tfrappe.set_route('Form','Journal Entry', journal_entry.name);\n\t\t});\n\t},\n\n\troute_to_pending_reposts: (args) => {\n\t\tfrappe.set_route('List', 'Repost Item Valuation', args);\n\t},\n\n\tproceed_save_with_reminders_frequency_change: () => {\n\t\tfrappe.ui.hide_open_dialog();\n\n\t\tfrappe.call({\n\t\t\tmethod: 'erpnext.hr.doctype.hr_settings.hr_settings.set_proceed_with_frequency_change',\n\t\t\tcallback: () => {\n\t\t\t\tcur_frm.save();\n\t\t\t}\n\t\t});\n\t}\n});\n\n\n$.extend(erpnext.utils, {\n\tset_party_dashboard_indicators: function(frm) {\n\t\tif(frm.doc.__onload && frm.doc.__onload.dashboard_info) {\n\t\t\tvar company_wise_info = frm.doc.__onload.dashboard_info;\n\t\t\tif(company_wise_info.length > 1) {\n\t\t\t\tcompany_wise_info.forEach(function(info) {\n\t\t\t\t\terpnext.utils.add_indicator_for_multicompany(frm, info);\n\t\t\t\t});\n\t\t\t} else if (company_wise_info.length === 1) {\n\t\t\t\tfrm.dashboard.add_indicator(__('Annual Billing: {0}',\n\t\t\t\t\t[format_currency(company_wise_info[0].billing_this_year, company_wise_info[0].currency)]), 'blue');\n\t\t\t\tfrm.dashboard.add_indicator(__('Total Unpaid: {0}',\n\t\t\t\t\t[format_currency(company_wise_info[0].total_unpaid, company_wise_info[0].currency)]),\n\t\t\t\tcompany_wise_info[0].total_unpaid ? 'orange' : 'green');\n\n\t\t\t\tif(company_wise_info[0].loyalty_points) {\n\t\t\t\t\tfrm.dashboard.add_indicator(__('Loyalty Points: {0}',\n\t\t\t\t\t\t[company_wise_info[0].loyalty_points]), 'blue');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tadd_indicator_for_multicompany: function(frm, info) {\n\t\tfrm.dashboard.stats_area.removeClass('hidden');\n\t\tfrm.dashboard.stats_area_row.addClass('flex');\n\t\tfrm.dashboard.stats_area_row.css('flex-wrap', 'wrap');\n\n\t\tvar color = info.total_unpaid ? 'orange' : 'green';\n\n\t\tvar indicator = $('<div class=\"flex-column col-xs-6\">'+\n\t\t\t'<div style=\"margin-top:10px\"><h6>'+info.company+'</h6></div>'+\n\n\t\t\t'<div class=\"badge-link small\" style=\"margin-bottom:10px\"><span class=\"indicator blue\">'+\n\t\t\t'Annual Billing: '+format_currency(info.billing_this_year, info.currency)+'</span></div>'+\n\n\t\t\t'<div class=\"badge-link small\" style=\"margin-bottom:10px\">'+\n\t\t\t'<span class=\"indicator '+color+'\">Total Unpaid: '\n\t\t\t+format_currency(info.total_unpaid, info.currency)+'</span></div>'+\n\n\n\t\t\t'</div>').appendTo(frm.dashboard.stats_area_row);\n\n\t\tif(info.loyalty_points){\n\t\t\t$('<div class=\"badge-link small\" style=\"margin-bottom:10px\"><span class=\"indicator blue\">'+\n\t\t\t'Loyalty Points: '+info.loyalty_points+'</span></div>').appendTo(indicator);\n\t\t}\n\n\t\treturn indicator;\n\t},\n\n\tget_party_name: function(party_type) {\n\t\tvar dict = {'Customer': 'customer_name', 'Supplier': 'supplier_name', 'Employee': 'employee_name',\n\t\t\t'Member': 'member_name'};\n\t\treturn dict[party_type];\n\t},\n\n\tcopy_value_in_all_rows: function(doc, dt, dn, table_fieldname, fieldname) {\n\t\tvar d = locals[dt][dn];\n\t\tif(d[fieldname]){\n\t\t\tvar cl = doc[table_fieldname] || [];\n\t\t\tfor(var i = 0; i < cl.length; i++) {\n\t\t\t\tif(!cl[i][fieldname]) cl[i][fieldname] = d[fieldname];\n\t\t\t}\n\t\t}\n\t\trefresh_field(table_fieldname);\n\t},\n\n\tget_terms: function(tc_name, doc, callback) {\n\t\tif(tc_name) {\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: 'erpnext.setup.doctype.terms_and_conditions.terms_and_conditions.get_terms_and_conditions',\n\t\t\t\targs: {\n\t\t\t\t\ttemplate_name: tc_name,\n\t\t\t\t\tdoc: doc\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tcallback(r)\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tmake_bank_account: function(doctype, docname) {\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext.accounts.doctype.bank_account.bank_account.make_bank_account\",\n\t\t\targs: {\n\t\t\t\tdoctype: doctype,\n\t\t\t\tdocname: docname\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t\tcallback: function(r) {\n\t\t\t\tvar doclist = frappe.model.sync(r.message);\n\t\t\t\tfrappe.set_route(\"Form\", doclist[0].doctype, doclist[0].name);\n\t\t\t}\n\t\t})\n\t},\n\n\tadd_dimensions: function(report_name, index) {\n\t\tlet filters = frappe.query_reports[report_name].filters;\n\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext.accounts.doctype.accounting_dimension.accounting_dimension.get_dimensions\",\n\t\t\tcallback: function(r) {\n\t\t\t\tlet accounting_dimensions = r.message[0];\n\t\t\t\taccounting_dimensions.forEach((dimension) => {\n\t\t\t\t\tlet found = filters.some(el => el.fieldname === dimension['fieldname']);\n\n\t\t\t\t\tif (!found) {\n\t\t\t\t\t\tfilters.splice(index, 0, {\n\t\t\t\t\t\t\t\"fieldname\": dimension[\"fieldname\"],\n\t\t\t\t\t\t\t\"label\": __(dimension[\"label\"]),\n\t\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\t\"options\": dimension[\"document_type\"]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tmake_subscription: function(doctype, docname) {\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.automation.doctype.auto_repeat.auto_repeat.make_auto_repeat\",\n\t\t\targs: {\n\t\t\t\tdoctype: doctype,\n\t\t\t\tdocname: docname\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tvar doclist = frappe.model.sync(r.message);\n\t\t\t\tfrappe.set_route(\"Form\", doclist[0].doctype, doclist[0].name);\n\t\t\t}\n\t\t})\n\t},\n\n\tmake_pricing_rule: function(doctype, docname) {\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext.accounts.doctype.pricing_rule.pricing_rule.make_pricing_rule\",\n\t\t\targs: {\n\t\t\t\tdoctype: doctype,\n\t\t\t\tdocname: docname\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tvar doclist = frappe.model.sync(r.message);\n\t\t\t\tfrappe.set_route(\"Form\", doclist[0].doctype, doclist[0].name);\n\t\t\t}\n\t\t})\n\t},\n\n\t/**\n\t* Checks if the first row of a given child table is empty\n\t* @param child_table - Child table Doctype\n\t* @return {Boolean}\n\t**/\n\tfirst_row_is_empty: function(child_table){\n\t\tif($.isArray(child_table) && child_table.length > 0) {\n\t\t\treturn !child_table[0].item_code;\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* Removes the first row of a child table if it is empty\n\t* @param {_Frm} frm - The current form\n\t* @param {String} child_table_name - The child table field name\n\t* @return {Boolean}\n\t**/\n\tremove_empty_first_row: function(frm, child_table_name){\n\t\tconst rows = frm['doc'][child_table_name];\n\t\tif (this.first_row_is_empty(rows)){\n\t\t\tfrm['doc'][child_table_name] = rows.splice(1);\n\t\t}\n\t\treturn rows;\n\t},\n\tget_tree_options: function(option) {\n\t\t// get valid options for tree based on user permission & locals dict\n\t\tlet unscrub_option = frappe.model.unscrub(option);\n\t\tlet user_permission = frappe.defaults.get_user_permissions();\n\t\tlet options;\n\n\t\tif(user_permission && user_permission[unscrub_option]) {\n\t\t\toptions = user_permission[unscrub_option].map(perm => perm.doc);\n\t\t} else {\n\t\t\toptions = $.map(locals[`:${unscrub_option}`], function(c) { return c.name; }).sort();\n\t\t}\n\n\t\t// filter unique values, as there may be multiple user permissions for any value\n\t\treturn options.filter((value, index, self) => self.indexOf(value) === index);\n\t},\n\tget_tree_default: function(option) {\n\t\t// set default for a field based on user permission\n\t\tlet options = this.get_tree_options(option);\n\t\tif(options.includes(frappe.defaults.get_default(option))) {\n\t\t\treturn frappe.defaults.get_default(option);\n\t\t} else {\n\t\t\treturn options[0];\n\t\t}\n\t},\n\toverrides_parent_value_in_all_rows: function(doc, dt, dn, table_fieldname, fieldname, parent_fieldname) {\n\t\tif (doc[parent_fieldname]) {\n\t\t\tlet cl = doc[table_fieldname] || [];\n\t\t\tfor (let i = 0; i < cl.length; i++) {\n\t\t\t\tcl[i][fieldname] = doc[parent_fieldname];\n\t\t\t}\n\t\t\tfrappe.refresh_field(table_fieldname);\n\t\t}\n\t},\n\tcreate_new_doc: function (doctype, update_fields) {\n\t\tfrappe.model.with_doctype(doctype, function() {\n\t\t\tvar new_doc = frappe.model.get_new_doc(doctype);\n\t\t\tfor (let [key, value] of Object.entries(update_fields)) {\n\t\t\t\tnew_doc[key] = value;\n\t\t\t}\n\t\t\tfrappe.ui.form.make_quick_entry(doctype, null, null, new_doc);\n\t\t});\n\t}\n\n});\n\nerpnext.utils.select_alternate_items = function(opts) {\n\tconst frm = opts.frm;\n\tconst warehouse_field = opts.warehouse_field || 'warehouse';\n\tconst item_field = opts.item_field || 'item_code';\n\n\tthis.data = [];\n\tconst dialog = new frappe.ui.Dialog({\n\t\ttitle: __(\"Select Alternate Item\"),\n\t\tfields: [\n\t\t\t{fieldtype:'Section Break', label: __('Items')},\n\t\t\t{\n\t\t\t\tfieldname: \"alternative_items\", fieldtype: \"Table\", cannot_add_rows: true,\n\t\t\t\tin_place_edit: true, data: this.data,\n\t\t\t\tget_data: () => {\n\t\t\t\t\treturn this.data;\n\t\t\t\t},\n\t\t\t\tfields: [{\n\t\t\t\t\tfieldtype:'Data',\n\t\t\t\t\tfieldname:\"docname\",\n\t\t\t\t\thidden: 1\n\t\t\t\t}, {\n\t\t\t\t\tfieldtype:'Link',\n\t\t\t\t\tfieldname:\"item_code\",\n\t\t\t\t\toptions: 'Item',\n\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\tread_only: 1,\n\t\t\t\t\tlabel: __('Item Code')\n\t\t\t\t}, {\n\t\t\t\t\tfieldtype:'Link',\n\t\t\t\t\tfieldname:\"alternate_item\",\n\t\t\t\t\toptions: 'Item',\n\t\t\t\t\tdefault: \"\",\n\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\tlabel: __('Alternate Item'),\n\t\t\t\t\tonchange: function() {\n\t\t\t\t\t\tconst item_code = this.get_value();\n\t\t\t\t\t\tconst warehouse = this.grid_row.on_grid_fields_dict.warehouse.get_value();\n\t\t\t\t\t\tif (item_code && warehouse) {\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: \"erpnext.stock.utils.get_latest_stock_qty\",\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\titem_code: item_code,\n\t\t\t\t\t\t\t\t\twarehouse: warehouse\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\t\t\t\tthis.grid_row.on_grid_fields_dict\n\t\t\t\t\t\t\t\t\t\t.actual_qty.set_value(r.message || 0);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tget_query: (e) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tquery: \"erpnext.stock.doctype.item_alternative.item_alternative.get_alternative_items\",\n\t\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\t\titem_code: e.item_code\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tfieldtype:'Link',\n\t\t\t\t\tfieldname:\"warehouse\",\n\t\t\t\t\toptions: 'Warehouse',\n\t\t\t\t\tdefault: \"\",\n\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\tlabel: __('Warehouse'),\n\t\t\t\t\tonchange: function() {\n\t\t\t\t\t\tconst warehouse = this.get_value();\n\t\t\t\t\t\tconst item_code = this.grid_row.on_grid_fields_dict.item_code.get_value();\n\t\t\t\t\t\tif (item_code && warehouse) {\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: \"erpnext.stock.utils.get_latest_stock_qty\",\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\titem_code: item_code,\n\t\t\t\t\t\t\t\t\twarehouse: warehouse\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\t\t\t\tthis.grid_row.on_grid_fields_dict\n\t\t\t\t\t\t\t\t\t\t.actual_qty.set_value(r.message || 0);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}, {\n\t\t\t\t\tfieldtype:'Float',\n\t\t\t\t\tfieldname:\"actual_qty\",\n\t\t\t\t\tdefault: 0,\n\t\t\t\t\tread_only: 1,\n\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\tlabel: __('Available Qty')\n\t\t\t\t}]\n\t\t\t},\n\t\t],\n\t\tprimary_action: function() {\n\t\t\tconst args = this.get_values()[\"alternative_items\"];\n\t\t\tconst alternative_items = args.filter(d => {\n\t\t\t\tif (d.alternate_item && d.item_code != d.alternate_item) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\talternative_items.forEach(d => {\n\t\t\t\tlet row = frappe.get_doc(opts.child_doctype, d.docname);\n\t\t\t\tlet qty = null;\n\t\t\t\tif (row.doctype === 'Work Order Item') {\n\t\t\t\t\tqty = row.required_qty;\n\t\t\t\t} else {\n\t\t\t\t\tqty = row.qty;\n\t\t\t\t}\n\t\t\t\trow[item_field] = d.alternate_item;\n\t\t\t\tfrappe.model.set_value(row.doctype, row.name, 'qty', qty);\n\t\t\t\tfrappe.model.set_value(row.doctype, row.name, opts.original_item_field, d.item_code);\n\t\t\t\tfrm.trigger(item_field, row.doctype, row.name);\n\t\t\t});\n\n\t\t\trefresh_field(opts.child_docname);\n\t\t\tthis.hide();\n\t\t},\n\t\tprimary_action_label: __('Update')\n\t});\n\n\tfrm.doc[opts.child_docname].forEach(d => {\n\t\tif (!opts.condition || opts.condition(d)) {\n\t\t\tdialog.fields_dict.alternative_items.df.data.push({\n\t\t\t\t\"docname\": d.name,\n\t\t\t\t\"item_code\": d[item_field],\n\t\t\t\t\"warehouse\": d[warehouse_field],\n\t\t\t\t\"actual_qty\": d.actual_qty\n\t\t\t});\n\t\t}\n\t})\n\n\tthis.data = dialog.fields_dict.alternative_items.df.data;\n\tdialog.fields_dict.alternative_items.grid.refresh();\n\tdialog.show();\n}\n\nerpnext.utils.update_child_items = function(opts) {\n\tconst frm = opts.frm;\n\tconst cannot_add_row = (typeof opts.cannot_add_row === 'undefined') ? true : opts.cannot_add_row;\n\tconst child_docname = (typeof opts.cannot_add_row === 'undefined') ? \"items\" : opts.child_docname;\n\tconst child_meta = frappe.get_meta(`${frm.doc.doctype} Item`);\n\tconst get_precision = (fieldname) => child_meta.fields.find(f => f.fieldname == fieldname).precision;\n\n\tthis.data = [];\n\tconst fields = [{\n\t\tfieldtype:'Data',\n\t\tfieldname:\"docname\",\n\t\tread_only: 1,\n\t\thidden: 1,\n\t}, {\n\t\tfieldtype:'Link',\n\t\tfieldname:\"item_code\",\n\t\toptions: 'Item',\n\t\tin_list_view: 1,\n\t\tread_only: 0,\n\t\tdisabled: 0,\n\t\tlabel: __('Item Code'),\n\t\tget_query: function() {\n\t\t\tlet filters;\n\t\t\tif (frm.doc.doctype == 'Sales Order') {\n\t\t\t\tfilters = {\"is_sales_item\": 1};\n\t\t\t} else if (frm.doc.doctype == 'Purchase Order') {\n\t\t\t\tif (frm.doc.is_subcontracted == \"Yes\") {\n\t\t\t\t\tfilters = {\"is_sub_contracted_item\": 1};\n\t\t\t\t} else {\n\t\t\t\t\tfilters = {\"is_purchase_item\": 1};\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tquery: \"erpnext.controllers.queries.item_query\",\n\t\t\t\tfilters: filters\n\t\t\t};\n\t\t}\n\t}, {\n\t\tfieldtype:'Link',\n\t\tfieldname:'uom',\n\t\toptions: 'UOM',\n\t\tread_only: 0,\n\t\tlabel: __('UOM'),\n\t\treqd: 1,\n\t\tonchange: function () {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.stock.get_item_details.get_conversion_factor\",\n\t\t\t\targs: { item_code: this.doc.item_code, uom: this.value },\n\t\t\t\tcallback: r => {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tif (this.doc.conversion_factor == r.message.conversion_factor) return;\n\n\t\t\t\t\t\tconst docname = this.doc.docname;\n\t\t\t\t\t\tdialog.fields_dict.trans_items.df.data.some(doc => {\n\t\t\t\t\t\t\tif (doc.docname == docname) {\n\t\t\t\t\t\t\t\tdoc.conversion_factor = r.message.conversion_factor;\n\t\t\t\t\t\t\t\tdialog.fields_dict.trans_items.grid.refresh();\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, {\n\t\tfieldtype:'Float',\n\t\tfieldname:\"qty\",\n\t\tdefault: 0,\n\t\tread_only: 0,\n\t\tin_list_view: 1,\n\t\tlabel: __('Qty'),\n\t\tprecision: get_precision(\"qty\")\n\t}, {\n\t\tfieldtype:'Currency',\n\t\tfieldname:\"rate\",\n\t\toptions: \"currency\",\n\t\tdefault: 0,\n\t\tread_only: 0,\n\t\tin_list_view: 1,\n\t\tlabel: __('Rate'),\n\t\tprecision: get_precision(\"rate\")\n\t}];\n\n\tif (frm.doc.doctype == 'Sales Order' || frm.doc.doctype == 'Purchase Order' ) {\n\t\tfields.splice(2, 0, {\n\t\t\tfieldtype: 'Date',\n\t\t\tfieldname: frm.doc.doctype == 'Sales Order' ? \"delivery_date\" : \"schedule_date\",\n\t\t\tin_list_view: 1,\n\t\t\tlabel: frm.doc.doctype == 'Sales Order' ? __(\"Delivery Date\") : __(\"Reqd by date\"),\n\t\t\treqd: 1\n\t\t})\n\t\tfields.splice(3, 0, {\n\t\t\tfieldtype: 'Float',\n\t\t\tfieldname: \"conversion_factor\",\n\t\t\tin_list_view: 1,\n\t\t\tlabel: __(\"Conversion Factor\"),\n\t\t\tprecision: get_precision('conversion_factor')\n\t\t})\n\t}\n\n\tconst dialog = new frappe.ui.Dialog({\n\t\ttitle: __(\"Update Items\"),\n\t\tfields: [\n\t\t\t{\n\t\t\t\tfieldname: \"trans_items\",\n\t\t\t\tfieldtype: \"Table\",\n\t\t\t\tlabel: \"Items\",\n\t\t\t\tcannot_add_rows: cannot_add_row,\n\t\t\t\tin_place_edit: false,\n\t\t\t\treqd: 1,\n\t\t\t\tdata: this.data,\n\t\t\t\tget_data: () => {\n\t\t\t\t\treturn this.data;\n\t\t\t\t},\n\t\t\t\tfields: fields\n\t\t\t},\n\t\t],\n\t\tprimary_action: function() {\n\t\t\tconst trans_items = this.get_values()[\"trans_items\"].filter((item) => !!item.item_code);\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'erpnext.controllers.accounts_controller.update_child_qty_rate',\n\t\t\t\tfreeze: true,\n\t\t\t\targs: {\n\t\t\t\t\t'parent_doctype': frm.doc.doctype,\n\t\t\t\t\t'trans_items': trans_items,\n\t\t\t\t\t'parent_doctype_name': frm.doc.name,\n\t\t\t\t\t'child_docname': child_docname\n\t\t\t\t},\n\t\t\t\tcallback: function() {\n\t\t\t\t\tfrm.reload_doc();\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.hide();\n\t\t\trefresh_field(\"items\");\n\t\t},\n\t\tprimary_action_label: __('Update')\n\t});\n\n\tfrm.doc[opts.child_docname].forEach(d => {\n\t\tdialog.fields_dict.trans_items.df.data.push({\n\t\t\t\"docname\": d.name,\n\t\t\t\"name\": d.name,\n\t\t\t\"item_code\": d.item_code,\n\t\t\t\"delivery_date\": d.delivery_date,\n\t\t\t\"schedule_date\": d.schedule_date,\n\t\t\t\"conversion_factor\": d.conversion_factor,\n\t\t\t\"qty\": d.qty,\n\t\t\t\"rate\": d.rate,\n\t\t\t\"uom\": d.uom\n\t\t});\n\t\tthis.data = dialog.fields_dict.trans_items.df.data;\n\t\tdialog.fields_dict.trans_items.grid.refresh();\n\t})\n\tdialog.show();\n}\n\nerpnext.utils.map_current_doc = function(opts) {\n\tfunction _map() {\n\t\tif($.isArray(cur_frm.doc.items) && cur_frm.doc.items.length > 0) {\n\t\t\t// remove first item row if empty\n\t\t\tif(!cur_frm.doc.items[0].item_code) {\n\t\t\t\tcur_frm.doc.items = cur_frm.doc.items.splice(1);\n\t\t\t}\n\n\t\t\t// find the doctype of the items table\n\t\t\tvar items_doctype = frappe.meta.get_docfield(cur_frm.doctype, 'items').options;\n\n\t\t\t// find the link fieldname from items table for the given\n\t\t\t// source_doctype\n\t\t\tvar link_fieldname = null;\n\t\t\tfrappe.get_meta(items_doctype).fields.forEach(function(d) {\n\t\t\t\tif(d.options===opts.source_doctype) link_fieldname = d.fieldname; });\n\n\t\t\t// search in existing items if the source_name is already set and full qty fetched\n\t\t\tvar already_set = false;\n\t\t\tvar item_qty_map = {};\n\n\t\t\t$.each(cur_frm.doc.items, function(i, d) {\n\t\t\t\topts.source_name.forEach(function(src) {\n\t\t\t\t\tif(d[link_fieldname]==src) {\n\t\t\t\t\t\talready_set = true;\n\t\t\t\t\t\tif (item_qty_map[d.item_code])\n\t\t\t\t\t\t\titem_qty_map[d.item_code] += flt(d.qty);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\titem_qty_map[d.item_code] = flt(d.qty);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif(already_set) {\n\t\t\t\topts.source_name.forEach(function(src) {\n\t\t\t\t\tfrappe.model.with_doc(opts.source_doctype, src, function(r) {\n\t\t\t\t\t\tvar source_doc = frappe.model.get_doc(opts.source_doctype, src);\n\t\t\t\t\t\t$.each(source_doc.items || [], function(i, row) {\n\t\t\t\t\t\t\tif(row.qty > flt(item_qty_map[row.item_code])) {\n\t\t\t\t\t\t\t\talready_set = false;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\n\t\t\t\t\tif(already_set) {\n\t\t\t\t\t\tfrappe.msgprint(__(\"You have already selected items from {0} {1}\",\n\t\t\t\t\t\t\t[opts.source_doctype, src]));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\treturn frappe.call({\n\t\t\t// Sometimes we hit the limit for URL length of a GET request\n\t\t\t// as we send the full target_doc. Hence this is a POST request.\n\t\t\ttype: \"POST\",\n\t\t\tmethod: 'frappe.model.mapper.map_docs',\n\t\t\targs: {\n\t\t\t\t\"method\": opts.method,\n\t\t\t\t\"source_names\": opts.source_name,\n\t\t\t\t\"target_doc\": cur_frm.doc,\n\t\t\t\t\"args\": opts.args\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tvar doc = frappe.model.sync(r.message);\n\t\t\t\t\tcur_frm.dirty();\n\t\t\t\t\tcur_frm.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tlet query_args = {};\n\tif (opts.get_query_filters) {\n\t\tquery_args.filters = opts.get_query_filters;\n\t}\n\n\tif (opts.get_query_method) {\n\t\tquery_args.query = opts.get_query_method;\n\t}\n\n\tif (query_args.filters || query_args.query) {\n\t\topts.get_query = () => query_args;\n\t}\n\n\tif (opts.source_doctype) {\n\t\tconst d = new frappe.ui.form.MultiSelectDialog({\n\t\t\tdoctype: opts.source_doctype,\n\t\t\ttarget: opts.target,\n\t\t\tdate_field: opts.date_field || undefined,\n\t\t\tsetters: opts.setters,\n\t\t\tget_query: opts.get_query,\n\t\t\tadd_filters_group: 1,\n\t\t\tallow_child_item_selection: opts.allow_child_item_selection,\n\t\t\tchild_fieldname: opts.child_fielname,\n\t\t\tchild_columns: opts.child_columns,\n\t\t\tsize: opts.size,\n\t\t\taction: function(selections, args) {\n\t\t\t\tlet values = selections;\n\t\t\t\tif (values.length === 0) {\n\t\t\t\t\tfrappe.msgprint(__(\"Please select {0}\", [opts.source_doctype]))\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\topts.source_name = values;\n\t\t\t\tif (opts.allow_child_item_selection) {\n\t\t\t\t\t// args contains filtered child docnames\n\t\t\t\t\topts.args = args;\n\t\t\t\t}\n\t\t\t\td.dialog.hide();\n\t\t\t\t_map();\n\t\t\t},\n\t\t});\n\n\t\treturn d;\n\t}\n\n\tif (opts.source_name) {\n\t\topts.source_name = [opts.source_name];\n\t\t_map();\n\t}\n}\n\nfrappe.form.link_formatters['Item'] = function(value, doc) {\n\tif (doc && value && doc.item_name && doc.item_name !== value && doc.item_code === value) {\n\t\treturn value + ': ' + doc.item_name;\n\t} else if (!value && doc.doctype && doc.item_name) {\n\t\t// format blank value in child table\n\t\treturn doc.item_name;\n\t} else {\n\t\t// if value is blank in report view or item code and name are the same, return as is\n\t\treturn value;\n\t}\n}\n\nfrappe.form.link_formatters['Employee'] = function(value, doc) {\n\tif (doc && value && doc.employee_name && doc.employee_name !== value && doc.employee === value) {\n\t\treturn value + ': ' + doc.employee_name;\n\t} else if (!value && doc.doctype && doc.employee_name) {\n\t\t// format blank value in child table\n\t\treturn doc.employee;\n\t} else {\n\t\t// if value is blank in report view or project name and name are the same, return as is\n\t\treturn value;\n\t}\n}\n\nfrappe.form.link_formatters['Project'] = function(value, doc) {\n\tif (doc && value && doc.project_name && doc.project_name !== value && doc.project === value) {\n\t\treturn value + ': ' + doc.project_name;\n\t} else if (!value && doc.doctype && doc.project_name) {\n\t\t// format blank value in child table\n\t\treturn doc.project;\n\t} else {\n\t\t// if value is blank in report view or project name and name are the same, return as is\n\t\treturn value;\n\t}\n};\n\n// add description on posting time\n$(document).on('app_ready', function() {\n\tif(!frappe.datetime.is_timezone_same()) {\n\t\t$.each([\"Stock Reconciliation\", \"Stock Entry\", \"Stock Ledger Entry\",\n\t\t\t\"Delivery Note\", \"Purchase Receipt\", \"Sales Invoice\"], function(i, d) {\n\t\t\tfrappe.ui.form.on(d, \"onload\", function(frm) {\n\t\t\t\tcur_frm.set_df_property(\"posting_time\", \"description\",\n\t\t\t\t\tfrappe.sys_defaults.time_zone);\n\t\t\t});\n\t\t});\n\t}\n});\n\nfunction attach_selector_button(inner_text, append_loction, context, grid_row) {\n\tlet $btn_div = $(\"<div>\").css({\"margin-bottom\": \"10px\", \"margin-top\": \"10px\"})\n\t\t.appendTo(append_loction);\n\tlet $btn = $(`<button class=\"btn btn-sm btn-default\">${inner_text}</button>`)\n\t\t.appendTo($btn_div);\n\n\t$btn.on(\"click\", function() {\n\t\tcontext.show_serial_batch_selector(grid_row.frm, grid_row.doc, \"\", \"\", true);\n\t});\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\n// searches for enabled users\nfrappe.provide(\"erpnext.queries\");\n$.extend(erpnext.queries, {\n\tuser: function() {\n\t\treturn { query: \"frappe.core.doctype.user.user.user_query\" };\n\t},\n\n\tlead: function() {\n\t\treturn { query: \"erpnext.controllers.queries.lead_query\" };\n\t},\n\n\tcustomer: function() {\n\t\treturn { query: \"erpnext.controllers.queries.customer_query\" };\n\t},\n\n\tsupplier: function() {\n\t\treturn { query: \"erpnext.controllers.queries.supplier_query\" };\n\t},\n\n\titem: function(filters) {\n\t\tvar args = { query: \"erpnext.controllers.queries.item_query\" };\n\t\tif(filters) args[\"filters\"] = filters;\n\t\treturn args;\n\t},\n\n\tbom: function() {\n\t\treturn { query: \"erpnext.controllers.queries.bom\" };\n\t},\n\n\ttask: function() {\n\t\treturn { query: \"erpnext.projects.utils.query_task\" };\n\t},\n\n\tcustomer_filter: function(doc) {\n\t\tif(!doc.customer) {\n\t\t\tfrappe.throw(__(\"Please set {0}\", [__(frappe.meta.get_label(doc.doctype, \"customer\", doc.name))]));\n\t\t}\n\n\t\treturn { filters: { customer: doc.customer } };\n\t},\n\n\tcontact_query: function(doc) {\n\t\tif(frappe.dynamic_link) {\n\t\t\tif(!doc[frappe.dynamic_link.fieldname]) {\n\t\t\t\tfrappe.throw(__(\"Please set {0}\",\n\t\t\t\t\t[__(frappe.meta.get_label(doc.doctype, frappe.dynamic_link.fieldname, doc.name))]));\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tquery: 'frappe.contacts.doctype.contact.contact.contact_query',\n\t\t\t\tfilters: {\n\t\t\t\t\tlink_doctype: frappe.dynamic_link.doctype,\n\t\t\t\t\tlink_name: doc[frappe.dynamic_link.fieldname]\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\n\taddress_query: function(doc) {\n\t\tif(frappe.dynamic_link) {\n\t\t\tif(!doc[frappe.dynamic_link.fieldname]) {\n\t\t\t\tfrappe.throw(__(\"Please set {0}\",\n\t\t\t\t\t[__(frappe.meta.get_label(doc.doctype, frappe.dynamic_link.fieldname, doc.name))]));\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tquery: 'frappe.contacts.doctype.address.address.address_query',\n\t\t\t\tfilters: {\n\t\t\t\t\tlink_doctype: frappe.dynamic_link.doctype,\n\t\t\t\t\tlink_name: doc[frappe.dynamic_link.fieldname]\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\n\tcompany_address_query: function(doc) {\n\t\treturn {\n\t\t\tquery: 'frappe.contacts.doctype.address.address.address_query',\n\t\t\tfilters: { is_your_company_address: 1, link_doctype: 'Company', link_name: doc.company || '' }\n\t\t};\n\t},\n\n\tdispatch_address_query: function(doc) {\n\t\treturn {\n\t\t\tquery: 'frappe.contacts.doctype.address.address.address_query',\n\t\t\tfilters: { link_doctype: 'Company', link_name: doc.company || '' }\n\t\t};\n\t},\n\n\tsupplier_filter: function(doc) {\n\t\tif(!doc.supplier) {\n\t\t\tfrappe.throw(__(\"Please set {0}\", [__(frappe.meta.get_label(doc.doctype, \"supplier\", doc.name))]));\n\t\t}\n\n\t\treturn { filters: { supplier: doc.supplier } };\n\t},\n\n\tlead_filter: function(doc) {\n\t\tif(!doc.lead) {\n\t\t\tfrappe.throw(__(\"Please specify a {0}\",\n\t\t\t\t[__(frappe.meta.get_label(doc.doctype, \"lead\", doc.name))]));\n\t\t}\n\n\t\treturn { filters: { lead: doc.lead } };\n\t},\n\n\tnot_a_group_filter: function() {\n\t\treturn { filters: { is_group: 0 } };\n\t},\n\n\temployee: function() {\n\t\treturn { query: \"erpnext.controllers.queries.employee_query\" }\n\t},\n\n\twarehouse: function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n\t\t\t\t[\"Warehouse\", \"company\", \"in\", [\"\", cstr(doc.company)]],\n\t\t\t\t[\"Warehouse\", \"is_group\", \"=\",0]\n\n\t\t\t]\n\t\t};\n\t},\n\n\tget_filtered_dimensions: function(doc, child_fields, dimension, company) {\n\t\tlet account = '';\n\n\t\tchild_fields.forEach((field) => {\n\t\t\tif (!account) {\n\t\t\t\taccount = doc[field];\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tquery: \"erpnext.controllers.queries.get_filtered_dimensions\",\n\t\t\tfilters: {\n\t\t\t\t'dimension': dimension,\n\t\t\t\t'account': account,\n\t\t\t\t'company': company\n\t\t\t}\n\t\t};\n\t}\n});\n\nerpnext.queries.setup_queries = function(frm, options, query_fn) {\n\tvar me = this;\n\tvar set_query = function(doctype, parentfield) {\n\t\tvar link_fields = frappe.meta.get_docfields(doctype, frm.doc.name,\n\t\t\t{\"fieldtype\": \"Link\", \"options\": options});\n\t\t$.each(link_fields, function(i, df) {\n\t\t\tif(parentfield) {\n\t\t\t\tfrm.set_query(df.fieldname, parentfield, query_fn);\n\t\t\t} else {\n\t\t\t\tfrm.set_query(df.fieldname, query_fn);\n\t\t\t}\n\t\t});\n\t};\n\n\tset_query(frm.doc.doctype);\n\n\t// warehouse field in tables\n\t$.each(frappe.meta.get_docfields(frm.doc.doctype, frm.doc.name, {\"fieldtype\": \"Table\"}),\n\t\tfunction(i, df) {\n\t\t\tset_query(df.options, df.fieldname);\n\t\t});\n}\n\n/* \tif item code is selected in child table\n\tthen list down warehouses with its quantity\n\telse apply default filters.\n*/\nerpnext.queries.setup_warehouse_query = function(frm){\n\tfrm.set_query('warehouse', 'items', function(doc, cdt, cdn) {\n\t\tvar row  = locals[cdt][cdn];\n\t\tvar filters = erpnext.queries.warehouse(frm.doc);\n\t\tif(row.item_code){\n\t\t\t$.extend(filters, {\"query\":\"erpnext.controllers.queries.warehouse_query\"});\n\t\t\tfilters[\"filters\"].push([\"Bin\", \"item_code\", \"=\", row.item_code]);\n\t\t}\n\t\treturn filters\n\t});\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nerpnext.SMSManager = function SMSManager(doc) {\n\tvar me = this;\n\tthis.setup = function() {\n\t\tvar default_msg = {\n\t\t\t'Lead'\t\t\t\t: '',\n\t\t\t'Opportunity'\t\t\t: 'Your enquiry has been logged into the system. Ref No: ' + doc.name,\n\t\t\t'Quotation'\t\t\t: 'Quotation ' + doc.name + ' has been sent via email. Thanks!',\n\t\t\t'Sales Order'\t\t: 'Sales Order ' + doc.name + ' has been created against '\n\t\t\t\t\t\t+ (doc.quotation_no ? ('Quote No:' + doc.quotation_no) : '')\n\t\t\t\t\t\t+ (doc.po_no ? (' for your PO: ' + doc.po_no) : ''),\n\t\t\t'Delivery Note'\t\t: 'Items has been delivered against delivery note: ' + doc.name\n\t\t\t\t\t\t+ (doc.po_no ? (' for your PO: ' + doc.po_no) : ''),\n\t\t\t'Sales Invoice': 'Invoice ' + doc.name + ' has been sent via email '\n\t\t\t\t\t\t+ (doc.po_no ? (' for your PO: ' + doc.po_no) : ''),\n\t\t\t'Material Request'\t\t\t: 'Material Request ' + doc.name + ' has been raised in the system',\n\t\t\t'Purchase Order'\t: 'Purchase Order ' + doc.name + ' has been sent via email',\n\t\t\t'Purchase Receipt'\t: 'Items has been received against purchase receipt: ' + doc.name\n\t\t}\n\n\t\tif (in_list(['Sales Order', 'Delivery Note', 'Sales Invoice'], doc.doctype))\n\t\t\tthis.show(doc.contact_person, 'Customer', doc.customer, '', default_msg[doc.doctype]);\n\t\telse if (doc.doctype === 'Quotation')\n\t\t\tthis.show(doc.contact_person, 'Customer', doc.party_name, '', default_msg[doc.doctype]);\n\t\telse if (in_list(['Purchase Order', 'Purchase Receipt'], doc.doctype))\n\t\t\tthis.show(doc.contact_person, 'Supplier', doc.supplier, '', default_msg[doc.doctype]);\n\t\telse if (doc.doctype == 'Lead')\n\t\t\tthis.show('', '', '', doc.mobile_no, default_msg[doc.doctype]);\n\t\telse if (doc.doctype == 'Opportunity')\n\t\t\tthis.show('', '', '', doc.contact_no, default_msg[doc.doctype]);\n\t\telse if (doc.doctype == 'Material Request')\n\t\t\tthis.show('', '', '', '', default_msg[doc.doctype]);\n\n\t};\n\n\tthis.get_contact_number = function(contact, ref_doctype, ref_name) {\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.core.doctype.sms_settings.sms_settings.get_contact_number\",\n\t\t\targs: {\n\t\t\t\tcontact_name: contact,\n\t\t\t\tref_doctype: ref_doctype,\n\t\t\t\tref_name: ref_name\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tif(r.exc) { frappe.msgprint(r.exc); return; }\n\t\t\t\tme.number = r.message;\n\t\t\t\tme.show_dialog();\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.show = function(contact, ref_doctype, ref_name, mobile_nos, message) {\n\t\tthis.message = message;\n\t\tif (mobile_nos) {\n\t\t\tme.number = mobile_nos;\n\t\t\tme.show_dialog();\n\t\t} else if (contact){\n\t\t\tthis.get_contact_number(contact, ref_doctype, ref_name)\n\t\t} else {\n\t\t\tme.show_dialog();\n\t\t}\n\t}\n\tthis.show_dialog = function() {\n\t\tif(!me.dialog)\n\t\t\tme.make_dialog();\n\t\tme.dialog.set_values({\n\t\t\t'message': me.message,\n\t\t\t'number': me.number\n\t\t})\n\t\tme.dialog.show();\n\t}\n\tthis.make_dialog = function() {\n\t\tvar d = new frappe.ui.Dialog({\n\t\t\ttitle: 'Send SMS',\n\t\t\twidth: 400,\n\t\t\tfields: [\n\t\t\t\t{fieldname:'number', fieldtype:'Data', label:'Mobile Number', reqd:1},\n\t\t\t\t{fieldname:'message', fieldtype:'Text', label:'Message', reqd:1},\n\t\t\t\t{fieldname:'send', fieldtype:'Button', label:'Send'}\n\t\t\t]\n\t\t})\n\t\td.fields_dict.send.input.onclick = function() {\n\t\t\tvar btn = d.fields_dict.send.input;\n\t\t\tvar v = me.dialog.get_values();\n\t\t\tif(v) {\n\t\t\t\t$(btn).set_working();\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"frappe.core.doctype.sms_settings.sms_settings.send_sms\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\treceiver_list: [v.number],\n\t\t\t\t\t\tmsg: v.message\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t$(btn).done_working();\n\t\t\t\t\t\tif(r.exc) {frappe.msgprint(r.exc); return; }\n\t\t\t\t\t\tme.dialog.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tthis.dialog = d;\n\t}\n\tthis.setup();\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nfrappe.provide(\"erpnext.utils\");\n\nerpnext.utils.get_party_details = function(frm, method, args, callback) {\n\tif (!method) {\n\t\tmethod = \"erpnext.accounts.party.get_party_details\";\n\t}\n\n\tif (args) {\n\t\tif (in_list(['Sales Invoice', 'Sales Order', 'Delivery Note'], frm.doc.doctype)) {\n\t\t\tif (frm.doc.company_address && (!args.company_address)) {\n\t\t\t\targs.company_address = frm.doc.company_address;\n\t\t\t}\n\t\t}\n\n\t\tif (in_list(['Purchase Invoice', 'Purchase Order', 'Purchase Receipt'], frm.doc.doctype)) {\n\t\t\tif (frm.doc.shipping_address && (!args.shipping_address)) {\n\t\t\t\targs.shipping_address = frm.doc.shipping_address;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!args) {\n\t\tif ((frm.doctype != \"Purchase Order\" && frm.doc.customer)\n\t\t\t|| (frm.doc.party_name && in_list(['Quotation', 'Opportunity'], frm.doc.doctype))) {\n\n\t\t\tlet party_type = \"Customer\";\n\t\t\tif (frm.doc.quotation_to && frm.doc.quotation_to === \"Lead\") {\n\t\t\t\tparty_type = \"Lead\";\n\t\t\t}\n\n\t\t\targs = {\n\t\t\t\tparty: frm.doc.customer || frm.doc.party_name,\n\t\t\t\tparty_type: party_type,\n\t\t\t\tprice_list: frm.doc.selling_price_list\n\t\t\t};\n\t\t} else if (frm.doc.supplier) {\n\t\t\targs = {\n\t\t\t\tparty: frm.doc.supplier,\n\t\t\t\tparty_type: \"Supplier\",\n\t\t\t\tbill_date: frm.doc.bill_date,\n\t\t\t\tprice_list: frm.doc.buying_price_list\n\t\t\t};\n\t\t}\n\n\t\tif (in_list(['Sales Invoice', 'Sales Order', 'Delivery Note'], frm.doc.doctype)) {\n\t\t\tif (!args) {\n\t\t\t\targs = {\n\t\t\t\t\tparty: frm.doc.customer || frm.doc.party_name,\n\t\t\t\t\tparty_type: 'Customer'\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (frm.doc.company_address && (!args.company_address)) {\n\t\t\t\targs.company_address = frm.doc.company_address;\n\t\t\t}\n\n\t\t\tif (frm.doc.shipping_address_name &&(!args.shipping_address_name)) {\n\t\t\t\targs.shipping_address_name = frm.doc.shipping_address_name;\n\t\t\t}\n\t\t}\n\n\t\tif (in_list(['Purchase Invoice', 'Purchase Order', 'Purchase Receipt'], frm.doc.doctype)) {\n\t\t\tif (!args) {\n\t\t\t\targs = {\n\t\t\t\t\tparty: frm.doc.supplier,\n\t\t\t\t\tparty_type: 'Supplier'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (frm.doc.shipping_address && (!args.shipping_address)) {\n\t\t\t\targs.shipping_address = frm.doc.shipping_address;\n\t\t\t}\n\t\t}\n\n\t\tif (args) {\n\t\t\targs.posting_date = frm.doc.posting_date || frm.doc.transaction_date;\n\t\t\targs.fetch_payment_terms_template = cint(!frm.doc.ignore_default_payment_terms_template);\n\t\t}\n\t}\n\tif (!args || !args.party) return;\n\n\tif (frappe.meta.get_docfield(frm.doc.doctype, \"taxes\")) {\n\t\tif (!erpnext.utils.validate_mandatory(frm, \"Posting / Transaction Date\",\n\t\t\targs.posting_date, args.party_type==\"Customer\" ? \"customer\": \"supplier\")) return;\n\t}\n\n\tif (!erpnext.utils.validate_mandatory(frm, \"Company\", frm.doc.company, args.party_type==\"Customer\" ? \"customer\": \"supplier\")) {\n\t\treturn;\n\t}\n\n\targs.currency = frm.doc.currency;\n\targs.company = frm.doc.company;\n\targs.doctype = frm.doc.doctype;\n\tfrappe.call({\n\t\tmethod: method,\n\t\targs: args,\n\t\tcallback: function(r) {\n\t\t\tif (r.message) {\n\t\t\t\tfrm.supplier_tds = r.message.supplier_tds;\n\t\t\t\tfrm.updating_party_details = true;\n\t\t\t\tfrappe.run_serially([\n\t\t\t\t\t() => frm.set_value(r.message),\n\t\t\t\t\t() => {\n\t\t\t\t\t\tfrm.updating_party_details = false;\n\t\t\t\t\t\tif (callback) callback();\n\t\t\t\t\t\tfrm.refresh();\n\t\t\t\t\t\terpnext.utils.add_item(frm);\n\t\t\t\t\t}\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t});\n}\n\nerpnext.utils.add_item = function(frm) {\n\tif (frm.is_new()) {\n\t\tvar prev_route = frappe.get_prev_route();\n\t\tif (prev_route[1]==='Item' && !(frm.doc.items && frm.doc.items.length)) {\n\t\t\t// add row\n\t\t\tvar item = frm.add_child('items');\n\t\t\tfrm.refresh_field('items');\n\n\t\t\t// set item\n\t\t\tfrappe.model.set_value(item.doctype, item.name, 'item_code', prev_route[2]);\n\t\t}\n\t}\n}\n\nerpnext.utils.get_address_display = function(frm, address_field, display_field, is_your_company_address) {\n\tif (frm.updating_party_details) return;\n\n\tif (!address_field) {\n\t\tif (frm.doctype != \"Purchase Order\" && frm.doc.customer) {\n\t\t\taddress_field = \"customer_address\";\n\t\t} else if (frm.doc.supplier) {\n\t\t\taddress_field = \"supplier_address\";\n\t\t} else return;\n\t}\n\n\tif (!display_field) display_field = \"address_display\";\n\tif (frm.doc[address_field]) {\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.contacts.doctype.address.address.get_address_display\",\n\t\t\targs: {\"address_dict\": frm.doc[address_field] },\n\t\t\tcallback: function(r) {\n\t\t\t\tif (r.message) {\n\t\t\t\t\tfrm.set_value(display_field, r.message)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t} else {\n\t\tfrm.set_value(display_field, '');\n\t}\n};\n\nerpnext.utils.set_taxes_from_address = function(frm, triggered_from_field, billing_address_field, shipping_address_field) {\n\tif (frm.updating_party_details) return;\n\n\tif (frappe.meta.get_docfield(frm.doc.doctype, \"taxes\")) {\n\t\tif (!erpnext.utils.validate_mandatory(frm, \"Lead / Customer / Supplier\",\n\t\t\tfrm.doc.customer || frm.doc.supplier || frm.doc.lead || frm.doc.party_name, triggered_from_field)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!erpnext.utils.validate_mandatory(frm, \"Posting / Transaction Date\",\n\t\t\tfrm.doc.posting_date || frm.doc.transaction_date, triggered_from_field)) {\n\t\t\treturn;\n\t\t}\n\t} else {\n\t\treturn;\n\t}\n\n\tfrappe.call({\n\t\tmethod: \"erpnext.accounts.party.get_address_tax_category\",\n\t\targs: {\n\t\t\t\"tax_category\": frm.doc.tax_category,\n\t\t\t\"billing_address\": frm.doc[billing_address_field],\n\t\t\t\"shipping_address\": frm.doc[shipping_address_field]\n\t\t},\n\t\tcallback: function(r) {\n\t\t\tif (!r.exc){\n\t\t\t\tif (frm.doc.tax_category != r.message) {\n\t\t\t\t\tfrm.set_value(\"tax_category\", r.message);\n\t\t\t\t} else {\n\t\t\t\t\terpnext.utils.set_taxes(frm, triggered_from_field);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n\nerpnext.utils.set_taxes = function(frm, triggered_from_field) {\n\tif (frappe.meta.get_docfield(frm.doc.doctype, \"taxes\")) {\n\t\tif (!erpnext.utils.validate_mandatory(frm, \"Company\", frm.doc.company, triggered_from_field)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!erpnext.utils.validate_mandatory(frm, \"Lead / Customer / Supplier\",\n\t\t\tfrm.doc.customer || frm.doc.supplier || frm.doc.lead || frm.doc.party_name, triggered_from_field)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!erpnext.utils.validate_mandatory(frm, \"Posting / Transaction Date\",\n\t\t\tfrm.doc.posting_date || frm.doc.transaction_date, triggered_from_field)) {\n\t\t\treturn;\n\t\t}\n\t} else {\n\t\treturn;\n\t}\n\n\tvar party_type, party;\n\tif (frm.doc.lead) {\n\t\tparty_type = 'Lead';\n\t\tparty = frm.doc.lead;\n\t} else if (frm.doc.customer) {\n\t\tparty_type = 'Customer';\n\t\tparty = frm.doc.customer;\n\t} else if (frm.doc.supplier) {\n\t\tparty_type = 'Supplier';\n\t\tparty = frm.doc.supplier;\n\t} else if (frm.doc.quotation_to){\n\t\tparty_type = frm.doc.quotation_to;\n\t\tparty = frm.doc.party_name;\n\t}\n\n\tif (!frm.doc.company) {\n\t\tfrappe.throw(__(\"Kindly select the company first\"));\n\t}\n\n\tfrappe.call({\n\t\tmethod: \"erpnext.accounts.party.set_taxes\",\n\t\targs: {\n\t\t\t\"party\": party,\n\t\t\t\"party_type\": party_type,\n\t\t\t\"posting_date\": frm.doc.posting_date || frm.doc.transaction_date,\n\t\t\t\"company\": frm.doc.company,\n\t\t\t\"customer_group\": frm.doc.customer_group,\n\t\t\t\"supplier_group\": frm.doc.supplier_group,\n\t\t\t\"tax_category\": frm.doc.tax_category,\n\t\t\t\"billing_address\": ((frm.doc.customer || frm.doc.lead) ? (frm.doc.customer_address) : (frm.doc.supplier_address)),\n\t\t\t\"shipping_address\": frm.doc.shipping_address_name\n\t\t},\n\t\tcallback: function(r) {\n\t\t\tif (r.message){\n\t\t\t\tfrm.set_value(\"taxes_and_charges\", r.message)\n\t\t\t}\n\t\t}\n\t});\n};\n\nerpnext.utils.get_contact_details = function(frm) {\n\tif (frm.updating_party_details) return;\n\n\tif (frm.doc[\"contact_person\"]) {\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.contacts.doctype.contact.contact.get_contact_details\",\n\t\t\targs: {contact: frm.doc.contact_person },\n\t\t\tcallback: function(r) {\n\t\t\t\tif (r.message)\n\t\t\t\t\tfrm.set_value(r.message);\n\t\t\t}\n\t\t})\n\t}\n}\n\nerpnext.utils.validate_mandatory = function(frm, label, value, trigger_on) {\n\tif (!value) {\n\t\tfrm.doc[trigger_on] = \"\";\n\t\trefresh_field(trigger_on);\n\t\tfrappe.throw({message:__(\"Please enter {0} first\", [label]), title:__(\"Mandatory\")});\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nerpnext.utils.get_shipping_address = function(frm, callback) {\n\tif (frm.doc.company) {\n\t\tif ((frm.doc.inter_company_order_reference || frm.doc.internal_invoice_reference ||\n\t\t\tfrm.doc.internal_order_reference)) {\n\t\t\tif (callback) {\n\t\t\t\treturn callback();\n\t\t\t}\n\t\t}\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext.accounts.custom.address.get_shipping_address\",\n\t\t\targs: {\n\t\t\t\tcompany: frm.doc.company,\n\t\t\t\taddress: frm.doc.shipping_address\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tif (r.message) {\n\t\t\t\t\tfrm.set_value(\"shipping_address\", r.message[0]) //Address title or name\n\t\t\t\t\tfrm.set_value(\"shipping_address_display\", r.message[1]) //Address to be displayed on the page\n\t\t\t\t}\n\n\t\t\t\tif (callback){\n\t\t\t\t\treturn callback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else {\n\t\tfrappe.msgprint(__(\"Select company first\"));\n\t}\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nfrappe.provide(\"erpnext.stock\");\n\nerpnext.stock.StockController = frappe.ui.form.Controller.extend({\n\tonload: function() {\n\t\t// warehouse query if company\n\t\tif (this.frm.fields_dict.company) {\n\t\t\tthis.setup_warehouse_query();\n\t\t}\n\t},\n\n\tsetup_warehouse_query: function() {\n\t\tvar me = this;\n\t\terpnext.queries.setup_queries(this.frm, \"Warehouse\", function() {\n\t\t\treturn erpnext.queries.warehouse(me.frm.doc);\n\t\t});\n\t},\n\n\tsetup_posting_date_time_check: function() {\n\t\t// make posting date default and read only unless explictly checked\n\t\tfrappe.ui.form.on(this.frm.doctype, 'set_posting_date_and_time_read_only', function(frm) {\n\t\t\tif(frm.doc.docstatus == 0 && frm.doc.set_posting_time) {\n\t\t\t\tfrm.set_df_property('posting_date', 'read_only', 0);\n\t\t\t\tfrm.set_df_property('posting_time', 'read_only', 0);\n\t\t\t} else {\n\t\t\t\tfrm.set_df_property('posting_date', 'read_only', 1);\n\t\t\t\tfrm.set_df_property('posting_time', 'read_only', 1);\n\t\t\t}\n\t\t})\n\n\t\tfrappe.ui.form.on(this.frm.doctype, 'set_posting_time', function(frm) {\n\t\t\tfrm.trigger('set_posting_date_and_time_read_only');\n\t\t});\n\n\t\tfrappe.ui.form.on(this.frm.doctype, 'refresh', function(frm) {\n\t\t\t// set default posting date / time\n\t\t\tif(frm.doc.docstatus==0) {\n\t\t\t\tif(!frm.doc.posting_date) {\n\t\t\t\t\tfrm.set_value('posting_date', frappe.datetime.nowdate());\n\t\t\t\t}\n\t\t\t\tif(!frm.doc.posting_time) {\n\t\t\t\t\tfrm.set_value('posting_time', frappe.datetime.now_time());\n\t\t\t\t}\n\t\t\t\tfrm.trigger('set_posting_date_and_time_read_only');\n\t\t\t}\n\t\t});\n\t},\n\n\tshow_stock_ledger: function() {\n\t\tvar me = this;\n\t\tif(this.frm.doc.docstatus > 0) {\n\t\t\tcur_frm.add_custom_button(__(\"Stock Ledger\"), function() {\n\t\t\t\tfrappe.route_options = {\n\t\t\t\t\tvoucher_no: me.frm.doc.name,\n\t\t\t\t\tfrom_date: me.frm.doc.posting_date,\n\t\t\t\t\tto_date: moment(me.frm.doc.modified).format('YYYY-MM-DD'),\n\t\t\t\t\tcompany: me.frm.doc.company,\n\t\t\t\t\tshow_cancelled_entries: me.frm.doc.docstatus === 2\n\t\t\t\t};\n\t\t\t\tfrappe.set_route(\"query-report\", \"Stock Ledger\");\n\t\t\t}, __(\"View\"));\n\t\t}\n\n\t},\n\n\tshow_general_ledger: function() {\n\t\tvar me = this;\n\t\tif(this.frm.doc.docstatus > 0) {\n\t\t\tcur_frm.add_custom_button(__('Accounting Ledger'), function() {\n\t\t\t\tfrappe.route_options = {\n\t\t\t\t\tvoucher_no: me.frm.doc.name,\n\t\t\t\t\tfrom_date: me.frm.doc.posting_date,\n\t\t\t\t\tto_date: moment(me.frm.doc.modified).format('YYYY-MM-DD'),\n\t\t\t\t\tcompany: me.frm.doc.company,\n\t\t\t\t\tgroup_by: \"Group by Voucher (Consolidated)\",\n\t\t\t\t\tshow_cancelled_entries: me.frm.doc.docstatus === 2\n\t\t\t\t};\n\t\t\t\tfrappe.set_route(\"query-report\", \"General Ledger\");\n\t\t\t}, __(\"View\"));\n\t\t}\n\t}\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nerpnext.payments = erpnext.stock.StockController.extend({\n\tmake_payment: function() {\n\t\tvar me = this;\n\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: 'Payment'\n\t\t});\n\n\t\tthis.dialog.show();\n\t\tthis.$body = this.dialog.body;\n\t\tthis.set_payment_primary_action();\n\t\tthis.make_keyboard();\n\t\tthis.select_text();\n\t},\n\n\tselect_text() {\n\t\t$(this.$body).find('.form-control').click(function() {\n\t\t\t$(this).select();\n\t\t});\n\t},\n\n\tset_payment_primary_action: function() {\n\t\tvar me = this;\n\n\t\tthis.dialog.set_primary_action(__(\"Submit\"), function() {\n\t\t\t// Allow no ZERO payment\n\t\t\t$.each(me.frm.doc.payments, function (index, data) {\n\t\t\t\tif (data.amount != 0) {\n\t\t\t\t\tme.dialog.hide();\n\t\t\t\t\tme.submit_invoice();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t},\n\n\tmake_keyboard: function() {\n\t\tvar me = this;\n\t\t$(this.$body).empty();\n\t\t$(this.$body).html(frappe.render_template('pos_payment', this.frm.doc))\n\t\tthis.show_payment_details();\n\t\tthis.bind_keyboard_event();\n\t\tthis.clear_amount();\n\t},\n\n\tmake_multimode_payment: function() {\n\t\tvar me = this;\n\n\t\tif (this.frm.doc.change_amount > 0) {\n\t\t\tme.payment_val = me.doc.outstanding_amount;\n\t\t}\n\n\t\tthis.payments = frappe.model.add_child(this.frm.doc, 'Multi Mode Payment', \"payments\");\n\t\tthis.payments.mode_of_payment = this.dialog.fields_dict.mode_of_payment.get_value();\n\t\tthis.payments.amount = flt(this.payment_val);\n\t},\n\n\tshow_payment_details: function() {\n\t\tvar me = this;\n\t\tvar multimode_payments = $(this.$body).find('.multimode-payments').empty();\n\t\tif (this.frm.doc.payments.length) {\n\t\t\t$.each(this.frm.doc.payments, function(index, data) {\n\t\t\t\t$(frappe.render_template('payment_details', {\n\t\t\t\t\tmode_of_payment: data.mode_of_payment,\n\t\t\t\t\tamount: data.amount,\n\t\t\t\t\tidx: data.idx,\n\t\t\t\t\tcurrency: me.frm.doc.currency,\n\t\t\t\t\ttype: data.type\n\t\t\t\t})).appendTo(multimode_payments)\n\n\t\t\t\tif (data.type == 'Cash' && data.amount == me.frm.doc.paid_amount) {\n\t\t\t\t\tme.idx = data.idx;\n\t\t\t\t\tme.selected_mode = $(me.$body).find(repl(\"input[idx='%(idx)s']\",{'idx': me.idx}));\n\t\t\t\t\tme.highlight_selected_row();\n\t\t\t\t\tme.bind_amount_change_event();\n\t\t\t\t}\n\t\t\t})\n\t\t}else{\n\t\t\t$(\"<p>No payment mode selected in pos profile</p>\").appendTo(multimode_payments)\n\t\t}\n\t},\n\n\tset_outstanding_amount: function() {\n\t\tthis.selected_mode = $(this.$body).find(repl(\"input[idx='%(idx)s']\",{'idx': this.idx}));\n\t\tthis.highlight_selected_row();\n\t\tthis.payment_val = 0.0;\n\t\tif (this.frm.doc.outstanding_amount > 0 && flt(this.selected_mode.val()) == 0.0) {\n\t\t\t//When user first time click on row\n\t\t\tthis.payment_val = flt(this.frm.doc.outstanding_amount / this.frm.doc.conversion_rate, precision(\"outstanding_amount\"))\n\t\t\tthis.selected_mode.val(format_currency(this.payment_val, this.frm.doc.currency));\n\t\t\tthis.update_payment_amount();\n\t\t} else if (flt(this.selected_mode.val()) > 0) {\n\t\t\t//If user click on existing row which has value\n\t\t\tthis.payment_val = flt(this.selected_mode.val());\n\t\t}\n\t\tthis.selected_mode.select()\n\t\tthis.bind_amount_change_event();\n\t},\n\n\tbind_keyboard_event() {\n\t\tthis.payment_val = '';\n\t\tthis.bind_form_control_event();\n\t\tthis.bind_numeric_keys_event();\n\t},\n\n\tbind_form_control_event: function() {\n\t\tvar me = this;\n\t\t$(this.$body).find('.pos-payment-row').click(function() {\n\t\t\tme.idx = $(this).attr(\"idx\");\n\t\t\tme.set_outstanding_amount();\n\t\t});\n\n\t\t$(this.$body).find('.form-control').click(function() {\n\t\t\tme.idx = $(this).attr(\"idx\");\n\t\t\tme.set_outstanding_amount();\n\t\t\tme.update_paid_amount(true);\n\t\t});\n\n\t\t$(this.$body).find('.write_off_amount').change(function() {\n\t\t\tme.write_off_amount(flt($(this).val()), precision(\"write_off_amount\"));\n\t\t});\n\n\t\t$(this.$body).find('.change_amount').change(function() {\n\t\t\tme.change_amount(flt($(this).val()), precision(\"change_amount\"));\n\t\t});\n\t},\n\n\thighlight_selected_row() {\n\t\tvar selected_row = $(this.$body).find(repl(\".pos-payment-row[idx='%(idx)s']\", {'idx': this.idx}));\n\t\t$(this.$body).find('.pos-payment-row').removeClass('selected-payment-mode');\n\t\tselected_row.addClass('selected-payment-mode');\n\t\t$(this.$body).find('.amount').attr('disabled', true);\n\t\tthis.selected_mode.attr('disabled', false);\n\t},\n\n\tbind_numeric_keys_event: function() {\n\t\tvar me = this;\n\t\t$(this.$body).find('.pos-keyboard-key').click(function(){\n\t\t\tme.payment_val += $(this).text();\n\t\t\tme.selected_mode.val(format_currency(me.payment_val, me.frm.doc.currency));\n\t\t\tme.idx = me.selected_mode.attr(\"idx\");\n\t\t\tme.update_paid_amount();\n\t\t});\n\n\t\t$(this.$body).find('.delete-btn').click(function() {\n\t\t\tme.payment_val =  cstr(flt(me.selected_mode.val())).slice(0, -1);\n\t\t\tme.selected_mode.val(format_currency(me.payment_val, me.frm.doc.currency));\n\t\t\tme.idx = me.selected_mode.attr(\"idx\");\n\t\t\tme.update_paid_amount();\n\t\t})\n\n\t},\n\n\tbind_amount_change_event() {\n\t\tvar me = this;\n\t\tthis.selected_mode.change(function() {\n\t\t\tme.payment_val =  flt($(this).val()) || 0.0;\n\t\t\tme.selected_mode.val(format_currency(me.payment_val, me.frm.doc.currency));\n\t\t\tme.idx = me.selected_mode.attr(\"idx\");\n\t\t\tme.update_payment_amount();\n\t\t});\n\t},\n\n\tclear_amount: function() {\n\t\tvar me = this;\n\t\t$(this.$body).find('.clr').click(function(e) {\n\t\t\te.stopPropagation();\n\t\t\tme.idx = $(this).attr(\"idx\");\n\t\t\tme.selected_mode = $(me.$body).find(repl(\"input[idx='%(idx)s']\",{'idx': me.idx}));\n\t\t\tme.payment_val = 0.0;\n\t\t\tme.selected_mode.val(0.0);\n\t\t\tme.highlight_selected_row();\n\t\t\tme.update_payment_amount();\n\t\t});\n\t},\n\n\twrite_off_amount(write_off_amount) {\n\t\tthis.frm.doc.write_off_amount = flt(write_off_amount, precision(\"write_off_amount\"));\n\t\tthis.frm.doc.base_write_off_amount = flt(this.frm.doc.write_off_amount * this.frm.doc.conversion_rate,\n\t\t\tprecision(\"base_write_off_amount\"));\n\t\tthis.calculate_outstanding_amount(false);\n\t\tthis.show_amounts();\n\t},\n\n\tchange_amount: function(change_amount) {\n\t\tvar me = this;\n\n\t\tthis.frm.doc.change_amount = flt(change_amount, precision(\"change_amount\"));\n\t\tthis.calculate_write_off_amount();\n\t\tthis.show_amounts();\n\t},\n\n\tupdate_paid_amount: function(update_write_off) {\n\t\tvar me = this;\n\t\tif (in_list(['change_amount', 'write_off_amount'], this.idx)) {\n\t\t\tvar value = me.selected_mode.val();\n\t\t\tif (me.idx == 'change_amount') {\n\t\t\t\tme.change_amount(value);\n\t\t\t} else {\n\t\t\t\tif(flt(value) == 0 && update_write_off && me.frm.doc.outstanding_amount > 0) {\n\t\t\t\t\tvalue = flt(me.frm.doc.outstanding_amount / me.frm.doc.conversion_rate, precision(me.idx));\n\t\t\t\t}\n\t\t\t\tme.write_off_amount(value);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.update_payment_amount();\n\t\t}\n\t},\n\n\tupdate_payment_amount: function() {\n\t\tvar me = this;\n\n\t\t$.each(this.frm.doc.payments, function(index, data) {\n\t\t\tif (cint(me.idx) == cint(data.idx)) {\n\t\t\t\tdata.amount = flt(me.selected_mode.val(), 2);\n\t\t\t}\n\t\t})\n\n\t\tthis.calculate_outstanding_amount(false);\n\t\tthis.show_amounts();\n\t},\n\n\tshow_amounts: function() {\n\t\tvar me = this;\n\t\t$(this.$body).find(\".write_off_amount\").val(format_currency(this.frm.doc.write_off_amount, this.frm.doc.currency));\n\t\t$(this.$body).find('.paid_amount').text(format_currency(this.frm.doc.paid_amount, this.frm.doc.currency));\n\t\t$(this.$body).find('.change_amount').val(format_currency(this.frm.doc.change_amount, this.frm.doc.currency));\n\t\t$(this.$body).find('.outstanding_amount').text(format_currency(this.frm.doc.outstanding_amount, frappe.get_doc(\":Company\", this.frm.doc.company).default_currency));\n\t\tthis.update_invoice();\n\t}\n})\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nerpnext.taxes_and_totals = erpnext.payments.extend({\n\tsetup: function() {\n\t\tthis.fetch_round_off_accounts();\n\t},\n\n\tapply_pricing_rule_on_item: function(item) {\n\t\tlet effective_item_rate = item.price_list_rate;\n\t\tlet item_rate = item.rate;\n\t\tif (in_list([\"Sales Order\", \"Quotation\"], item.parenttype) && item.blanket_order_rate) {\n\t\t\teffective_item_rate = item.blanket_order_rate;\n\t\t}\n\t\tif (item.margin_type == \"Percentage\") {\n\t\t\titem.rate_with_margin = flt(effective_item_rate)\n\t\t\t\t+ flt(effective_item_rate) * ( flt(item.margin_rate_or_amount) / 100);\n\t\t} else {\n\t\t\titem.rate_with_margin = flt(effective_item_rate) + flt(item.margin_rate_or_amount);\n\t\t}\n\t\titem.base_rate_with_margin = flt(item.rate_with_margin) * flt(this.frm.doc.conversion_rate);\n\n\t\titem_rate = flt(item.rate_with_margin , precision(\"rate\", item));\n\n\t\tif (item.discount_percentage) {\n\t\t\titem.discount_amount = flt(item.rate_with_margin) * flt(item.discount_percentage) / 100;\n\t\t}\n\n\t\tif (item.discount_amount) {\n\t\t\titem_rate = flt((item.rate_with_margin) - (item.discount_amount), precision('rate', item));\n\t\t\titem.discount_percentage = 100 * flt(item.discount_amount) / flt(item.rate_with_margin);\n\t\t}\n\n\t\tfrappe.model.set_value(item.doctype, item.name, \"rate\", item_rate);\n\t},\n\n\tcalculate_taxes_and_totals: function(update_paid_amount) {\n\t\tthis.discount_amount_applied = false;\n\t\tthis._calculate_taxes_and_totals();\n\t\tthis.calculate_discount_amount();\n\n\t\tthis.calculate_shipping_charges();\n\n\t\t// Advance calculation applicable to Sales /Purchase Invoice\n\t\tif(in_list([\"Sales Invoice\", \"POS Invoice\", \"Purchase Invoice\"], this.frm.doc.doctype)\n\t\t\t&& this.frm.doc.docstatus < 2 && !this.frm.doc.is_return) {\n\t\t\tthis.calculate_total_advance(update_paid_amount);\n\t\t}\n\n\t\tif (in_list([\"Sales Invoice\", \"POS Invoice\"], this.frm.doc.doctype) && this.frm.doc.is_pos &&\n\t\t\tthis.frm.doc.is_return) {\n\t\t\tif (this.frm.doc.doctype == \"Sales Invoice\") {\n\t\t\t\tthis.set_total_amount_to_default_mop();\n\t\t\t}\n\t\t\tthis.calculate_paid_amount();\n\t\t}\n\n\t\t// Sales person's commission\n\t\tif(in_list([\"Quotation\", \"Sales Order\", \"Delivery Note\", \"Sales Invoice\"], this.frm.doc.doctype)) {\n\t\t\tthis.calculate_commission();\n\t\t\tthis.calculate_contribution();\n\t\t}\n\n\t\t// Update paid amount on return/debit note creation\n\t\tif(this.frm.doc.doctype === \"Purchase Invoice\" && this.frm.doc.is_return\n\t\t\t&& (this.frm.doc.grand_total > this.frm.doc.paid_amount)) {\n\t\t\tthis.frm.doc.paid_amount = flt(this.frm.doc.grand_total, precision(\"grand_total\"));\n\t\t}\n\n\t\tthis.frm.refresh_fields();\n\t},\n\n\tcalculate_discount_amount: function() {\n\t\tif (frappe.meta.get_docfield(this.frm.doc.doctype, \"discount_amount\")) {\n\t\t\tthis.set_discount_amount();\n\t\t\tthis.apply_discount_amount();\n\t\t}\n\t},\n\n\t_calculate_taxes_and_totals: function() {\n\t\tthis.validate_conversion_rate();\n\t\tthis.calculate_item_values();\n\t\tthis.initialize_taxes();\n\t\tthis.determine_exclusive_rate();\n\t\tthis.calculate_net_total();\n\t\tthis.calculate_taxes();\n\t\tthis.manipulate_grand_total_for_inclusive_tax();\n\t\tthis.calculate_totals();\n\t\tthis._cleanup();\n\t},\n\n\tvalidate_conversion_rate: function() {\n\t\tthis.frm.doc.conversion_rate = flt(this.frm.doc.conversion_rate, (cur_frm) ? precision(\"conversion_rate\") : 9);\n\t\tvar conversion_rate_label = frappe.meta.get_label(this.frm.doc.doctype, \"conversion_rate\",\n\t\t\tthis.frm.doc.name);\n\t\tvar company_currency = this.get_company_currency();\n\n\t\tif(!this.frm.doc.conversion_rate) {\n\t\t\tif(this.frm.doc.currency == company_currency) {\n\t\t\t\tthis.frm.set_value(\"conversion_rate\", 1);\n\t\t\t} else {\n\t\t\t\tconst subs =  [conversion_rate_label, this.frm.doc.currency, company_currency];\n\t\t\t\tconst err_message = __('{0} is mandatory. Maybe Currency Exchange record is not created for {1} to {2}', subs);\n\t\t\t\tfrappe.throw(err_message);\n\t\t\t}\n\t\t}\n\t},\n\n\tcalculate_item_values: function() {\n\t\tlet me = this;\n\t\tif (!this.discount_amount_applied) {\n\t\t\t$.each(this.frm.doc[\"items\"] || [], function(i, item) {\n\t\t\t\tfrappe.model.round_floats_in(item);\n\t\t\t\titem.net_rate = item.rate;\n\n\t\t\t\tif ((!item.qty) && me.frm.doc.is_return) {\n\t\t\t\t\titem.amount = flt(item.rate * -1, precision(\"amount\", item));\n\t\t\t\t} else if ((!item.qty) && me.frm.doc.is_debit_note) {\n\t\t\t\t\titem.amount = flt(item.rate, precision(\"amount\", item));\n\t\t\t\t} else {\n\t\t\t\t\titem.amount = flt(item.rate * item.qty, precision(\"amount\", item));\n\t\t\t\t}\n\n\t\t\t\titem.net_amount = item.amount;\n\t\t\t\titem.item_tax_amount = 0.0;\n\t\t\t\titem.total_weight = flt(item.weight_per_unit * item.stock_qty);\n\n\t\t\t\tme.set_in_company_currency(item, [\"price_list_rate\", \"rate\", \"amount\", \"net_rate\", \"net_amount\"]);\n\t\t\t});\n\t\t}\n\t},\n\n\tset_in_company_currency: function(doc, fields) {\n\t\tvar me = this;\n\t\t$.each(fields, function(i, f) {\n\t\t\tdoc[\"base_\"+f] = flt(flt(doc[f], precision(f, doc)) * me.frm.doc.conversion_rate, precision(\"base_\" + f, doc));\n\t\t});\n\t},\n\n\tinitialize_taxes: function() {\n\t\tvar me = this;\n\n\t\t$.each(this.frm.doc[\"taxes\"] || [], function(i, tax) {\n\t\t\tif (!tax.dont_recompute_tax) {\n\t\t\t\ttax.item_wise_tax_detail = {};\n\t\t\t}\n\t\t\tvar tax_fields = [\"total\", \"tax_amount_after_discount_amount\",\n\t\t\t\t\"tax_amount_for_current_item\", \"grand_total_for_current_item\",\n\t\t\t\t\"tax_fraction_for_current_item\", \"grand_total_fraction_for_current_item\"];\n\n\t\t\tif (cstr(tax.charge_type) != \"Actual\" &&\n\t\t\t\t!(me.discount_amount_applied && me.frm.doc.apply_discount_on==\"Grand Total\")) {\n\t\t\t\ttax_fields.push(\"tax_amount\");\n\t\t\t}\n\n\t\t\t$.each(tax_fields, function(i, fieldname) { tax[fieldname] = 0.0; });\n\n\t\t\tif (!this.discount_amount_applied && cur_frm) {\n\t\t\t\tcur_frm.cscript.validate_taxes_and_charges(tax.doctype, tax.name);\n\t\t\t\tme.validate_inclusive_tax(tax);\n\t\t\t}\n\t\t\tfrappe.model.round_floats_in(tax);\n\t\t});\n\t},\n\n\tfetch_round_off_accounts: function() {\n\t\tlet me = this;\n\t\tfrappe.flags.round_off_applicable_accounts = [];\n\n\t\tif (me.frm.doc.company) {\n\t\t\treturn frappe.call({\n\t\t\t\t\"method\": \"erpnext.controllers.taxes_and_totals.get_round_off_applicable_accounts\",\n\t\t\t\t\"args\": {\n\t\t\t\t\t\"company\": me.frm.doc.company,\n\t\t\t\t\t\"account_list\": frappe.flags.round_off_applicable_accounts\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tfrappe.flags.round_off_applicable_accounts.push(...r.message);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tdetermine_exclusive_rate: function() {\n\t\tvar me = this;\n\n\t\tvar has_inclusive_tax = false;\n\t\t$.each(me.frm.doc[\"taxes\"] || [], function(i, row) {\n\t\t\tif(cint(row.included_in_print_rate)) has_inclusive_tax = true;\n\t\t});\n\t\tif(has_inclusive_tax==false) return;\n\n\t\t$.each(me.frm.doc[\"items\"] || [], function(n, item) {\n\t\t\tvar item_tax_map = me._load_item_tax_rate(item.item_tax_rate);\n\t\t\tvar cumulated_tax_fraction = 0.0;\n\t\t\tvar total_inclusive_tax_amount_per_qty = 0;\n\t\t\t$.each(me.frm.doc[\"taxes\"] || [], function(i, tax) {\n\t\t\t\tvar current_tax_fraction = me.get_current_tax_fraction(tax, item_tax_map);\n\t\t\t\ttax.tax_fraction_for_current_item = current_tax_fraction[0];\n\t\t\t\tvar inclusive_tax_amount_per_qty = current_tax_fraction[1];\n\n\t\t\t\tif(i==0) {\n\t\t\t\t\ttax.grand_total_fraction_for_current_item = 1 + tax.tax_fraction_for_current_item;\n\t\t\t\t} else {\n\t\t\t\t\ttax.grand_total_fraction_for_current_item =\n\t\t\t\t\t\tme.frm.doc[\"taxes\"][i-1].grand_total_fraction_for_current_item +\n\t\t\t\t\t\ttax.tax_fraction_for_current_item;\n\t\t\t\t}\n\n\t\t\t\tcumulated_tax_fraction += tax.tax_fraction_for_current_item;\n\t\t\t\ttotal_inclusive_tax_amount_per_qty += inclusive_tax_amount_per_qty * flt(item.qty);\n\t\t\t});\n\n\t\t\tif(!me.discount_amount_applied && item.qty && (total_inclusive_tax_amount_per_qty || cumulated_tax_fraction)) {\n\t\t\t\tvar amount = flt(item.amount) - total_inclusive_tax_amount_per_qty;\n\t\t\t\titem.net_amount = flt(amount / (1 + cumulated_tax_fraction));\n\t\t\t\titem.net_rate = item.qty ? flt(item.net_amount / item.qty, precision(\"net_rate\", item)) : 0;\n\n\t\t\t\tme.set_in_company_currency(item, [\"net_rate\", \"net_amount\"]);\n\t\t\t}\n\t\t});\n\t},\n\n\tget_current_tax_fraction: function(tax, item_tax_map) {\n\t\t// Get tax fraction for calculating tax exclusive amount\n\t\t// from tax inclusive amount\n\t\tvar current_tax_fraction = 0.0;\n\t\tvar inclusive_tax_amount_per_qty = 0;\n\n\t\tif(cint(tax.included_in_print_rate)) {\n\t\t\tvar tax_rate = this._get_tax_rate(tax, item_tax_map);\n\n\t\t\tif(tax.charge_type == \"On Net Total\") {\n\t\t\t\tcurrent_tax_fraction = (tax_rate / 100.0);\n\n\t\t\t} else if(tax.charge_type == \"On Previous Row Amount\") {\n\t\t\t\tcurrent_tax_fraction = (tax_rate / 100.0) *\n\t\t\t\t\tthis.frm.doc[\"taxes\"][cint(tax.row_id) - 1].tax_fraction_for_current_item;\n\n\t\t\t} else if(tax.charge_type == \"On Previous Row Total\") {\n\t\t\t\tcurrent_tax_fraction = (tax_rate / 100.0) *\n\t\t\t\t\tthis.frm.doc[\"taxes\"][cint(tax.row_id) - 1].grand_total_fraction_for_current_item;\n\t\t\t} else if (tax.charge_type == \"On Item Quantity\") {\n\t\t\t\tinclusive_tax_amount_per_qty = flt(tax_rate);\n\t\t\t}\n\t\t}\n\n\t\tif(tax.add_deduct_tax && tax.add_deduct_tax == \"Deduct\") {\n\t\t\tcurrent_tax_fraction *= -1;\n\t\t\tinclusive_tax_amount_per_qty *= -1;\n\t\t}\n\t\treturn [current_tax_fraction, inclusive_tax_amount_per_qty];\n\t},\n\n\t_get_tax_rate: function(tax, item_tax_map) {\n\t\treturn (Object.keys(item_tax_map).indexOf(tax.account_head) != -1) ?\n\t\t\tflt(item_tax_map[tax.account_head], precision(\"rate\", tax)) : tax.rate;\n\t},\n\n\tcalculate_net_total: function() {\n\t\tvar me = this;\n\t\tthis.frm.doc.total_qty = this.frm.doc.total = this.frm.doc.base_total = this.frm.doc.net_total = this.frm.doc.base_net_total = 0.0;\n\n\t\t$.each(this.frm.doc[\"items\"] || [], function(i, item) {\n\t\t\tme.frm.doc.total += item.amount;\n\t\t\tme.frm.doc.total_qty += item.qty;\n\t\t\tme.frm.doc.base_total += item.base_amount;\n\t\t\tme.frm.doc.net_total += item.net_amount;\n\t\t\tme.frm.doc.base_net_total += item.base_net_amount;\n\t\t\t});\n\t},\n\n\tcalculate_shipping_charges: function() {\n\t\tfrappe.model.round_floats_in(this.frm.doc, [\"total\", \"base_total\", \"net_total\", \"base_net_total\"]);\n\t\tif (frappe.meta.get_docfield(this.frm.doc.doctype, \"shipping_rule\", this.frm.doc.name)) {\n\t\t\tthis.shipping_rule();\n\t\t\tthis._calculate_taxes_and_totals();\n\t\t}\n\t},\n\n\tadd_taxes_from_item_tax_template: function(item_tax_map) {\n\t\tlet me = this;\n\n\t\tif (item_tax_map && cint(frappe.defaults.get_default(\"add_taxes_from_item_tax_template\"))) {\n\t\t\tif (typeof (item_tax_map) == \"string\") {\n\t\t\t\titem_tax_map = JSON.parse(item_tax_map);\n\t\t\t}\n\n\t\t\t$.each(item_tax_map, function(tax, rate) {\n\t\t\t\tlet found = (me.frm.doc.taxes || []).find(d => d.account_head === tax);\n\t\t\t\tif (!found) {\n\t\t\t\t\tlet child = frappe.model.add_child(me.frm.doc, \"taxes\");\n\t\t\t\t\tchild.charge_type = \"On Net Total\";\n\t\t\t\t\tchild.account_head = tax;\n\t\t\t\t\tchild.rate = 0;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tcalculate_taxes: function() {\n\t\tvar me = this;\n\t\tthis.frm.doc.rounding_adjustment = 0;\n\t\tvar actual_tax_dict = {};\n\n\t\t// maintain actual tax rate based on idx\n\t\t$.each(this.frm.doc[\"taxes\"] || [], function(i, tax) {\n\t\t\tif (tax.charge_type == \"Actual\") {\n\t\t\t\tactual_tax_dict[tax.idx] = flt(tax.tax_amount, precision(\"tax_amount\", tax));\n\t\t\t}\n\t\t});\n\n\t\t$.each(this.frm.doc[\"items\"] || [], function(n, item) {\n\t\t\tvar item_tax_map = me._load_item_tax_rate(item.item_tax_rate);\n\t\t\t$.each(me.frm.doc[\"taxes\"] || [], function(i, tax) {\n\t\t\t\t// tax_amount represents the amount of tax for the current step\n\t\t\t\tvar current_tax_amount = me.get_current_tax_amount(item, tax, item_tax_map);\n\n\t\t\t\t// Adjust divisional loss to the last item\n\t\t\t\tif (tax.charge_type == \"Actual\") {\n\t\t\t\t\tactual_tax_dict[tax.idx] -= current_tax_amount;\n\t\t\t\t\tif (n == me.frm.doc[\"items\"].length - 1) {\n\t\t\t\t\t\tcurrent_tax_amount += actual_tax_dict[tax.idx];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// accumulate tax amount into tax.tax_amount\n\t\t\t\tif (tax.charge_type != \"Actual\" &&\n\t\t\t\t\t!(me.discount_amount_applied && me.frm.doc.apply_discount_on==\"Grand Total\")) {\n\t\t\t\t\ttax.tax_amount += current_tax_amount;\n\t\t\t\t}\n\n\t\t\t\t// store tax_amount for current item as it will be used for\n\t\t\t\t// charge type = 'On Previous Row Amount'\n\t\t\t\ttax.tax_amount_for_current_item = current_tax_amount;\n\n\t\t\t\t// tax amount after discount amount\n\t\t\t\ttax.tax_amount_after_discount_amount += current_tax_amount;\n\n\t\t\t\t// for buying\n\t\t\t\tif(tax.category) {\n\t\t\t\t\t// if just for valuation, do not add the tax amount in total\n\t\t\t\t\t// hence, setting it as 0 for further steps\n\t\t\t\t\tcurrent_tax_amount = (tax.category == \"Valuation\") ? 0.0 : current_tax_amount;\n\n\t\t\t\t\tcurrent_tax_amount *= (tax.add_deduct_tax == \"Deduct\") ? -1.0 : 1.0;\n\t\t\t\t}\n\n\t\t\t\t// note: grand_total_for_current_item contains the contribution of\n\t\t\t\t// item's amount, previously applied tax and the current tax on that item\n\t\t\t\tif(i==0) {\n\t\t\t\t\ttax.grand_total_for_current_item = flt(item.net_amount + current_tax_amount);\n\t\t\t\t} else {\n\t\t\t\t\ttax.grand_total_for_current_item =\n\t\t\t\t\t\tflt(me.frm.doc[\"taxes\"][i-1].grand_total_for_current_item + current_tax_amount);\n\t\t\t\t}\n\n\t\t\t\t// set precision in the last item iteration\n\t\t\t\tif (n == me.frm.doc[\"items\"].length - 1) {\n\t\t\t\t\tme.round_off_totals(tax);\n\t\t\t\t\tme.set_in_company_currency(tax,\n\t\t\t\t\t\t[\"tax_amount\", \"tax_amount_after_discount_amount\"]);\n\n\t\t\t\t\tme.round_off_base_values(tax);\n\n\t\t\t\t\t// in tax.total, accumulate grand total for each item\n\t\t\t\t\tme.set_cumulative_total(i, tax);\n\n\t\t\t\t\tme.set_in_company_currency(tax, [\"total\"]);\n\n\t\t\t\t\t// adjust Discount Amount loss in last tax iteration\n\t\t\t\t\tif ((i == me.frm.doc[\"taxes\"].length - 1) && me.discount_amount_applied\n\t\t\t\t\t\t&& me.frm.doc.apply_discount_on == \"Grand Total\" && me.frm.doc.discount_amount) {\n\t\t\t\t\t\tme.frm.doc.rounding_adjustment = flt(me.frm.doc.grand_total -\n\t\t\t\t\t\t\tflt(me.frm.doc.discount_amount) - tax.total, precision(\"rounding_adjustment\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tset_cumulative_total: function(row_idx, tax) {\n\t\tvar tax_amount = tax.tax_amount_after_discount_amount;\n\t\tif (tax.category == 'Valuation') {\n\t\t\ttax_amount = 0;\n\t\t}\n\n\t\tif (tax.add_deduct_tax == \"Deduct\") { tax_amount = -1*tax_amount; }\n\n\t\tif(row_idx==0) {\n\t\t\ttax.total = flt(this.frm.doc.net_total + tax_amount, precision(\"total\", tax));\n\t\t} else {\n\t\t\ttax.total = flt(this.frm.doc[\"taxes\"][row_idx-1].total + tax_amount, precision(\"total\", tax));\n\t\t}\n\t},\n\n\t_load_item_tax_rate: function(item_tax_rate) {\n\t\treturn item_tax_rate ? JSON.parse(item_tax_rate) : {};\n\t},\n\n\tget_current_tax_amount: function(item, tax, item_tax_map) {\n\t\tvar tax_rate = this._get_tax_rate(tax, item_tax_map);\n\t\tvar current_tax_amount = 0.0;\n\n\t\t// To set row_id by default as previous row.\n\t\tif([\"On Previous Row Amount\", \"On Previous Row Total\"].includes(tax.charge_type)) {\n\t\t\tif (tax.idx === 1) {\n\t\t\t\tfrappe.throw(\n\t\t\t\t\t__(\"Cannot select charge type as 'On Previous Row Amount' or 'On Previous Row Total' for first row\"));\n\t\t\t}\n\t\t\tif (!tax.row_id) {\n\t\t\t\ttax.row_id = tax.idx - 1;\n\t\t\t}\n\t\t}\n\t\tif(tax.charge_type == \"Actual\") {\n\t\t\t// distribute the tax amount proportionally to each item row\n\t\t\tvar actual = flt(tax.tax_amount, precision(\"tax_amount\", tax));\n\t\t\tcurrent_tax_amount = this.frm.doc.net_total ?\n\t\t\t\t((item.net_amount / this.frm.doc.net_total) * actual) : 0.0;\n\n\t\t} else if(tax.charge_type == \"On Net Total\") {\n\t\t\tcurrent_tax_amount = (tax_rate / 100.0) * item.net_amount;\n\t\t} else if(tax.charge_type == \"On Previous Row Amount\") {\n\t\t\tcurrent_tax_amount = (tax_rate / 100.0) *\n\t\t\t\tthis.frm.doc[\"taxes\"][cint(tax.row_id) - 1].tax_amount_for_current_item;\n\n\t\t} else if(tax.charge_type == \"On Previous Row Total\") {\n\t\t\tcurrent_tax_amount = (tax_rate / 100.0) *\n\t\t\t\tthis.frm.doc[\"taxes\"][cint(tax.row_id) - 1].grand_total_for_current_item;\n\t\t} else if (tax.charge_type == \"On Item Quantity\") {\n\t\t\tcurrent_tax_amount = tax_rate * item.qty;\n\t\t}\n\n\t\tif (!tax.dont_recompute_tax) {\n\t\t\tthis.set_item_wise_tax(item, tax, tax_rate, current_tax_amount);\n\t\t}\n\n\t\treturn current_tax_amount;\n\t},\n\n\tset_item_wise_tax: function(item, tax, tax_rate, current_tax_amount) {\n\t\t// store tax breakup for each item\n\t\tlet tax_detail = tax.item_wise_tax_detail;\n\t\tlet key = item.item_code || item.item_name;\n\n\t\tif(typeof (tax_detail) == \"string\") {\n\t\t\ttax.item_wise_tax_detail = JSON.parse(tax.item_wise_tax_detail);\n\t\t\ttax_detail = tax.item_wise_tax_detail;\n\t\t}\n\n\t\tlet item_wise_tax_amount = current_tax_amount * this.frm.doc.conversion_rate;\n\t\tif (tax_detail && tax_detail[key])\n\t\t\titem_wise_tax_amount += tax_detail[key][1];\n\n\t\ttax_detail[key] = [tax_rate, flt(item_wise_tax_amount, precision(\"base_tax_amount\", tax))];\n\t},\n\n\tround_off_totals: function(tax) {\n\t\tif (frappe.flags.round_off_applicable_accounts.includes(tax.account_head)) {\n\t\t\ttax.tax_amount= Math.round(tax.tax_amount);\n\t\t\ttax.tax_amount_after_discount_amount = Math.round(tax.tax_amount_after_discount_amount);\n\t\t}\n\n\t\ttax.tax_amount = flt(tax.tax_amount, precision(\"tax_amount\", tax));\n\t\ttax.tax_amount_after_discount_amount = flt(tax.tax_amount_after_discount_amount, precision(\"tax_amount\", tax));\n\t},\n\n\tround_off_base_values: function(tax) {\n\t\tif (frappe.flags.round_off_applicable_accounts.includes(tax.account_head)) {\n\t\t\ttax.base_tax_amount= Math.round(tax.base_tax_amount);\n\t\t\ttax.base_tax_amount_after_discount_amount = Math.round(tax.base_tax_amount_after_discount_amount);\n\t\t}\n\t},\n\n\tmanipulate_grand_total_for_inclusive_tax: function() {\n\t\tvar me = this;\n\t\t// if fully inclusive taxes and diff\n\t\tif (this.frm.doc[\"taxes\"] && this.frm.doc[\"taxes\"].length) {\n\t\t\tvar any_inclusive_tax = false;\n\t\t\t$.each(this.frm.doc.taxes || [], function(i, d) {\n\t\t\t\tif(cint(d.included_in_print_rate)) any_inclusive_tax = true;\n\t\t\t});\n\t\t\tif (any_inclusive_tax) {\n\t\t\t\tvar last_tax = me.frm.doc[\"taxes\"].slice(-1)[0];\n\t\t\t\tvar non_inclusive_tax_amount = frappe.utils.sum($.map(this.frm.doc.taxes || [],\n\t\t\t\t\tfunction(d) {\n\t\t\t\t\t\tif(!d.included_in_print_rate) {\n\t\t\t\t\t\t\treturn flt(d.tax_amount_after_discount_amount);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t\tvar diff = me.frm.doc.total + non_inclusive_tax_amount\n\t\t\t\t\t- flt(last_tax.total, precision(\"grand_total\"));\n\n\t\t\t\tif(me.discount_amount_applied && me.frm.doc.discount_amount) {\n\t\t\t\t\tdiff -= flt(me.frm.doc.discount_amount);\n\t\t\t\t}\n\n\t\t\t\tdiff = flt(diff, precision(\"rounding_adjustment\"));\n\n\t\t\t\tif ( diff && Math.abs(diff) <= (5.0 / Math.pow(10, precision(\"tax_amount\", last_tax))) ) {\n\t\t\t\t\tme.frm.doc.rounding_adjustment = diff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tcalculate_totals: function() {\n\t\t// Changing sequence can because of rounding adjustment issue and on-screen discrepancy\n\t\tvar me = this;\n\t\tvar tax_count = this.frm.doc[\"taxes\"] ? this.frm.doc[\"taxes\"].length : 0;\n\t\tthis.frm.doc.grand_total = flt(tax_count\n\t\t\t? this.frm.doc[\"taxes\"][tax_count - 1].total + flt(this.frm.doc.rounding_adjustment)\n\t\t\t: this.frm.doc.net_total);\n\n\t\tif(in_list([\"Quotation\", \"Sales Order\", \"Delivery Note\", \"Sales Invoice\", \"POS Invoice\"], this.frm.doc.doctype)) {\n\t\t\tthis.frm.doc.base_grand_total = (this.frm.doc.total_taxes_and_charges) ?\n\t\t\t\tflt(this.frm.doc.grand_total * this.frm.doc.conversion_rate) : this.frm.doc.base_net_total;\n\t\t} else {\n\t\t\t// other charges added/deducted\n\t\t\tthis.frm.doc.taxes_and_charges_added = this.frm.doc.taxes_and_charges_deducted = 0.0;\n\t\t\tif(tax_count) {\n\t\t\t\t$.each(this.frm.doc[\"taxes\"] || [], function(i, tax) {\n\t\t\t\t\tif (in_list([\"Valuation and Total\", \"Total\"], tax.category)) {\n\t\t\t\t\t\tif(tax.add_deduct_tax == \"Add\") {\n\t\t\t\t\t\t\tme.frm.doc.taxes_and_charges_added += flt(tax.tax_amount_after_discount_amount);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme.frm.doc.taxes_and_charges_deducted += flt(tax.tax_amount_after_discount_amount);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfrappe.model.round_floats_in(this.frm.doc,\n\t\t\t\t\t[\"taxes_and_charges_added\", \"taxes_and_charges_deducted\"]);\n\t\t\t}\n\n\t\t\tthis.frm.doc.base_grand_total = flt((this.frm.doc.taxes_and_charges_added || this.frm.doc.taxes_and_charges_deducted) ?\n\t\t\t\tflt(this.frm.doc.grand_total * this.frm.doc.conversion_rate) : this.frm.doc.base_net_total);\n\n\t\t\tthis.set_in_company_currency(this.frm.doc,\n\t\t\t\t[\"taxes_and_charges_added\", \"taxes_and_charges_deducted\"]);\n\t\t}\n\n\t\tthis.frm.doc.total_taxes_and_charges = flt(this.frm.doc.grand_total - this.frm.doc.net_total\n\t\t\t- flt(this.frm.doc.rounding_adjustment), precision(\"total_taxes_and_charges\"));\n\n\t\tthis.set_in_company_currency(this.frm.doc, [\"total_taxes_and_charges\", \"rounding_adjustment\"]);\n\n\t\t// Round grand total as per precision\n\t\tfrappe.model.round_floats_in(this.frm.doc, [\"grand_total\", \"base_grand_total\"]);\n\n\t\t// rounded totals\n\t\tthis.set_rounded_total();\n\t},\n\n\tset_rounded_total: function() {\n\t\tvar disable_rounded_total = 0;\n\t\tif(frappe.meta.get_docfield(this.frm.doc.doctype, \"disable_rounded_total\", this.frm.doc.name)) {\n\t\t\tdisable_rounded_total = this.frm.doc.disable_rounded_total;\n\t\t} else if (frappe.sys_defaults.disable_rounded_total) {\n\t\t\tdisable_rounded_total = frappe.sys_defaults.disable_rounded_total;\n\t\t}\n\n\t\tif (cint(disable_rounded_total)) {\n\t\t\tthis.frm.doc.rounded_total = 0;\n\t\t\tthis.frm.doc.base_rounded_total = 0;\n\t\t\treturn;\n\t\t}\n\n\t\tif(frappe.meta.get_docfield(this.frm.doc.doctype, \"rounded_total\", this.frm.doc.name)) {\n\t\t\tthis.frm.doc.rounded_total = round_based_on_smallest_currency_fraction(this.frm.doc.grand_total,\n\t\t\t\tthis.frm.doc.currency, precision(\"rounded_total\"));\n\t\t\tthis.frm.doc.rounding_adjustment += flt(this.frm.doc.rounded_total - this.frm.doc.grand_total,\n\t\t\t\tprecision(\"rounding_adjustment\"));\n\n\t\t\tthis.set_in_company_currency(this.frm.doc, [\"rounding_adjustment\", \"rounded_total\"]);\n\t\t}\n\t},\n\n\t_cleanup: function() {\n\t\tthis.frm.doc.base_in_words = this.frm.doc.in_words = \"\";\n\n\t\tif(this.frm.doc[\"items\"] && this.frm.doc[\"items\"].length) {\n\t\t\tif(!frappe.meta.get_docfield(this.frm.doc[\"items\"][0].doctype, \"item_tax_amount\", this.frm.doctype)) {\n\t\t\t\t$.each(this.frm.doc[\"items\"] || [], function(i, item) {\n\t\t\t\t\tdelete item[\"item_tax_amount\"];\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif(this.frm.doc[\"taxes\"] && this.frm.doc[\"taxes\"].length) {\n\t\t\tvar temporary_fields = [\"tax_amount_for_current_item\", \"grand_total_for_current_item\",\n\t\t\t\t\"tax_fraction_for_current_item\", \"grand_total_fraction_for_current_item\"];\n\n\t\t\tif(!frappe.meta.get_docfield(this.frm.doc[\"taxes\"][0].doctype, \"tax_amount_after_discount_amount\", this.frm.doctype)) {\n\t\t\t\ttemporary_fields.push(\"tax_amount_after_discount_amount\");\n\t\t\t}\n\n\t\t\t$.each(this.frm.doc[\"taxes\"] || [], function(i, tax) {\n\t\t\t\t$.each(temporary_fields, function(i, fieldname) {\n\t\t\t\t\tdelete tax[fieldname];\n\t\t\t\t});\n\n\t\t\t\tif (!tax.dont_recompute_tax) {\n\t\t\t\t\ttax.item_wise_tax_detail = JSON.stringify(tax.item_wise_tax_detail);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tset_discount_amount: function() {\n\t\tif(this.frm.doc.additional_discount_percentage) {\n\t\t\tthis.frm.doc.discount_amount = flt(flt(this.frm.doc[frappe.scrub(this.frm.doc.apply_discount_on)])\n\t\t\t\t* this.frm.doc.additional_discount_percentage / 100, precision(\"discount_amount\"));\n\t\t}\n\t},\n\n\tapply_discount_amount: function() {\n\t\tvar me = this;\n\t\tvar distributed_amount = 0.0;\n\t\tthis.frm.doc.base_discount_amount = 0.0;\n\n\t\tif (this.frm.doc.discount_amount) {\n\t\t\tif(!this.frm.doc.apply_discount_on)\n\t\t\t\tfrappe.throw(__(\"Please select Apply Discount On\"));\n\n\t\t\tthis.frm.doc.base_discount_amount = flt(this.frm.doc.discount_amount * this.frm.doc.conversion_rate,\n\t\t\t\tprecision(\"base_discount_amount\"));\n\n\t\t\tvar total_for_discount_amount = this.get_total_for_discount_amount();\n\t\t\tvar net_total = 0;\n\t\t\t// calculate item amount after Discount Amount\n\t\t\tif (total_for_discount_amount) {\n\t\t\t\t$.each(this.frm.doc[\"items\"] || [], function(i, item) {\n\t\t\t\t\tdistributed_amount = flt(me.frm.doc.discount_amount) * item.net_amount / total_for_discount_amount;\n\t\t\t\t\titem.net_amount = flt(item.net_amount - distributed_amount,\n\t\t\t\t\t\tprecision(\"base_amount\", item));\n\t\t\t\t\tnet_total += item.net_amount;\n\n\t\t\t\t\t// discount amount rounding loss adjustment if no taxes\n\t\t\t\t\tif ((!(me.frm.doc.taxes || []).length || total_for_discount_amount==me.frm.doc.net_total || (me.frm.doc.apply_discount_on == \"Net Total\"))\n\t\t\t\t\t\t\t&& i == (me.frm.doc.items || []).length - 1) {\n\t\t\t\t\t\tvar discount_amount_loss = flt(me.frm.doc.net_total - net_total\n\t\t\t\t\t\t\t- me.frm.doc.discount_amount, precision(\"net_total\"));\n\t\t\t\t\t\titem.net_amount = flt(item.net_amount + discount_amount_loss,\n\t\t\t\t\t\t\tprecision(\"net_amount\", item));\n\t\t\t\t\t}\n\t\t\t\t\titem.net_rate = item.qty ? flt(item.net_amount / item.qty, precision(\"net_rate\", item)) : 0;\n\t\t\t\t\tme.set_in_company_currency(item, [\"net_rate\", \"net_amount\"]);\n\t\t\t\t});\n\n\t\t\t\tthis.discount_amount_applied = true;\n\t\t\t\tthis._calculate_taxes_and_totals();\n\t\t\t}\n\t\t}\n\t},\n\n\tget_total_for_discount_amount: function() {\n\t\tif(this.frm.doc.apply_discount_on == \"Net Total\") {\n\t\t\treturn this.frm.doc.net_total;\n\t\t} else {\n\t\t\tvar total_actual_tax = 0.0;\n\t\t\tvar actual_taxes_dict = {};\n\n\t\t\t$.each(this.frm.doc[\"taxes\"] || [], function(i, tax) {\n\t\t\t\tif (in_list([\"Actual\", \"On Item Quantity\"], tax.charge_type)) {\n\t\t\t\t\tvar tax_amount = (tax.category == \"Valuation\") ? 0.0 : tax.tax_amount;\n\t\t\t\t\ttax_amount *= (tax.add_deduct_tax == \"Deduct\") ? -1.0 : 1.0;\n\t\t\t\t\tactual_taxes_dict[tax.idx] = tax_amount;\n\t\t\t\t} else if (actual_taxes_dict[tax.row_id] !== null) {\n\t\t\t\t\tvar actual_tax_amount = flt(actual_taxes_dict[tax.row_id]) * flt(tax.rate) / 100;\n\t\t\t\t\tactual_taxes_dict[tax.idx] = actual_tax_amount;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$.each(actual_taxes_dict, function(key, value) {\n\t\t\t\tif (value) total_actual_tax += value;\n\t\t\t});\n\n\t\t\treturn flt(this.frm.doc.grand_total - total_actual_tax, precision(\"grand_total\"));\n\t\t}\n\t},\n\n\tcalculate_total_advance: function(update_paid_amount) {\n\t\tvar total_allocated_amount = frappe.utils.sum($.map(this.frm.doc[\"advances\"] || [], function(adv) {\n\t\t\treturn flt(adv.allocated_amount, precision(\"allocated_amount\", adv));\n\t\t}));\n\t\tthis.frm.doc.total_advance = flt(total_allocated_amount, precision(\"total_advance\"));\n\n\t\tthis.calculate_outstanding_amount(update_paid_amount);\n\t},\n\n\tis_internal_invoice: function() {\n\t\tif (['Sales Invoice', 'Purchase Invoice'].includes(this.frm.doc.doctype)) {\n\t\t\tif (this.frm.doc.company === this.frm.doc.represents_company) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tcalculate_outstanding_amount: function(update_paid_amount) {\n\t\t// NOTE:\n\t\t// paid_amount and write_off_amount is only for POS/Loyalty Point Redemption Invoice\n\t\t// total_advance is only for non POS Invoice\n\t\tif(in_list([\"Sales Invoice\", \"POS Invoice\"], this.frm.doc.doctype) && this.frm.doc.is_return){\n\t\t\tthis.calculate_paid_amount();\n\t\t}\n\n\t\tif (this.frm.doc.is_return || (this.frm.doc.docstatus > 0) || this.is_internal_invoice()) return;\n\n\t\tfrappe.model.round_floats_in(this.frm.doc, [\"grand_total\", \"total_advance\", \"write_off_amount\"]);\n\n\t\tif(in_list([\"Sales Invoice\", \"POS Invoice\", \"Purchase Invoice\"], this.frm.doc.doctype)) {\n\t\t\tlet grand_total = this.frm.doc.rounded_total || this.frm.doc.grand_total;\n\t\t\tlet base_grand_total = this.frm.doc.base_rounded_total || this.frm.doc.base_grand_total;\n\n\t\t\tif(this.frm.doc.party_account_currency == this.frm.doc.currency) {\n\t\t\t\tvar total_amount_to_pay = flt((grand_total - this.frm.doc.total_advance\n\t\t\t\t\t- this.frm.doc.write_off_amount), precision(\"grand_total\"));\n\t\t\t} else {\n\t\t\t\tvar total_amount_to_pay = flt(\n\t\t\t\t\t(flt(base_grand_total, precision(\"base_grand_total\"))\n\t\t\t\t\t\t- this.frm.doc.total_advance - this.frm.doc.base_write_off_amount),\n\t\t\t\t\tprecision(\"base_grand_total\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfrappe.model.round_floats_in(this.frm.doc, [\"paid_amount\"]);\n\t\t\tthis.set_in_company_currency(this.frm.doc, [\"paid_amount\"]);\n\n\t\t\tif(this.frm.refresh_field){\n\t\t\t\tthis.frm.refresh_field(\"paid_amount\");\n\t\t\t\tthis.frm.refresh_field(\"base_paid_amount\");\n\t\t\t}\n\n\t\t\tif(in_list([\"Sales Invoice\", \"POS Invoice\"], this.frm.doc.doctype)) {\n\t\t\t\tlet total_amount_for_payment = (this.frm.doc.redeem_loyalty_points && this.frm.doc.loyalty_amount)\n\t\t\t\t\t? flt(total_amount_to_pay - this.frm.doc.loyalty_amount, precision(\"base_grand_total\"))\n\t\t\t\t\t: total_amount_to_pay;\n\t\t\t\tthis.set_default_payment(total_amount_for_payment, update_paid_amount);\n\t\t\t\tthis.calculate_paid_amount();\n\t\t\t}\n\t\t\tthis.calculate_change_amount();\n\n\t\t\tvar paid_amount = (this.frm.doc.party_account_currency == this.frm.doc.currency) ?\n\t\t\t\tthis.frm.doc.paid_amount : this.frm.doc.base_paid_amount;\n\t\t\tthis.frm.doc.outstanding_amount =  flt(total_amount_to_pay - flt(paid_amount) +\n\t\t\t\tflt(this.frm.doc.change_amount * this.frm.doc.conversion_rate), precision(\"outstanding_amount\"));\n\t\t}\n\t},\n\n\tset_total_amount_to_default_mop: function() {\n\t\tlet grand_total = this.frm.doc.rounded_total || this.frm.doc.grand_total;\n\t\tlet base_grand_total = this.frm.doc.base_rounded_total || this.frm.doc.base_grand_total;\n\n\t\tif(this.frm.doc.party_account_currency == this.frm.doc.currency) {\n\t\t\tvar total_amount_to_pay = flt((grand_total - this.frm.doc.total_advance\n\t\t\t\t- this.frm.doc.write_off_amount), precision(\"grand_total\"));\n\t\t} else {\n\t\t\tvar total_amount_to_pay = flt(\n\t\t\t\t(flt(base_grand_total, precision(\"base_grand_total\"))\n\t\t\t\t\t- this.frm.doc.total_advance - this.frm.doc.base_write_off_amount),\n\t\t\t\tprecision(\"base_grand_total\")\n\t\t\t);\n\t\t}\n\t\tthis.frm.doc.payments.find(pay => {\n\t\t\tif (pay.default) {\n\t\t\t\tpay.amount = total_amount_to_pay;\n\t\t\t}\n\t\t});\n\t\tthis.frm.refresh_fields();\n\t},\n\n\tset_default_payment: function(total_amount_to_pay, update_paid_amount) {\n\t\tvar me = this;\n\t\tvar payment_status = true;\n\t\tif(this.frm.doc.is_pos && (update_paid_amount===undefined || update_paid_amount)) {\n\t\t\t$.each(this.frm.doc['payments'] || [], function(index, data) {\n\t\t\t\tif(data.default && payment_status && total_amount_to_pay > 0) {\n\t\t\t\t\tlet base_amount = flt(total_amount_to_pay, precision(\"base_amount\", data));\n\t\t\t\t\tfrappe.model.set_value(data.doctype, data.name, \"base_amount\", base_amount);\n\t\t\t\t\tlet amount = flt(total_amount_to_pay / me.frm.doc.conversion_rate, precision(\"amount\", data));\n\t\t\t\t\tfrappe.model.set_value(data.doctype, data.name, \"amount\", amount);\n\t\t\t\t\tpayment_status = false;\n\t\t\t\t} else if(me.frm.doc.paid_amount) {\n\t\t\t\t\tfrappe.model.set_value(data.doctype, data.name, \"amount\", 0.0);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tcalculate_paid_amount: function() {\n\t\tvar me = this;\n\t\tvar paid_amount = 0.0;\n\t\tvar base_paid_amount = 0.0;\n\t\tif(this.frm.doc.is_pos) {\n\t\t\t$.each(this.frm.doc['payments'] || [], function(index, data){\n\t\t\t\tdata.base_amount = flt(data.amount * me.frm.doc.conversion_rate, precision(\"base_amount\", data));\n\t\t\t\tpaid_amount += data.amount;\n\t\t\t\tbase_paid_amount += data.base_amount;\n\t\t\t});\n\t\t} else if(!this.frm.doc.is_return){\n\t\t\tthis.frm.doc.payments = [];\n\t\t}\n\t\tif (this.frm.doc.redeem_loyalty_points && this.frm.doc.loyalty_amount) {\n\t\t\tbase_paid_amount += this.frm.doc.loyalty_amount;\n\t\t\tpaid_amount += flt(this.frm.doc.loyalty_amount / me.frm.doc.conversion_rate, precision(\"paid_amount\"));\n\t\t}\n\n\t\tthis.frm.set_value('paid_amount', flt(paid_amount, precision(\"paid_amount\")));\n\t\tthis.frm.set_value('base_paid_amount', flt(base_paid_amount, precision(\"base_paid_amount\")));\n\t},\n\n\tcalculate_change_amount: function(){\n\t\tthis.frm.doc.change_amount = 0.0;\n\t\tthis.frm.doc.base_change_amount = 0.0;\n\t\tif(in_list([\"Sales Invoice\", \"POS Invoice\"], this.frm.doc.doctype)\n\t\t\t&& this.frm.doc.paid_amount > this.frm.doc.grand_total && !this.frm.doc.is_return) {\n\n\t\t\tvar payment_types = $.map(this.frm.doc.payments, function(d) { return d.type; });\n\t\t\tif (in_list(payment_types, 'Cash')) {\n\t\t\t\tvar grand_total = this.frm.doc.rounded_total || this.frm.doc.grand_total;\n\t\t\t\tvar base_grand_total = this.frm.doc.base_rounded_total || this.frm.doc.base_grand_total;\n\n\t\t\t\tthis.frm.doc.change_amount = flt(this.frm.doc.paid_amount - grand_total +\n\t\t\t\t\tthis.frm.doc.write_off_amount, precision(\"change_amount\"));\n\n\t\t\t\tthis.frm.doc.base_change_amount = flt(this.frm.doc.base_paid_amount -\n\t\t\t\t\tbase_grand_total + this.frm.doc.base_write_off_amount,\n\t\t\t\t\tprecision(\"base_change_amount\"));\n\t\t\t}\n\t\t}\n\t},\n\n\tcalculate_write_off_amount: function(){\n\t\tif(this.frm.doc.paid_amount > this.frm.doc.grand_total){\n\t\t\tthis.frm.doc.write_off_amount = flt(this.frm.doc.grand_total - this.frm.doc.paid_amount\n\t\t\t\t+ this.frm.doc.change_amount, precision(\"write_off_amount\"));\n\n\t\t\tthis.frm.doc.base_write_off_amount = flt(this.frm.doc.write_off_amount * this.frm.doc.conversion_rate,\n\t\t\t\tprecision(\"base_write_off_amount\"));\n\t\t}else{\n\t\t\tthis.frm.doc.paid_amount = 0.0;\n\t\t}\n\t\tthis.calculate_outstanding_amount(false);\n\t}\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nfrappe.provide('erpnext.accounts.dimensions');\n\nerpnext.TransactionController = erpnext.taxes_and_totals.extend({\n\tsetup: function() {\n\t\tthis._super();\n\t\tlet me = this;\n\t\tfrappe.flags.hide_serial_batch_dialog = true;\n\t\tfrappe.ui.form.on(this.frm.doctype + \" Item\", \"rate\", function(frm, cdt, cdn) {\n\t\t\tvar item = frappe.get_doc(cdt, cdn);\n\t\t\tvar has_margin_field = frappe.meta.has_field(cdt, 'margin_type');\n\n\t\t\tfrappe.model.round_floats_in(item, [\"rate\", \"price_list_rate\"]);\n\n\t\t\tif(item.price_list_rate) {\n\t\t\t\tif(item.rate > item.price_list_rate && has_margin_field) {\n\t\t\t\t\t// if rate is greater than price_list_rate, set margin\n\t\t\t\t\t// or set discount\n\t\t\t\t\titem.discount_percentage = 0;\n\t\t\t\t\titem.margin_type = 'Amount';\n\t\t\t\t\titem.margin_rate_or_amount = flt(item.rate - item.price_list_rate,\n\t\t\t\t\t\tprecision(\"margin_rate_or_amount\", item));\n\t\t\t\t\titem.rate_with_margin = item.rate;\n\t\t\t\t} else {\n\t\t\t\t\titem.discount_percentage = flt((1 - item.rate / item.price_list_rate) * 100.0,\n\t\t\t\t\t\tprecision(\"discount_percentage\", item));\n\t\t\t\t\titem.discount_amount = flt(item.price_list_rate) - flt(item.rate);\n\t\t\t\t\titem.margin_type = '';\n\t\t\t\t\titem.margin_rate_or_amount = 0;\n\t\t\t\t\titem.rate_with_margin = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem.discount_percentage = 0.0;\n\t\t\t\titem.margin_type = '';\n\t\t\t\titem.margin_rate_or_amount = 0;\n\t\t\t\titem.rate_with_margin = 0;\n\t\t\t}\n\t\t\titem.base_rate_with_margin = item.rate_with_margin * flt(frm.doc.conversion_rate);\n\n\t\t\tcur_frm.cscript.set_gross_profit(item);\n\t\t\tcur_frm.cscript.calculate_taxes_and_totals();\n\t\t\tcur_frm.cscript.calculate_stock_uom_rate(frm, cdt, cdn);\n\t\t});\n\n\t\tfrappe.ui.form.on(this.frm.cscript.tax_table, \"rate\", function(frm, cdt, cdn) {\n\t\t\tcur_frm.cscript.calculate_taxes_and_totals();\n\t\t});\n\n\t\tfrappe.ui.form.on(this.frm.cscript.tax_table, \"tax_amount\", function(frm, cdt, cdn) {\n\t\t\tcur_frm.cscript.calculate_taxes_and_totals();\n\t\t});\n\n\t\tfrappe.ui.form.on(this.frm.cscript.tax_table, \"row_id\", function(frm, cdt, cdn) {\n\t\t\tcur_frm.cscript.calculate_taxes_and_totals();\n\t\t});\n\n\t\tfrappe.ui.form.on(this.frm.cscript.tax_table, \"included_in_print_rate\", function(frm, cdt, cdn) {\n\t\t\tcur_frm.cscript.set_dynamic_labels();\n\t\t\tcur_frm.cscript.calculate_taxes_and_totals();\n\t\t});\n\n\t\tfrappe.ui.form.on(this.frm.doctype, \"apply_discount_on\", function(frm) {\n\t\t\tif(frm.doc.additional_discount_percentage) {\n\t\t\t\tfrm.trigger(\"additional_discount_percentage\");\n\t\t\t} else {\n\t\t\t\tcur_frm.cscript.calculate_taxes_and_totals();\n\t\t\t}\n\t\t});\n\n\t\tfrappe.ui.form.on(this.frm.doctype, \"additional_discount_percentage\", function(frm) {\n\t\t\tif(!frm.doc.apply_discount_on) {\n\t\t\t\tfrappe.msgprint(__(\"Please set 'Apply Additional Discount On'\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfrm.via_discount_percentage = true;\n\n\t\t\tif(frm.doc.additional_discount_percentage && frm.doc.discount_amount) {\n\t\t\t\t// Reset discount amount and net / grand total\n\t\t\t\tfrm.doc.discount_amount = 0;\n\t\t\t\tfrm.cscript.calculate_taxes_and_totals();\n\t\t\t}\n\n\t\t\tvar total = flt(frm.doc[frappe.model.scrub(frm.doc.apply_discount_on)]);\n\t\t\tvar discount_amount = flt(total*flt(frm.doc.additional_discount_percentage) / 100,\n\t\t\t\tprecision(\"discount_amount\"));\n\n\t\t\tfrm.set_value(\"discount_amount\", discount_amount)\n\t\t\t\t.then(() => delete frm.via_discount_percentage);\n\t\t});\n\n\t\tfrappe.ui.form.on(this.frm.doctype, \"discount_amount\", function(frm) {\n\t\t\tfrm.cscript.set_dynamic_labels();\n\n\t\t\tif (!frm.via_discount_percentage) {\n\t\t\t\tfrm.doc.additional_discount_percentage = 0;\n\t\t\t}\n\n\t\t\tfrm.cscript.calculate_taxes_and_totals();\n\t\t});\n\n\t\tfrappe.ui.form.on(this.frm.doctype + \" Item\", {\n\t\t\titems_add: function(frm, cdt, cdn) {\n\t\t\t\tvar item = frappe.get_doc(cdt, cdn);\n\t\t\t\tif (!item.warehouse && frm.doc.set_warehouse) {\n\t\t\t\t\titem.warehouse = frm.doc.set_warehouse;\n\t\t\t\t}\n\n\t\t\t\tif (!item.target_warehouse && frm.doc.set_target_warehouse) {\n\t\t\t\t\titem.target_warehouse = frm.doc.set_target_warehouse;\n\t\t\t\t}\n\n\t\t\t\tif (!item.from_warehouse && frm.doc.set_from_warehouse) {\n\t\t\t\t\titem.from_warehouse = frm.doc.set_from_warehouse;\n\t\t\t\t}\n\n\t\t\t\terpnext.accounts.dimensions.copy_dimension_from_first_row(frm, cdt, cdn, 'items');\n\t\t\t}\n\t\t});\n\n\t\tif(this.frm.fields_dict[\"items\"].grid.get_field('batch_no')) {\n\t\t\tthis.frm.set_query(\"batch_no\", \"items\", function(doc, cdt, cdn) {\n\t\t\t\treturn me.set_query_for_batch(doc, cdt, cdn);\n\t\t\t});\n\t\t}\n\n\t\tif(\n\t\t\tthis.frm.docstatus < 2\n\t\t\t&& this.frm.fields_dict[\"payment_terms_template\"]\n\t\t\t&& this.frm.fields_dict[\"payment_schedule\"]\n\t\t\t&& this.frm.doc.payment_terms_template\n\t\t\t&& !this.frm.doc.payment_schedule.length\n\t\t){\n\t\t\tthis.frm.trigger(\"payment_terms_template\");\n\t\t}\n\n\t\tif(this.frm.fields_dict[\"taxes\"]) {\n\t\t\tthis[\"taxes_remove\"] = this.calculate_taxes_and_totals;\n\t\t}\n\n\t\tif(this.frm.fields_dict[\"items\"]) {\n\t\t\tthis[\"items_remove\"] = this.calculate_net_weight;\n\t\t}\n\n\t\tif(this.frm.fields_dict[\"recurring_print_format\"]) {\n\t\t\tthis.frm.set_query(\"recurring_print_format\", function(doc) {\n\t\t\t\treturn{\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\t['Print Format', 'doc_type', '=', cur_frm.doctype],\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tif(this.frm.fields_dict[\"return_against\"]) {\n\t\t\tthis.frm.set_query(\"return_against\", function(doc) {\n\t\t\t\tvar filters = {\n\t\t\t\t\t\"docstatus\": 1,\n\t\t\t\t\t\"is_return\": 0,\n\t\t\t\t\t\"company\": doc.company\n\t\t\t\t};\n\t\t\t\tif (me.frm.fields_dict[\"customer\"] && doc.customer) filters[\"customer\"] = doc.customer;\n\t\t\t\tif (me.frm.fields_dict[\"supplier\"] && doc.supplier) filters[\"supplier\"] = doc.supplier;\n\n\t\t\t\treturn {\n\t\t\t\t\tfilters: filters\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tif (this.frm.fields_dict[\"items\"].grid.get_field(\"expense_account\")) {\n\t\t\tthis.frm.set_query(\"expense_account\", \"items\", function(doc) {\n\t\t\t\treturn {\n\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\"company\": doc.company\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tif(frappe.meta.get_docfield(this.frm.doc.doctype, \"pricing_rules\")) {\n\t\t\tthis.frm.set_indicator_formatter('pricing_rule', function(doc) {\n\t\t\t\treturn (doc.rule_applied) ? \"green\" : \"red\";\n\t\t\t});\n\t\t}\n\n\t\tlet batch_no_field = this.frm.get_docfield(\"items\", \"batch_no\");\n\t\tif (batch_no_field) {\n\t\t\tbatch_no_field.get_route_options_for_new_doc = function(row) {\n\t\t\t\treturn {\n\t\t\t\t\t\"item\": row.doc.item_code\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (this.frm.fields_dict[\"items\"].grid.get_field('blanket_order')) {\n\t\t\tthis.frm.set_query(\"blanket_order\", \"items\", function(doc, cdt, cdn) {\n\t\t\t\tvar item = locals[cdt][cdn];\n\t\t\t\treturn {\n\t\t\t\t\tquery: \"erpnext.controllers.queries.get_blanket_orders\",\n\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\"company\": doc.company,\n\t\t\t\t\t\t\"blanket_order_type\": doc.doctype === \"Sales Order\" ? \"Selling\" : \"Purchasing\",\n\t\t\t\t\t\t\"item\": item.item_code\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.frm.fields_dict.taxes_and_charges) {\n\t\t\tthis.frm.set_query(\"taxes_and_charges\", function() {\n\t\t\t\treturn {\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\t['company', '=', me.frm.doc.company],\n\t\t\t\t\t\t['docstatus', '!=', 2]\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t},\n\tonload: function() {\n\t\tvar me = this;\n\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tvar currency = frappe.defaults.get_user_default(\"currency\");\n\n\t\t\tlet set_value = (fieldname, value) => {\n\t\t\t\tif(me.frm.fields_dict[fieldname] && !me.frm.doc[fieldname]) {\n\t\t\t\t\treturn me.frm.set_value(fieldname, value);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.frm.trigger('set_default_internal_warehouse');\n\n\t\t\treturn frappe.run_serially([\n\t\t\t\t() => set_value('currency', currency),\n\t\t\t\t() => set_value('price_list_currency', currency),\n\t\t\t\t() => set_value('status', 'Draft'),\n\t\t\t\t() => set_value('is_subcontracted', 'No'),\n\t\t\t\t() => {\n\t\t\t\t\tif(this.frm.doc.company && !this.frm.doc.amended_from) {\n\t\t\t\t\t\tthis.frm.trigger(\"company\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t},\n\n\tis_return: function() {\n\t\tif(!this.frm.doc.is_return && this.frm.doc.return_against) {\n\t\t\tthis.frm.set_value('return_against', '');\n\t\t}\n\t},\n\n\tsetup_quality_inspection: function() {\n\t\tif(!in_list([\"Delivery Note\", \"Sales Invoice\", \"Purchase Receipt\", \"Purchase Invoice\"], this.frm.doc.doctype)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst me = this;\n\t\tif (!this.frm.is_new() && this.frm.doc.docstatus === 0) {\n\t\t\tthis.frm.add_custom_button(__(\"Quality Inspection(s)\"), () => {\n\t\t\t\tme.make_quality_inspection();\n\t\t\t}, __(\"Create\"));\n\t\t\tthis.frm.page.set_inner_btn_group_as_primary(__('Create'));\n\t\t}\n\n\t\tconst inspection_type = in_list([\"Purchase Receipt\", \"Purchase Invoice\"], this.frm.doc.doctype)\n\t\t\t? \"Incoming\" : \"Outgoing\";\n\n\t\tlet quality_inspection_field = this.frm.get_docfield(\"items\", \"quality_inspection\");\n\t\tquality_inspection_field.get_route_options_for_new_doc = function(row) {\n\t\t\tif(me.frm.is_new()) return;\n\t\t\treturn {\n\t\t\t\t\"inspection_type\": inspection_type,\n\t\t\t\t\"reference_type\": me.frm.doc.doctype,\n\t\t\t\t\"reference_name\": me.frm.doc.name,\n\t\t\t\t\"item_code\": row.doc.item_code,\n\t\t\t\t\"description\": row.doc.description,\n\t\t\t\t\"item_serial_no\": row.doc.serial_no ? row.doc.serial_no.split(\"\\n\")[0] : null,\n\t\t\t\t\"batch_no\": row.doc.batch_no\n\t\t\t}\n\t\t}\n\n\t\tthis.frm.set_query(\"quality_inspection\", \"items\", function(doc, cdt, cdn) {\n\t\t\tlet d = locals[cdt][cdn];\n\t\t\treturn {\n\t\t\t\tfilters: {\n\t\t\t\t\tdocstatus: 1,\n\t\t\t\t\tinspection_type: inspection_type,\n\t\t\t\t\treference_name: doc.name,\n\t\t\t\t\titem_code: d.item_code\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tmake_payment_request: function() {\n\t\tvar me = this;\n\t\tconst payment_request_type = (in_list(['Sales Order', 'Sales Invoice'], this.frm.doc.doctype))\n\t\t\t? \"Inward\" : \"Outward\";\n\n\t\tfrappe.call({\n\t\t\tmethod:\"erpnext.accounts.doctype.payment_request.payment_request.make_payment_request\",\n\t\t\targs: {\n\t\t\t\tdt: me.frm.doc.doctype,\n\t\t\t\tdn: me.frm.doc.name,\n\t\t\t\trecipient_id: me.frm.doc.contact_email,\n\t\t\t\tpayment_request_type: payment_request_type,\n\t\t\t\tparty_type: payment_request_type == 'Outward' ? \"Supplier\" : \"Customer\",\n\t\t\t\tparty: payment_request_type == 'Outward' ? me.frm.doc.supplier : me.frm.doc.customer\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc){\n\t\t\t\t\tvar doc = frappe.model.sync(r.message);\n\t\t\t\t\tfrappe.set_route(\"Form\", r.message.doctype, r.message.name);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\n\tonload_post_render: function() {\n\t\tif(this.frm.doc.__islocal && !(this.frm.doc.taxes || []).length\n\t\t\t&& !(this.frm.doc.__onload ? this.frm.doc.__onload.load_after_mapping : false)) {\n\t\t\tfrappe.after_ajax(() => this.apply_default_taxes());\n\t\t} else if(this.frm.doc.__islocal && this.frm.doc.company && this.frm.doc[\"items\"]\n\t\t\t&& !this.frm.doc.is_pos) {\n\t\t\tfrappe.after_ajax(() => this.calculate_taxes_and_totals());\n\t\t}\n\t\tif(frappe.meta.get_docfield(this.frm.doc.doctype + \" Item\", \"item_code\")) {\n\t\t\tthis.setup_item_selector();\n\t\t\tthis.frm.get_field(\"items\").grid.set_multiple_add(\"item_code\", \"qty\");\n\t\t}\n\t},\n\n\trefresh: function() {\n\t\terpnext.toggle_naming_series();\n\t\terpnext.hide_company();\n\t\tthis.set_dynamic_labels();\n\t\tthis.setup_sms();\n\t\tthis.setup_quality_inspection();\n\t},\n\n\tscan_barcode: function() {\n\t\tlet me = this;\n\n\t\tif(this.frm.doc.scan_barcode) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.selling.page.point_of_sale.point_of_sale.search_for_serial_or_batch_or_barcode_number\",\n\t\t\t\targs: {\n\t\t\t\t\tsearch_value: this.frm.doc.scan_barcode\n\t\t\t\t}\n\t\t\t}).then(r => {\n\t\t\t\tconst data = r && r.message;\n\t\t\t\tif (!data || Object.keys(data).length === 0) {\n\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\tmessage: __('Cannot find Item with this Barcode'),\n\t\t\t\t\t\tindicator: 'red'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tme.modify_table_after_scan(data);\n\t\t\t});\n\t\t}\n\t\treturn false;\n\t},\n\n\tmodify_table_after_scan(data) {\n\t\tlet scan_barcode_field = this.frm.fields_dict[\"scan_barcode\"];\n\t\tlet cur_grid = this.frm.fields_dict.items.grid;\n\t\tlet row_to_modify = null;\n\n\t\t// Check if batch is scanned and table has batch no field\n\t\tlet batch_no_scan = Boolean(data.batch_no) && frappe.meta.has_field(cur_grid.doctype, \"batch_no\");\n\n\t\tif (batch_no_scan) {\n\t\t\trow_to_modify = this.get_batch_row_to_modify(data.batch_no);\n\t\t} else {\n\t\t\t// serial or barcode scan\n\t\t\trow_to_modify = this.get_row_to_modify_on_scan(row_to_modify, data);\n\t\t}\n\n\t\tif (!row_to_modify) {\n\t\t\t// add new row if new item/batch is scanned\n\t\t\trow_to_modify = frappe.model.add_child(this.frm.doc, cur_grid.doctype, 'items');\n\t\t}\n\n\t\tthis.show_scan_message(row_to_modify.idx, row_to_modify.item_code);\n\t\tthis.set_scanned_values(row_to_modify, data, scan_barcode_field);\n\t},\n\n\tset_scanned_values(row_to_modify, data, scan_barcode_field) {\n\t\t// increase qty and set scanned value and item in row\n\t\tthis.frm.from_barcode = this.frm.from_barcode ? this.frm.from_barcode + 1 : 1;\n\t\tfrappe.model.set_value(row_to_modify.doctype, row_to_modify.name, {\n\t\t\titem_code: data.item_code,\n\t\t\tqty: (row_to_modify.qty || 0) + 1\n\t\t});\n\n\t\t['serial_no', 'batch_no', 'barcode'].forEach(field => {\n\t\t\tif (data[field] && frappe.meta.has_field(row_to_modify.doctype, field)) {\n\t\t\t\tlet is_serial_no = row_to_modify[field] && field === \"serial_no\";\n\t\t\t\tlet value = data[field];\n\n\t\t\t\tif (is_serial_no) {\n\t\t\t\t\tvalue = row_to_modify[field] + '\\n' + data[field];\n\t\t\t\t}\n\n\t\t\t\tfrappe.model.set_value(row_to_modify.doctype, row_to_modify.name, field, value);\n\t\t\t}\n\t\t});\n\n\t\tscan_barcode_field.set_value('');\n\t\trefresh_field(\"items\");\n\t},\n\n\tget_row_to_modify_on_scan(row_to_modify, data) {\n\t\t// get an existing item row to increment or blank row to modify\n\t\tconst existing_item_row = this.frm.doc.items.find(d => d.item_code === data.item_code);\n\t\tconst blank_item_row = this.frm.doc.items.find(d => !d.item_code);\n\n\t\tif (existing_item_row) {\n\t\t\trow_to_modify = existing_item_row;\n\t\t} else if (blank_item_row) {\n\t\t\trow_to_modify = blank_item_row;\n\t\t}\n\n\t\treturn row_to_modify;\n\t},\n\n\tget_batch_row_to_modify(batch_no) {\n\t\t// get row if batch already exists in table\n\t\tconst existing_batch_row = this.frm.doc.items.find(d => d.batch_no === batch_no);\n\t\treturn existing_batch_row || null;\n\t},\n\n\tshow_scan_message (idx, exist = null) {\n\t\t// show new row or qty increase toast\n\t\tif (exist) {\n\t\t\tfrappe.show_alert({\n\t\t\t\tmessage: __('Row #{0}: Qty increased by 1', [idx]),\n\t\t\t\tindicator: 'green'\n\t\t\t});\n\t\t} else {\n\t\t\tfrappe.show_alert({\n\t\t\t\tmessage: __('Row #{0}: Item added', [idx]),\n\t\t\t\tindicator: 'green'\n\t\t\t});\n\t\t}\n\t},\n\n\tapply_default_taxes() {\n\t\tvar me = this;\n\t\tvar taxes_and_charges_field = frappe.meta.get_docfield(me.frm.doc.doctype, \"taxes_and_charges\",\n\t\t\tme.frm.doc.name);\n\n\t\tif (!this.frm.doc.taxes_and_charges && this.frm.doc.taxes && this.frm.doc.taxes.length > 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (taxes_and_charges_field) {\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: \"erpnext.controllers.accounts_controller.get_default_taxes_and_charges\",\n\t\t\t\targs: {\n\t\t\t\t\t\"master_doctype\": taxes_and_charges_field.options,\n\t\t\t\t\t\"tax_template\": me.frm.doc.taxes_and_charges || \"\",\n\t\t\t\t\t\"company\": me.frm.doc.company\n\t\t\t\t},\n\t\t\t\tdebounce: 2000,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!r.exc && r.message) {\n\t\t\t\t\t\tfrappe.run_serially([\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t// directly set in doc, so as not to call triggers\n\t\t\t\t\t\t\t\tif(r.message.taxes_and_charges) {\n\t\t\t\t\t\t\t\t\tme.frm.doc.taxes_and_charges = r.message.taxes_and_charges;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// set taxes table\n\t\t\t\t\t\t\t\tif(r.message.taxes) {\n\t\t\t\t\t\t\t\t\tme.frm.set_value(\"taxes\", r.message.taxes);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t() => me.set_dynamic_labels(),\n\t\t\t\t\t\t\t() => me.calculate_taxes_and_totals()\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tsetup_sms: function() {\n\t\tvar me = this;\n\t\tlet blacklist = ['Purchase Invoice', 'BOM'];\n\t\tif(this.frm.doc.docstatus===1 && !in_list([\"Lost\", \"Stopped\", \"Closed\"], this.frm.doc.status)\n\t\t\t&& !blacklist.includes(this.frm.doctype)) {\n\t\t\tthis.frm.page.add_menu_item(__('Send SMS'), function() { me.send_sms(); });\n\t\t}\n\t},\n\n\tsend_sms: function() {\n\t\tvar sms_man = new erpnext.SMSManager(this.frm.doc);\n\t},\n\n\tbarcode: function(doc, cdt, cdn) {\n\t\tvar d = locals[cdt][cdn];\n\t\tif(d.barcode==\"\" || d.barcode==null) {\n\t\t\t// barcode cleared, remove item\n\t\t\td.item_code = \"\";\n\t\t}\n\n\t\tthis.frm.from_barcode = this.frm.from_barcode ? this.frm.from_barcode + 1 : 1;\n\t\tthis.item_code(doc, cdt, cdn);\n\t},\n\n\titem_code: function(doc, cdt, cdn) {\n\t\tvar me = this;\n\t\tvar item = frappe.get_doc(cdt, cdn);\n\t\tvar update_stock = 0, show_batch_dialog = 0;\n\n\t\titem.weight_per_unit = 0;\n\t\titem.weight_uom = '';\n\t\titem.conversion_factor = 0;\n\n\t\tif(['Sales Invoice'].includes(this.frm.doc.doctype)) {\n\t\t\tupdate_stock = cint(me.frm.doc.update_stock);\n\t\t\tshow_batch_dialog = update_stock;\n\n\t\t} else if((this.frm.doc.doctype === 'Purchase Receipt' && me.frm.doc.is_return) ||\n\t\t\tthis.frm.doc.doctype === 'Delivery Note') {\n\t\t\tshow_batch_dialog = 1;\n\t\t}\n\t\t// clear barcode if setting item (else barcode will take priority)\n\t\tif (this.frm.from_barcode == 0) {\n\t\t\titem.barcode = null;\n\t\t}\n\t\tthis.frm.from_barcode = this.frm.from_barcode - 1 >= 0 ? this.frm.from_barcode - 1 : 0;\n\n\n\t\tif(item.item_code || item.barcode || item.serial_no) {\n\t\t\tif(!this.validate_company_and_party()) {\n\t\t\t\tthis.frm.fields_dict[\"items\"].grid.grid_rows[item.idx - 1].remove();\n\t\t\t} else {\n\t\t\t\treturn this.frm.call({\n\t\t\t\t\tmethod: \"erpnext.stock.get_item_details.get_item_details\",\n\t\t\t\t\tchild: item,\n\t\t\t\t\targs: {\n\t\t\t\t\t\tdoc: me.frm.doc,\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\titem_code: item.item_code,\n\t\t\t\t\t\t\tbarcode: item.barcode,\n\t\t\t\t\t\t\tserial_no: item.serial_no,\n\t\t\t\t\t\t\tbatch_no: item.batch_no,\n\t\t\t\t\t\t\tset_warehouse: me.frm.doc.set_warehouse,\n\t\t\t\t\t\t\twarehouse: item.warehouse,\n\t\t\t\t\t\t\tcustomer: me.frm.doc.customer || me.frm.doc.party_name,\n\t\t\t\t\t\t\tquotation_to: me.frm.doc.quotation_to,\n\t\t\t\t\t\t\tsupplier: me.frm.doc.supplier,\n\t\t\t\t\t\t\tcurrency: me.frm.doc.currency,\n\t\t\t\t\t\t\tupdate_stock: update_stock,\n\t\t\t\t\t\t\tconversion_rate: me.frm.doc.conversion_rate,\n\t\t\t\t\t\t\tprice_list: me.frm.doc.selling_price_list || me.frm.doc.buying_price_list,\n\t\t\t\t\t\t\tprice_list_currency: me.frm.doc.price_list_currency,\n\t\t\t\t\t\t\tplc_conversion_rate: me.frm.doc.plc_conversion_rate,\n\t\t\t\t\t\t\tcompany: me.frm.doc.company,\n\t\t\t\t\t\t\torder_type: me.frm.doc.order_type,\n\t\t\t\t\t\t\tis_pos: cint(me.frm.doc.is_pos),\n\t\t\t\t\t\t\tis_return: cint(me.frm.doc.is_return),\n\t\t\t\t\t\t\tis_subcontracted: me.frm.doc.is_subcontracted,\n\t\t\t\t\t\t\ttransaction_date: me.frm.doc.transaction_date || me.frm.doc.posting_date,\n\t\t\t\t\t\t\tignore_pricing_rule: me.frm.doc.ignore_pricing_rule,\n\t\t\t\t\t\t\tdoctype: me.frm.doc.doctype,\n\t\t\t\t\t\t\tname: me.frm.doc.name,\n\t\t\t\t\t\t\tproject: item.project || me.frm.doc.project,\n\t\t\t\t\t\t\tqty: item.qty || 1,\n\t\t\t\t\t\t\tnet_rate: item.rate,\n\t\t\t\t\t\t\tstock_qty: item.stock_qty,\n\t\t\t\t\t\t\tconversion_factor: item.conversion_factor,\n\t\t\t\t\t\t\tweight_per_unit: item.weight_per_unit,\n\t\t\t\t\t\t\tweight_uom: item.weight_uom,\n\t\t\t\t\t\t\tmanufacturer: item.manufacturer,\n\t\t\t\t\t\t\tstock_uom: item.stock_uom,\n\t\t\t\t\t\t\tpos_profile: cint(me.frm.doc.is_pos) ? me.frm.doc.pos_profile : '',\n\t\t\t\t\t\t\tcost_center: item.cost_center,\n\t\t\t\t\t\t\ttax_category: me.frm.doc.tax_category,\n\t\t\t\t\t\t\titem_tax_template: item.item_tax_template,\n\t\t\t\t\t\t\tchild_docname: item.name\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\t\tfrappe.run_serially([\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tvar d = locals[cdt][cdn];\n\t\t\t\t\t\t\t\t\tme.add_taxes_from_item_tax_template(d.item_tax_rate);\n\t\t\t\t\t\t\t\t\tif (d.free_item_data) {\n\t\t\t\t\t\t\t\t\t\tme.apply_product_discount(d);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t// for internal customer instead of pricing rule directly apply valuation rate on item\n\t\t\t\t\t\t\t\t\tif (me.frm.doc.is_internal_customer || me.frm.doc.is_internal_supplier) {\n\t\t\t\t\t\t\t\t\t\tme.get_incoming_rate(item, me.frm.posting_date, me.frm.posting_time,\n\t\t\t\t\t\t\t\t\t\t\tme.frm.doc.doctype, me.frm.doc.company);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tme.frm.script_manager.trigger(\"price_list_rate\", cdt, cdn);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tif (me.frm.doc.is_internal_customer || me.frm.doc.is_internal_supplier) {\n\t\t\t\t\t\t\t\t\t\tme.calculate_taxes_and_totals();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t() => me.toggle_conversion_factor(item),\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tif (show_batch_dialog)\n\t\t\t\t\t\t\t\t\t\treturn frappe.db.get_value(\"Item\", item.item_code, [\"has_batch_no\", \"has_serial_no\"])\n\t\t\t\t\t\t\t\t\t\t\t.then((r) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (r.message &&\n\t\t\t\t\t\t\t\t\t\t\t\t(r.message.has_batch_no || r.message.has_serial_no)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfrappe.flags.hide_serial_batch_dialog = false;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t// check if batch serial selector is disabled or not\n\t\t\t\t\t\t\t\t\tif (show_batch_dialog && !frappe.flags.hide_serial_batch_dialog)\n\t\t\t\t\t\t\t\t\t\treturn frappe.db.get_single_value('Stock Settings', 'disable_serial_no_and_batch_selector')\n\t\t\t\t\t\t\t\t\t\t\t.then((value) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfrappe.flags.hide_serial_batch_dialog = true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tif(show_batch_dialog && !frappe.flags.hide_serial_batch_dialog) {\n\t\t\t\t\t\t\t\t\t\tvar d = locals[cdt][cdn];\n\t\t\t\t\t\t\t\t\t\t$.each(r.message, function(k, v) {\n\t\t\t\t\t\t\t\t\t\t\tif(!d[k]) d[k] = v;\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tif (d.has_batch_no && d.has_serial_no) {\n\t\t\t\t\t\t\t\t\t\t\td.batch_no = undefined;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\terpnext.show_serial_batch_selector(me.frm, d, (item) => {\n\t\t\t\t\t\t\t\t\t\t\tme.frm.script_manager.trigger('qty', item.doctype, item.name);\n\t\t\t\t\t\t\t\t\t\t\tif (!me.frm.doc.set_warehouse)\n\t\t\t\t\t\t\t\t\t\t\t\tme.frm.script_manager.trigger('warehouse', item.doctype, item.name);\n\t\t\t\t\t\t\t\t\t\t\tme.apply_price_list(item, true);\n\t\t\t\t\t\t\t\t\t\t}, undefined, !frappe.flags.hide_serial_batch_dialog);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t() => me.conversion_factor(doc, cdt, cdn, true),\n\t\t\t\t\t\t\t\t() => me.remove_pricing_rule(item),\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tif (item.apply_rule_on_other_items) {\n\t\t\t\t\t\t\t\t\t\tlet key = item.name;\n\t\t\t\t\t\t\t\t\t\tme.apply_rule_on_other_items({key: item});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tvar company_currency = me.get_company_currency();\n\t\t\t\t\t\t\t\t\tme.update_item_grid_labels(company_currency);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\tprice_list_rate: function(doc, cdt, cdn) {\n\t\tvar item = frappe.get_doc(cdt, cdn);\n\t\tfrappe.model.round_floats_in(item, [\"price_list_rate\", \"discount_percentage\"]);\n\n\t\t// check if child doctype is Sales Order Item/Quotation Item and calculate the rate\n\t\tif (in_list([\"Quotation Item\", \"Sales Order Item\", \"Delivery Note Item\", \"Sales Invoice Item\", \"POS Invoice Item\", \"Purchase Invoice Item\", \"Purchase Order Item\", \"Purchase Receipt Item\"]), cdt)\n\t\t\tthis.apply_pricing_rule_on_item(item);\n\t\telse\n\t\t\titem.rate = flt(item.price_list_rate * (1 - item.discount_percentage / 100.0),\n\t\t\t\tprecision(\"rate\", item));\n\n\t\tthis.calculate_taxes_and_totals();\n\t},\n\n\tmargin_rate_or_amount: function(doc, cdt, cdn) {\n\t\t// calculated the revised total margin and rate on margin rate changes\n\t\tlet item = frappe.get_doc(cdt, cdn);\n\t\tthis.apply_pricing_rule_on_item(item);\n\t\tthis.calculate_taxes_and_totals();\n\t\tcur_frm.refresh_fields();\n\t},\n\n\tmargin_type: function(doc, cdt, cdn) {\n\t\t// calculate the revised total margin and rate on margin type changes\n\t\tlet item = frappe.get_doc(cdt, cdn);\n\t\tif (!item.margin_type) {\n\t\t\tfrappe.model.set_value(cdt, cdn, \"margin_rate_or_amount\", 0);\n\t\t} else {\n\t\t\tthis.apply_pricing_rule_on_item(item, doc, cdt, cdn);\n\t\t\tthis.calculate_taxes_and_totals();\n\t\t\tcur_frm.refresh_fields();\n\t\t}\n\t},\n\n\tget_incoming_rate: function(item, posting_date, posting_time, voucher_type, company) {\n\n\t\tlet item_args = {\n\t\t\t'item_code': item.item_code,\n\t\t\t'warehouse': in_list('Purchase Receipt', 'Purchase Invoice') ? item.from_warehouse : item.warehouse,\n\t\t\t'posting_date': posting_date,\n\t\t\t'posting_time': posting_time,\n\t\t\t'qty': item.qty * item.conversion_factor,\n\t\t\t'serial_no': item.serial_no,\n\t\t\t'voucher_type': voucher_type,\n\t\t\t'company': company,\n\t\t\t'allow_zero_valuation_rate': item.allow_zero_valuation_rate\n\t\t}\n\n\t\tfrappe.call({\n\t\t\tmethod: 'erpnext.stock.utils.get_incoming_rate',\n\t\t\targs: {\n\t\t\t\targs: item_args\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tfrappe.model.set_value(item.doctype, item.name, 'rate', r.message * item.conversion_factor);\n\t\t\t}\n\t\t});\n\t},\n\n\tserial_no: function(doc, cdt, cdn) {\n\t\tvar me = this;\n\t\tvar item = frappe.get_doc(cdt, cdn);\n\n\t\tif (item && item.doctype === 'Purchase Receipt Item Supplied') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (item && item.serial_no) {\n\t\t\tif (!item.item_code) {\n\t\t\t\tthis.frm.trigger(\"item_code\", cdt, cdn);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Replace all occurences of comma with line feed\n\t\t\t\titem.serial_no = item.serial_no.replace(/,/g, '\\n');\n\t\t\t\titem.conversion_factor = item.conversion_factor || 1;\n\t\t\t\trefresh_field(\"serial_no\", item.name, item.parentfield);\n\t\t\t\tif (!doc.is_return && cint(frappe.user_defaults.set_qty_in_transactions_based_on_serial_no_input)) {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tme.update_qty(cdt, cdn);\n\t\t\t\t\t}, 10000);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tupdate_qty: function(cdt, cdn) {\n\t\tvar valid_serial_nos = [];\n\t\tvar serialnos = [];\n\t\tvar item = frappe.get_doc(cdt, cdn);\n\t\tserialnos = item.serial_no.split(\"\\n\");\n\t\tfor (var i = 0; i < serialnos.length; i++) {\n\t\t\tif (serialnos[i] != \"\") {\n\t\t\t\tvalid_serial_nos.push(serialnos[i]);\n\t\t\t}\n\t\t}\n\t\tfrappe.model.set_value(item.doctype, item.name,\n\t\t\t\"qty\", valid_serial_nos.length / item.conversion_factor);\n\t\tfrappe.model.set_value(item.doctype, item.name, \"stock_qty\", valid_serial_nos.length);\n\t},\n\n\tvalidate: function() {\n\t\tthis.calculate_taxes_and_totals(false);\n\t},\n\n\tupdate_stock: function() {\n\t\tthis.frm.trigger('set_default_internal_warehouse');\n\t},\n\n\tset_default_internal_warehouse: function() {\n\t\tlet me = this;\n\t\tif ((this.frm.doc.doctype === 'Sales Invoice' && me.frm.doc.update_stock)\n\t\t\t|| this.frm.doc.doctype == 'Delivery Note') {\n\t\t\tif (this.frm.doc.is_internal_customer && this.frm.doc.company === this.frm.doc.represents_company) {\n\t\t\t\tfrappe.db.get_value('Company', this.frm.doc.company, 'default_in_transit_warehouse', function(value) {\n\t\t\t\t\tme.frm.set_value('set_target_warehouse', value.default_in_transit_warehouse);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif ((this.frm.doc.doctype === 'Purchase Invoice' && me.frm.doc.update_stock)\n\t\t\t|| this.frm.doc.doctype == 'Purchase Receipt') {\n\t\t\tif (this.frm.doc.is_internal_supplier && this.frm.doc.company === this.frm.doc.represents_company) {\n\t\t\t\tfrappe.db.get_value('Company', this.frm.doc.company, 'default_in_transit_warehouse', function(value) {\n\t\t\t\t\tme.frm.set_value('set_from_warehouse', value.default_in_transit_warehouse);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\tcompany: function() {\n\t\tvar me = this;\n\t\tvar set_pricing = function() {\n\t\t\tif(me.frm.doc.company && me.frm.fields_dict.currency) {\n\t\t\t\tvar company_currency = me.get_company_currency();\n\t\t\t\tvar company_doc = frappe.get_doc(\":Company\", me.frm.doc.company);\n\n\t\t\t\tif (!me.frm.doc.currency) {\n\t\t\t\t\tme.frm.set_value(\"currency\", company_currency);\n\t\t\t\t}\n\n\t\t\t\tif (me.frm.doc.currency == company_currency) {\n\t\t\t\t\tme.frm.set_value(\"conversion_rate\", 1.0);\n\t\t\t\t}\n\t\t\t\tif (me.frm.doc.price_list_currency == company_currency) {\n\t\t\t\t\tme.frm.set_value('plc_conversion_rate', 1.0);\n\t\t\t\t}\n\t\t\t\tif (company_doc.default_letter_head) {\n\t\t\t\t\tif(me.frm.fields_dict.letter_head) {\n\t\t\t\t\t\tme.frm.set_value(\"letter_head\", company_doc.default_letter_head);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet selling_doctypes_for_tc = [\"Sales Invoice\", \"Quotation\", \"Sales Order\", \"Delivery Note\"];\n\t\t\t\tif (company_doc.default_selling_terms && frappe.meta.has_field(me.frm.doc.doctype, \"tc_name\") &&\n\t\t\t\tselling_doctypes_for_tc.indexOf(me.frm.doc.doctype) != -1) {\n\t\t\t\t\tme.frm.set_value(\"tc_name\", company_doc.default_selling_terms);\n\t\t\t\t}\n\t\t\t\tlet buying_doctypes_for_tc = [\"Request for Quotation\", \"Supplier Quotation\", \"Purchase Order\",\n\t\t\t\t\t\"Material Request\", \"Purchase Receipt\"];\n\t\t\t\t// Purchase Invoice is excluded as per issue #3345\n\t\t\t\tif (company_doc.default_buying_terms && frappe.meta.has_field(me.frm.doc.doctype, \"tc_name\") &&\n\t\t\t\tbuying_doctypes_for_tc.indexOf(me.frm.doc.doctype) != -1) {\n\t\t\t\t\tme.frm.set_value(\"tc_name\", company_doc.default_buying_terms);\n\t\t\t\t}\n\n\t\t\t\tfrappe.run_serially([\n\t\t\t\t\t() => me.frm.script_manager.trigger(\"currency\"),\n\t\t\t\t\t() => me.update_item_tax_map(),\n\t\t\t\t\t() => me.apply_default_taxes(),\n\t\t\t\t\t() => me.apply_pricing_rule()\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\n\t\tvar set_party_account = function(set_pricing) {\n\t\t\tif (in_list([\"Sales Invoice\", \"Purchase Invoice\"], me.frm.doc.doctype)) {\n\t\t\t\tif(me.frm.doc.doctype==\"Sales Invoice\") {\n\t\t\t\t\tvar party_type = \"Customer\";\n\t\t\t\t\tvar party_account_field = 'debit_to';\n\t\t\t\t} else {\n\t\t\t\t\tvar party_type = \"Supplier\";\n\t\t\t\t\tvar party_account_field = 'credit_to';\n\t\t\t\t}\n\n\t\t\t\tvar party = me.frm.doc[frappe.model.scrub(party_type)];\n\t\t\t\tif(party && me.frm.doc.company) {\n\t\t\t\t\treturn frappe.call({\n\t\t\t\t\t\tmethod: \"erpnext.accounts.party.get_party_account\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tcompany: me.frm.doc.company,\n\t\t\t\t\t\t\tparty_type: party_type,\n\t\t\t\t\t\t\tparty: party\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tif(!r.exc && r.message) {\n\t\t\t\t\t\t\t\tme.frm.set_value(party_account_field, r.message);\n\t\t\t\t\t\t\t\tset_pricing();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tset_pricing();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tset_pricing();\n\t\t\t}\n\n\t\t}\n\n\t\tif (frappe.meta.get_docfield(this.frm.doctype, \"shipping_address\") &&\n\t\t\tin_list(['Purchase Order', 'Purchase Receipt', 'Purchase Invoice'], this.frm.doctype)) {\n\t\t\terpnext.utils.get_shipping_address(this.frm, function() {\n\t\t\t\tset_party_account(set_pricing);\n\t\t\t});\n\n\t\t\t// Get default company billing address in Purchase Invoice, Order and Receipt\n\t\t\tif (this.frm.doc.company && frappe.meta.get_docfield(this.frm.doctype, \"billing_address\")) {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"erpnext.setup.doctype.company.company.get_default_company_address\",\n\t\t\t\t\targs: {name: this.frm.doc.company, existing_address: this.frm.doc.billing_address || \"\"},\n\t\t\t\t\tdebounce: 2000,\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\tme.frm.set_value(\"billing_address\", r.message);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (frappe.meta.get_docfield(me.frm.doctype, 'company_address')) {\n\t\t\t\t\t\t\t\tme.frm.set_value(\"company_address\", \"\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\tset_party_account(set_pricing);\n\t\t}\n\n\t\tif(this.frm.doc.company) {\n\t\t\terpnext.last_selected_company = this.frm.doc.company;\n\t\t}\n\t},\n\n\ttransaction_date: function() {\n\t\tif (this.frm.doc.transaction_date) {\n\t\t\tthis.frm.transaction_date = this.frm.doc.transaction_date;\n\t\t\tfrappe.ui.form.trigger(this.frm.doc.doctype, \"currency\");\n\t\t}\n\t},\n\n\tposting_date: function() {\n\t\tvar me = this;\n\t\tif (this.frm.doc.posting_date) {\n\t\t\tthis.frm.posting_date = this.frm.doc.posting_date;\n\n\t\t\tif ((this.frm.doc.doctype == \"Sales Invoice\" && this.frm.doc.customer) ||\n\t\t\t\t(this.frm.doc.doctype == \"Purchase Invoice\" && this.frm.doc.supplier)) {\n\t\t\t\treturn frappe.call({\n\t\t\t\t\tmethod: \"erpnext.accounts.party.get_due_date\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\t\"posting_date\": me.frm.doc.posting_date,\n\t\t\t\t\t\t\"party_type\": me.frm.doc.doctype == \"Sales Invoice\" ? \"Customer\" : \"Supplier\",\n\t\t\t\t\t\t\"bill_date\": me.frm.doc.bill_date,\n\t\t\t\t\t\t\"party\": me.frm.doc.doctype == \"Sales Invoice\" ? me.frm.doc.customer : me.frm.doc.supplier,\n\t\t\t\t\t\t\"company\": me.frm.doc.company\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function(r, rt) {\n\t\t\t\t\t\tif(r.message) {\n\t\t\t\t\t\t\tme.frm.doc.due_date = r.message;\n\t\t\t\t\t\t\trefresh_field(\"due_date\");\n\t\t\t\t\t\t\tfrappe.ui.form.trigger(me.frm.doc.doctype, \"currency\");\n\t\t\t\t\t\t\tme.recalculate_terms();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tfrappe.ui.form.trigger(me.frm.doc.doctype, \"currency\");\n\t\t\t}\n\t\t}\n\t},\n\n\tdue_date: function() {\n\t\t// due_date is to be changed, payment terms template and/or payment schedule must\n\t\t// be removed as due_date is automatically changed based on payment terms\n\t\tif (this.frm.doc.due_date && !this.frm.updating_party_details && !this.frm.doc.is_pos) {\n\t\t\tif (this.frm.doc.payment_terms_template ||\n\t\t\t\t(this.frm.doc.payment_schedule && this.frm.doc.payment_schedule.length)) {\n\t\t\t\tvar message1 = \"\";\n\t\t\t\tvar message2 = \"\";\n\t\t\t\tvar final_message = __(\"Please clear the\") + \" \";\n\n\t\t\t\tif (this.frm.doc.payment_terms_template) {\n\t\t\t\t\tmessage1 = __(\"selected Payment Terms Template\");\n\t\t\t\t\tfinal_message = final_message + message1;\n\t\t\t\t}\n\n\t\t\t\tif ((this.frm.doc.payment_schedule || []).length) {\n\t\t\t\t\tmessage2 = __(\"Payment Schedule Table\");\n\t\t\t\t\tif (message1.length !== 0) message2 = \" and \" + message2;\n\t\t\t\t\tfinal_message = final_message + message2;\n\t\t\t\t}\n\t\t\t\tfrappe.msgprint(final_message);\n\t\t\t}\n\t\t}\n\t},\n\n\tbill_date: function() {\n\t\tthis.posting_date();\n\t},\n\n\trecalculate_terms: function() {\n\t\tconst doc = this.frm.doc;\n\t\tif (doc.payment_terms_template) {\n\t\t\tthis.payment_terms_template();\n\t\t} else if (doc.payment_schedule) {\n\t\t\tconst me = this;\n\t\t\tdoc.payment_schedule.forEach(\n\t\t\t\tfunction(term) {\n\t\t\t\t\tif (term.payment_term) {\n\t\t\t\t\t\tme.payment_term(doc, term.doctype, term.name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.model.set_value(\n\t\t\t\t\t\t\tterm.doctype, term.name, 'due_date',\n\t\t\t\t\t\t\tdoc.posting_date || doc.transaction_date\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\n\tget_company_currency: function() {\n\t\treturn erpnext.get_currency(this.frm.doc.company);\n\t},\n\n\tcontact_person: function() {\n\t\terpnext.utils.get_contact_details(this.frm);\n\t},\n\n\tcurrency: function() {\n\t\t/* manqala 19/09/2016: let the translation date be whichever of the transaction_date or posting_date is available */\n\t\tvar transaction_date = this.frm.doc.transaction_date || this.frm.doc.posting_date;\n\t\t/* end manqala */\n\t\tvar me = this;\n\t\tthis.set_dynamic_labels();\n\t\tvar company_currency = this.get_company_currency();\n\t\t// Added `ignore_pricing_rule` to determine if document is loading after mapping from another doc\n\t\tif(this.frm.doc.currency && this.frm.doc.currency !== company_currency\n\t\t\t\t&& !this.frm.doc.ignore_pricing_rule) {\n\n\t\t\tthis.get_exchange_rate(transaction_date, this.frm.doc.currency, company_currency,\n\t\t\t\tfunction(exchange_rate) {\n\t\t\t\t\tif(exchange_rate != me.frm.doc.conversion_rate) {\n\t\t\t\t\t\tme.set_margin_amount_based_on_currency(exchange_rate);\n\t\t\t\t\t\tme.set_actual_charges_based_on_currency(exchange_rate);\n\t\t\t\t\t\tme.frm.set_value(\"conversion_rate\", exchange_rate);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.conversion_rate();\n\t\t}\n\t},\n\n\tconversion_rate: function() {\n\t\tconst me = this.frm;\n\t\tif(this.frm.doc.currency === this.get_company_currency()) {\n\t\t\tthis.frm.set_value(\"conversion_rate\", 1.0);\n\t\t}\n\t\tif(this.frm.doc.currency === this.frm.doc.price_list_currency &&\n\t\t\tthis.frm.doc.plc_conversion_rate !== this.frm.doc.conversion_rate) {\n\t\t\tthis.frm.set_value(\"plc_conversion_rate\", this.frm.doc.conversion_rate);\n\t\t}\n\n\t\tif(flt(this.frm.doc.conversion_rate)>0.0) {\n\t\t\tif(this.frm.doc.ignore_pricing_rule) {\n\t\t\t\tthis.calculate_taxes_and_totals();\n\t\t\t} else if (!this.in_apply_price_list){\n\t\t\t\tthis.apply_price_list();\n\t\t\t}\n\n\t\t}\n\t\t// Make read only if Accounts Settings doesn't allow stale rates\n\t\tthis.frm.set_df_property(\"conversion_rate\", \"read_only\", erpnext.stale_rate_allowed() ? 0 : 1);\n\t},\n\n\tshipping_rule: function() {\n\t\tvar me = this;\n\t\tif(this.frm.doc.shipping_rule) {\n\t\t\treturn this.frm.call({\n\t\t\t\tdoc: this.frm.doc,\n\t\t\t\tmethod: \"apply_shipping_rule\",\n\t\t\t}).fail(() => this.frm.set_value('shipping_rule', ''));\n\t\t}\n\t},\n\n\tset_margin_amount_based_on_currency: function(exchange_rate) {\n\t\tif (in_list([\"Quotation\", \"Sales Order\", \"Delivery Note\", \"Sales Invoice\", \"Purchase Invoice\", \"Purchase Order\", \"Purchase Receipt\"]), this.frm.doc.doctype) {\n\t\t\tvar me = this;\n\t\t\t$.each(this.frm.doc.items || [], function(i, d) {\n\t\t\t\tif(d.margin_type == \"Amount\") {\n\t\t\t\t\tfrappe.model.set_value(d.doctype, d.name, \"margin_rate_or_amount\",\n\t\t\t\t\t\tflt(d.margin_rate_or_amount) / flt(exchange_rate));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tset_actual_charges_based_on_currency: function(exchange_rate) {\n\t\tvar me = this;\n\t\t$.each(this.frm.doc.taxes || [], function(i, d) {\n\t\t\tif(d.charge_type == \"Actual\") {\n\t\t\t\tfrappe.model.set_value(d.doctype, d.name, \"tax_amount\",\n\t\t\t\t\tflt(d.base_tax_amount) / flt(exchange_rate));\n\t\t\t}\n\t\t});\n\t},\n\n\tget_exchange_rate: function(transaction_date, from_currency, to_currency, callback) {\n\t\tvar args;\n\t\tif ([\"Quotation\", \"Sales Order\", \"Delivery Note\", \"Sales Invoice\"].includes(this.frm.doctype)) {\n\t\t\targs = \"for_selling\";\n\t\t}\n\t\telse if ([\"Purchase Order\", \"Purchase Receipt\", \"Purchase Invoice\"].includes(this.frm.doctype)) {\n\t\t\targs = \"for_buying\";\n\t\t}\n\n\t\tif (!transaction_date || !from_currency || !to_currency) return;\n\t\treturn frappe.call({\n\t\t\tmethod: \"erpnext.setup.utils.get_exchange_rate\",\n\t\t\targs: {\n\t\t\t\ttransaction_date: transaction_date,\n\t\t\t\tfrom_currency: from_currency,\n\t\t\t\tto_currency: to_currency,\n\t\t\t\targs: args\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t\tfreeze_message: __(\"Fetching exchange rates ...\"),\n\t\t\tcallback: function(r) {\n\t\t\t\tcallback(flt(r.message));\n\t\t\t}\n\t\t});\n\t},\n\n\tprice_list_currency: function() {\n\t\tvar me=this;\n\t\tthis.set_dynamic_labels();\n\n\t\tvar company_currency = this.get_company_currency();\n\t\t// Added `ignore_pricing_rule` to determine if document is loading after mapping from another doc\n\t\tif(this.frm.doc.price_list_currency !== company_currency  && !this.frm.doc.ignore_pricing_rule) {\n\t\t\tthis.get_exchange_rate(this.frm.doc.posting_date, this.frm.doc.price_list_currency, company_currency,\n\t\t\t\tfunction(exchange_rate) {\n\t\t\t\t\tme.frm.set_value(\"plc_conversion_rate\", exchange_rate);\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.plc_conversion_rate();\n\t\t}\n\t},\n\n\tplc_conversion_rate: function() {\n\t\tif(this.frm.doc.price_list_currency === this.get_company_currency()) {\n\t\t\tthis.frm.set_value(\"plc_conversion_rate\", 1.0);\n\t\t} else if(this.frm.doc.price_list_currency === this.frm.doc.currency\n\t\t\t&& this.frm.doc.plc_conversion_rate && cint(this.frm.doc.plc_conversion_rate) != 1 &&\n\t\t\tcint(this.frm.doc.plc_conversion_rate) != cint(this.frm.doc.conversion_rate)) {\n\t\t\tthis.frm.set_value(\"conversion_rate\", this.frm.doc.plc_conversion_rate);\n\t\t}\n\n\t\tif(!this.in_apply_price_list) {\n\t\t\tthis.apply_price_list(null, true);\n\t\t}\n\t},\n\n\tuom: function(doc, cdt, cdn) {\n\t\tvar me = this;\n\t\tvar item = frappe.get_doc(cdt, cdn);\n\t\tif(item.item_code && item.uom) {\n\t\t\treturn this.frm.call({\n\t\t\t\tmethod: \"erpnext.stock.get_item_details.get_conversion_factor\",\n\t\t\t\targs: {\n\t\t\t\t\titem_code: item.item_code,\n\t\t\t\t\tuom: item.uom\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tfrappe.model.set_value(cdt, cdn, 'conversion_factor', r.message.conversion_factor);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tme.calculate_stock_uom_rate(doc, cdt, cdn);\n\t},\n\n\tconversion_factor: function(doc, cdt, cdn, dont_fetch_price_list_rate) {\n\t\tif(frappe.meta.get_docfield(cdt, \"stock_qty\", cdn)) {\n\t\t\tvar item = frappe.get_doc(cdt, cdn);\n\t\t\tfrappe.model.round_floats_in(item, [\"qty\", \"conversion_factor\"]);\n\t\t\titem.stock_qty = flt(item.qty * item.conversion_factor, precision(\"stock_qty\", item));\n\t\t\trefresh_field(\"stock_qty\", item.name, item.parentfield);\n\t\t\tthis.toggle_conversion_factor(item);\n\n\t\t\tif(doc.doctype != \"Material Request\") {\n\t\t\t\titem.total_weight = flt(item.stock_qty * item.weight_per_unit);\n\t\t\t\trefresh_field(\"total_weight\", item.name, item.parentfield);\n\t\t\t\tthis.calculate_net_weight();\n\t\t\t}\n\n\t\t\t// for handling customization not to fetch price list rate\n\t\t\tif(frappe.flags.dont_fetch_price_list_rate) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!dont_fetch_price_list_rate &&\n\t\t\t\tfrappe.meta.has_field(doc.doctype, \"price_list_currency\")) {\n\t\t\t\tthis.apply_price_list(item, true);\n\t\t\t}\n\t\t\tthis.calculate_stock_uom_rate(doc, cdt, cdn);\n\t\t}\n\t},\n\n\tbatch_no: function(doc, cdt, cdn) {\n\t\tlet item = frappe.get_doc(cdt, cdn);\n\t\tthis.apply_price_list(item, true);\n\t},\n\n\ttoggle_conversion_factor: function(item) {\n\t\t// toggle read only property for conversion factor field if the uom and stock uom are same\n\t\tif(this.frm.get_field('items').grid.fields_map.conversion_factor) {\n\t\t\tthis.frm.fields_dict.items.grid.toggle_enable(\"conversion_factor\",\n\t\t\t\t((item.uom != item.stock_uom) && !frappe.meta.get_docfield(cur_frm.fields_dict.items.grid.doctype, \"conversion_factor\").read_only)? true: false);\n\t\t}\n\n\t},\n\n\tqty: function(doc, cdt, cdn) {\n\t\tlet item = frappe.get_doc(cdt, cdn);\n\t\tthis.conversion_factor(doc, cdt, cdn, true);\n\t\tthis.calculate_stock_uom_rate(doc, cdt, cdn);\n\t\tthis.apply_pricing_rule(item, true);\n\t},\n\n\tcalculate_stock_uom_rate: function(doc, cdt, cdn) {\n\t\tlet item = frappe.get_doc(cdt, cdn);\n\t\titem.stock_uom_rate = flt(item.rate)/flt(item.conversion_factor);\n\t\trefresh_field(\"stock_uom_rate\", item.name, item.parentfield);\n\t},\n\tservice_stop_date: function(frm, cdt, cdn) {\n\t\tvar child = locals[cdt][cdn];\n\n\t\tif(child.service_stop_date) {\n\t\t\tlet start_date = Date.parse(child.service_start_date);\n\t\t\tlet end_date = Date.parse(child.service_end_date);\n\t\t\tlet stop_date = Date.parse(child.service_stop_date);\n\n\t\t\tif(stop_date < start_date) {\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"service_stop_date\", \"\");\n\t\t\t\tfrappe.throw(__(\"Service Stop Date cannot be before Service Start Date\"));\n\t\t\t} else if (stop_date > end_date) {\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"service_stop_date\", \"\");\n\t\t\t\tfrappe.throw(__(\"Service Stop Date cannot be after Service End Date\"));\n\t\t\t}\n\t\t}\n\t},\n\n\tservice_start_date: function(frm, cdt, cdn) {\n\t\tvar child = locals[cdt][cdn];\n\n\t\tif(child.service_start_date) {\n\t\t\tfrappe.call({\n\t\t\t\t\"method\": \"erpnext.stock.get_item_details.calculate_service_end_date\",\n\t\t\t\targs: {\"args\": child},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"service_end_date\", r.message.service_end_date);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t},\n\n\tcalculate_net_weight: function(){\n\t\t/* Calculate Total Net Weight then further applied shipping rule to calculate shipping charges.*/\n\t\tvar me = this;\n\t\tthis.frm.doc.total_net_weight= 0.0;\n\n\t\t$.each(this.frm.doc[\"items\"] || [], function(i, item) {\n\t\t\tme.frm.doc.total_net_weight += flt(item.total_weight);\n\t\t});\n\t\trefresh_field(\"total_net_weight\");\n\t\tthis.shipping_rule();\n\t},\n\n\tset_dynamic_labels: function() {\n\t\t// What TODO? should we make price list system non-mandatory?\n\t\tthis.frm.toggle_reqd(\"plc_conversion_rate\",\n\t\t\t!!(this.frm.doc.price_list_name && this.frm.doc.price_list_currency));\n\n\t\tvar company_currency = this.get_company_currency();\n\t\tthis.change_form_labels(company_currency);\n\t\tthis.change_grid_labels(company_currency);\n\t\tthis.frm.refresh_fields();\n\t},\n\n\tchange_form_labels: function(company_currency) {\n\t\tvar me = this;\n\n\t\tthis.frm.set_currency_labels([\"base_total\", \"base_net_total\", \"base_total_taxes_and_charges\",\n\t\t\t\"base_discount_amount\", \"base_grand_total\", \"base_rounded_total\", \"base_in_words\",\n\t\t\t\"base_taxes_and_charges_added\", \"base_taxes_and_charges_deducted\", \"total_amount_to_pay\",\n\t\t\t\"base_paid_amount\", \"base_write_off_amount\", \"base_change_amount\", \"base_operating_cost\",\n\t\t\t\"base_raw_material_cost\", \"base_total_cost\", \"base_scrap_material_cost\",\n\t\t\t\"base_rounding_adjustment\"], company_currency);\n\n\t\tthis.frm.set_currency_labels([\"total\", \"net_total\", \"total_taxes_and_charges\", \"discount_amount\",\n\t\t\t\"grand_total\", \"taxes_and_charges_added\", \"taxes_and_charges_deducted\",\n\t\t\t\"rounded_total\", \"in_words\", \"paid_amount\", \"write_off_amount\", \"operating_cost\",\n\t\t\t\"scrap_material_cost\", \"rounding_adjustment\", \"raw_material_cost\",\n\t\t\t\"total_cost\"], this.frm.doc.currency);\n\n\t\tthis.frm.set_currency_labels([\"outstanding_amount\", \"total_advance\"],\n\t\t\tthis.frm.doc.party_account_currency);\n\n\t\tcur_frm.set_df_property(\"conversion_rate\", \"description\", \"1 \" + this.frm.doc.currency\n\t\t\t+ \" = [?] \" + company_currency);\n\n\t\tif(this.frm.doc.price_list_currency && this.frm.doc.price_list_currency!=company_currency) {\n\t\t\tcur_frm.set_df_property(\"plc_conversion_rate\", \"description\", \"1 \"\n\t\t\t\t+ this.frm.doc.price_list_currency + \" = [?] \" + company_currency);\n\t\t}\n\n\t\t// toggle fields\n\t\tthis.frm.toggle_display([\"conversion_rate\", \"base_total\", \"base_net_total\",\n\t\t\t\"base_total_taxes_and_charges\", \"base_taxes_and_charges_added\", \"base_taxes_and_charges_deducted\",\n\t\t\t\"base_grand_total\", \"base_rounded_total\", \"base_in_words\", \"base_discount_amount\",\n\t\t\t\"base_paid_amount\", \"base_write_off_amount\", \"base_operating_cost\", \"base_raw_material_cost\",\n\t\t\t\"base_total_cost\", \"base_scrap_material_cost\", \"base_rounding_adjustment\"],\n\t\tthis.frm.doc.currency != company_currency);\n\n\t\tthis.frm.toggle_display([\"plc_conversion_rate\", \"price_list_currency\"],\n\t\t\tthis.frm.doc.price_list_currency != company_currency);\n\n\t\tvar show = cint(cur_frm.doc.discount_amount) ||\n\t\t\t\t((cur_frm.doc.taxes || []).filter(function(d) {return d.included_in_print_rate===1}).length);\n\n\t\tif(frappe.meta.get_docfield(cur_frm.doctype, \"net_total\"))\n\t\t\tcur_frm.toggle_display(\"net_total\", show);\n\n\t\tif(frappe.meta.get_docfield(cur_frm.doctype, \"base_net_total\"))\n\t\t\tcur_frm.toggle_display(\"base_net_total\", (show && (me.frm.doc.currency != company_currency)));\n\n\t},\n\n\tchange_grid_labels: function(company_currency) {\n\t\tvar me = this;\n\n\t\tthis.update_item_grid_labels(company_currency);\n\n\t\tthis.toggle_item_grid_columns(company_currency);\n\n\t\tif (this.frm.doc.operations && this.frm.doc.operations.length > 0) {\n\t\t\tthis.frm.set_currency_labels([\"operating_cost\", \"hour_rate\"], this.frm.doc.currency, \"operations\");\n\t\t\tthis.frm.set_currency_labels([\"base_operating_cost\", \"base_hour_rate\"], company_currency, \"operations\");\n\n\t\t\tvar item_grid = this.frm.fields_dict[\"operations\"].grid;\n\t\t\t$.each([\"base_operating_cost\", \"base_hour_rate\"], function(i, fname) {\n\t\t\t\tif(frappe.meta.get_docfield(item_grid.doctype, fname))\n\t\t\t\t\titem_grid.set_column_disp(fname, me.frm.doc.currency != company_currency);\n\t\t\t});\n\t\t}\n\n\t\tif (this.frm.doc.scrap_items && this.frm.doc.scrap_items.length > 0) {\n\t\t\tthis.frm.set_currency_labels([\"rate\", \"amount\"], this.frm.doc.currency, \"scrap_items\");\n\t\t\tthis.frm.set_currency_labels([\"base_rate\", \"base_amount\"], company_currency, \"scrap_items\");\n\n\t\t\tvar item_grid = this.frm.fields_dict[\"scrap_items\"].grid;\n\t\t\t$.each([\"base_rate\", \"base_amount\"], function(i, fname) {\n\t\t\t\tif(frappe.meta.get_docfield(item_grid.doctype, fname))\n\t\t\t\t\titem_grid.set_column_disp(fname, me.frm.doc.currency != company_currency);\n\t\t\t});\n\t\t}\n\n\t\tif (this.frm.doc.taxes && this.frm.doc.taxes.length > 0) {\n\t\t\tthis.frm.set_currency_labels([\"tax_amount\", \"total\", \"tax_amount_after_discount\"], this.frm.doc.currency, \"taxes\");\n\n\t\t\tthis.frm.set_currency_labels([\"base_tax_amount\", \"base_total\", \"base_tax_amount_after_discount\"], company_currency, \"taxes\");\n\t\t}\n\n\t\tif (this.frm.doc.advances && this.frm.doc.advances.length > 0) {\n\t\t\tthis.frm.set_currency_labels([\"advance_amount\", \"allocated_amount\"],\n\t\t\t\tthis.frm.doc.party_account_currency, \"advances\");\n\t\t}\n\n\t\tthis.update_payment_schedule_grid_labels(company_currency);\n\t},\n\n\tupdate_item_grid_labels: function(company_currency) {\n\t\tthis.frm.set_currency_labels([\n\t\t\t\"base_rate\", \"base_net_rate\", \"base_price_list_rate\",\n\t\t\t\"base_amount\", \"base_net_amount\", \"base_rate_with_margin\"\n\t\t], company_currency, \"items\");\n\n\t\tthis.frm.set_currency_labels([\n\t\t\t\"rate\", \"net_rate\", \"price_list_rate\", \"amount\",\n\t\t\t\"net_amount\", \"stock_uom_rate\", \"rate_with_margin\"\n\t\t], this.frm.doc.currency, \"items\");\n\t},\n\n\tupdate_payment_schedule_grid_labels: function(company_currency) {\n\t\tconst me = this;\n\t\tif (this.frm.doc.payment_schedule && this.frm.doc.payment_schedule.length > 0) {\n\t\t\tthis.frm.set_currency_labels([\"base_payment_amount\", \"base_outstanding\", \"base_paid_amount\"],\n\t\t\t\tcompany_currency, \"payment_schedule\");\n\t\t\tthis.frm.set_currency_labels([\"payment_amount\", \"outstanding\", \"paid_amount\"],\n\t\t\t\tthis.frm.doc.currency, \"payment_schedule\");\n\n\t\t\tvar schedule_grid = this.frm.fields_dict[\"payment_schedule\"].grid;\n\t\t\t$.each([\"base_payment_amount\", \"base_outstanding\", \"base_paid_amount\"], function(i, fname) {\n\t\t\t\tif (frappe.meta.get_docfield(schedule_grid.doctype, fname))\n\t\t\t\t\tschedule_grid.set_column_disp(fname, me.frm.doc.currency != company_currency);\n\t\t\t});\n\t\t}\n\t},\n\n\ttoggle_item_grid_columns: function(company_currency) {\n\t\tconst me = this;\n\t\t// toggle columns\n\t\tvar item_grid = this.frm.fields_dict[\"items\"].grid;\n\t\t$.each([\"base_rate\", \"base_price_list_rate\", \"base_amount\", \"base_rate_with_margin\"], function(i, fname) {\n\t\t\tif(frappe.meta.get_docfield(item_grid.doctype, fname))\n\t\t\t\titem_grid.set_column_disp(fname, me.frm.doc.currency != company_currency);\n\t\t});\n\n\t\tvar show = (cint(cur_frm.doc.discount_amount)) ||\n\t\t\t((cur_frm.doc.taxes || []).filter(function(d) {return d.included_in_print_rate===1}).length);\n\n\t\t$.each([\"net_rate\", \"net_amount\"], function(i, fname) {\n\t\t\tif(frappe.meta.get_docfield(item_grid.doctype, fname))\n\t\t\t\titem_grid.set_column_disp(fname, show);\n\t\t});\n\n\t\t$.each([\"base_net_rate\", \"base_net_amount\"], function(i, fname) {\n\t\t\tif(frappe.meta.get_docfield(item_grid.doctype, fname))\n\t\t\t\titem_grid.set_column_disp(fname, (show && (me.frm.doc.currency != company_currency)));\n\t\t});\n\t},\n\n\trecalculate: function() {\n\t\tthis.calculate_taxes_and_totals();\n\t},\n\n\trecalculate_values: function() {\n\t\tthis.calculate_taxes_and_totals();\n\t},\n\n\tcalculate_charges: function() {\n\t\tthis.calculate_taxes_and_totals();\n\t},\n\n\tignore_pricing_rule: function() {\n\t\tif(this.frm.doc.ignore_pricing_rule) {\n\t\t\tvar me = this;\n\t\t\tvar item_list = [];\n\n\t\t\t$.each(this.frm.doc[\"items\"] || [], function(i, d) {\n\t\t\t\tif (d.item_code && !d.is_free_item) {\n\t\t\t\t\titem_list.push({\n\t\t\t\t\t\t\"doctype\": d.doctype,\n\t\t\t\t\t\t\"name\": d.name,\n\t\t\t\t\t\t\"item_code\": d.item_code,\n\t\t\t\t\t\t\"pricing_rules\": d.pricing_rules,\n\t\t\t\t\t\t\"parenttype\": d.parenttype,\n\t\t\t\t\t\t\"parent\": d.parent,\n\t\t\t\t\t\t\"price_list_rate\": d.price_list_rate\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this.frm.call({\n\t\t\t\tmethod: \"erpnext.accounts.doctype.pricing_rule.pricing_rule.remove_pricing_rules\",\n\t\t\t\targs: { item_list: item_list },\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif (!r.exc && r.message) {\n\t\t\t\t\t\tr.message.forEach(row_item => {\n\t\t\t\t\t\t\tme.remove_pricing_rule(row_item);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tme._set_values_for_item_list(r.message);\n\t\t\t\t\t\tme.calculate_taxes_and_totals();\n\t\t\t\t\t\tif(me.frm.doc.apply_discount_on) me.frm.trigger(\"apply_discount_on\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.apply_pricing_rule();\n\t\t}\n\t},\n\n\tapply_pricing_rule: function(item, calculate_taxes_and_totals) {\n\t\tvar me = this;\n\t\tvar args = this._get_args(item);\n\t\tif (!(args.items && args.items.length)) {\n\t\t\tif(calculate_taxes_and_totals) me.calculate_taxes_and_totals();\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.frm.call({\n\t\t\tmethod: \"erpnext.accounts.doctype.pricing_rule.pricing_rule.apply_pricing_rule\",\n\t\t\targs: {\targs: args, doc: me.frm.doc },\n\t\t\tcallback: function(r) {\n\t\t\t\tif (!r.exc && r.message) {\n\t\t\t\t\tme._set_values_for_item_list(r.message);\n\t\t\t\t\tif(item) me.set_gross_profit(item);\n\t\t\t\t\tif(me.frm.doc.apply_discount_on) me.frm.trigger(\"apply_discount_on\")\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t_get_args: function(item) {\n\t\tvar me = this;\n\t\treturn {\n\t\t\t\"items\": this._get_item_list(item),\n\t\t\t\"customer\": me.frm.doc.customer || me.frm.doc.party_name,\n\t\t\t\"quotation_to\": me.frm.doc.quotation_to,\n\t\t\t\"customer_group\": me.frm.doc.customer_group,\n\t\t\t\"territory\": me.frm.doc.territory,\n\t\t\t\"supplier\": me.frm.doc.supplier,\n\t\t\t\"supplier_group\": me.frm.doc.supplier_group,\n\t\t\t\"currency\": me.frm.doc.currency,\n\t\t\t\"conversion_rate\": me.frm.doc.conversion_rate,\n\t\t\t\"price_list\": me.frm.doc.selling_price_list || me.frm.doc.buying_price_list,\n\t\t\t\"price_list_currency\": me.frm.doc.price_list_currency,\n\t\t\t\"plc_conversion_rate\": me.frm.doc.plc_conversion_rate,\n\t\t\t\"company\": me.frm.doc.company,\n\t\t\t\"transaction_date\": me.frm.doc.transaction_date || me.frm.doc.posting_date,\n\t\t\t\"campaign\": me.frm.doc.campaign,\n\t\t\t\"sales_partner\": me.frm.doc.sales_partner,\n\t\t\t\"ignore_pricing_rule\": me.frm.doc.ignore_pricing_rule,\n\t\t\t\"doctype\": me.frm.doc.doctype,\n\t\t\t\"name\": me.frm.doc.name,\n\t\t\t\"is_return\": cint(me.frm.doc.is_return),\n\t\t\t\"update_stock\": in_list(['Sales Invoice', 'Purchase Invoice'], me.frm.doc.doctype) ? cint(me.frm.doc.update_stock) : 0,\n\t\t\t\"conversion_factor\": me.frm.doc.conversion_factor,\n\t\t\t\"pos_profile\": me.frm.doc.doctype == 'Sales Invoice' ? me.frm.doc.pos_profile : '',\n\t\t\t\"coupon_code\": me.frm.doc.coupon_code\n\t\t};\n\t},\n\n\t_get_item_list: function(item) {\n\t\tvar item_list = [];\n\t\tvar append_item = function(d) {\n\t\t\tif (d.item_code) {\n\t\t\t\titem_list.push({\n\t\t\t\t\t\"doctype\": d.doctype,\n\t\t\t\t\t\"name\": d.name,\n\t\t\t\t\t\"child_docname\": d.name,\n\t\t\t\t\t\"item_code\": d.item_code,\n\t\t\t\t\t\"item_group\": d.item_group,\n\t\t\t\t\t\"brand\": d.brand,\n\t\t\t\t\t\"qty\": d.qty,\n\t\t\t\t\t\"stock_qty\": d.stock_qty,\n\t\t\t\t\t\"uom\": d.uom,\n\t\t\t\t\t\"stock_uom\": d.stock_uom,\n\t\t\t\t\t\"parenttype\": d.parenttype,\n\t\t\t\t\t\"parent\": d.parent,\n\t\t\t\t\t\"pricing_rules\": d.pricing_rules,\n\t\t\t\t\t\"warehouse\": d.warehouse,\n\t\t\t\t\t\"serial_no\": d.serial_no,\n\t\t\t\t\t\"batch_no\": d.batch_no,\n\t\t\t\t\t\"price_list_rate\": d.price_list_rate,\n\t\t\t\t\t\"conversion_factor\": d.conversion_factor || 1.0\n\t\t\t\t});\n\n\t\t\t\t// if doctype is Quotation Item / Sales Order Iten then add Margin Type and rate in item_list\n\t\t\t\tif (in_list([\"Quotation Item\", \"Sales Order Item\", \"Delivery Note Item\", \"Sales Invoice Item\",  \"Purchase Invoice Item\", \"Purchase Order Item\", \"Purchase Receipt Item\"]), d.doctype) {\n\t\t\t\t\titem_list[0][\"margin_type\"] = d.margin_type;\n\t\t\t\t\titem_list[0][\"margin_rate_or_amount\"] = d.margin_rate_or_amount;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (item) {\n\t\t\tappend_item(item);\n\t\t} else {\n\t\t\t$.each(this.frm.doc[\"items\"] || [], function(i, d) {\n\t\t\t\tappend_item(d);\n\t\t\t});\n\t\t}\n\t\treturn item_list;\n\t},\n\n\t_set_values_for_item_list: function(children) {\n\t\tvar me = this;\n\t\tvar items_rule_dict = {};\n\n\t\tfor(var i=0, l=children.length; i<l; i++) {\n\t\t\tvar d = children[i] ;\n\t\t\tlet item_row = frappe.get_doc(d.doctype, d.name);\n\t\t\tvar existing_pricing_rule = frappe.model.get_value(d.doctype, d.name, \"pricing_rules\");\n\t\t\tfor(var k in d) {\n\t\t\t\tvar v = d[k];\n\t\t\t\tif ([\"doctype\", \"name\"].indexOf(k)===-1) {\n\t\t\t\t\tif(k==\"price_list_rate\") {\n\t\t\t\t\t\titem_row['rate'] = v;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (k !== 'free_item_data') {\n\t\t\t\t\t\titem_row[k] = v;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfrappe.model.round_floats_in(item_row, [\"price_list_rate\", \"discount_percentage\"]);\n\n\t\t\t// if pricing rule set as blank from an existing value, apply price_list\n\t\t\tif(!me.frm.doc.ignore_pricing_rule && existing_pricing_rule && !d.pricing_rules) {\n\t\t\t\tme.apply_price_list(frappe.get_doc(d.doctype, d.name));\n\t\t\t} else if(!d.pricing_rules) {\n\t\t\t\tme.remove_pricing_rule(frappe.get_doc(d.doctype, d.name));\n\t\t\t}\n\n\t\t\tif (d.free_item_data) {\n\t\t\t\tme.apply_product_discount(d);\n\t\t\t}\n\n\t\t\tif (d.apply_rule_on_other_items) {\n\t\t\t\titems_rule_dict[d.name] = d;\n\t\t\t}\n\t\t}\n\n\t\tme.frm.refresh_field('items');\n\t\tme.apply_rule_on_other_items(items_rule_dict);\n\n\t\tme.calculate_taxes_and_totals();\n\t},\n\n\tapply_rule_on_other_items: function(args) {\n\t\tconst me = this;\n\t\tconst fields = [\"discount_percentage\", \"pricing_rules\", \"discount_amount\", \"rate\"];\n\n\t\tfor(var k in args) {\n\t\t\tlet data = args[k];\n\n\t\t\tif (data && data.apply_rule_on_other_items) {\n\t\t\t\tme.frm.doc.items.forEach(d => {\n\t\t\t\t\tif (in_list(data.apply_rule_on_other_items, d[data.apply_rule_on])) {\n\t\t\t\t\t\tfor(var k in data) {\n\t\t\t\t\t\t\tif (in_list(fields, k) && data[k] && (data.price_or_product_discount === 'price' || k === 'pricing_rules')) {\n\t\t\t\t\t\t\t\tfrappe.model.set_value(d.doctype, d.name, k, data[k]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\tapply_product_discount: function(args) {\n\t\tconst items = this.frm.doc.items.filter(d => (d.is_free_item)) || [];\n\n\t\tconst exist_items = items.map(row => (row.item_code, row.pricing_rules));\n\n\t\targs.free_item_data.forEach(pr_row => {\n\t\t\tlet row_to_modify = {};\n\t\t\tif (!items || !in_list(exist_items, (pr_row.item_code, pr_row.pricing_rules))) {\n\n\t\t\t\trow_to_modify = frappe.model.add_child(this.frm.doc,\n\t\t\t\t\tthis.frm.doc.doctype + ' Item', 'items');\n\n\t\t\t} else if(items) {\n\t\t\t\trow_to_modify = items.filter(d => (d.item_code === pr_row.item_code\n\t\t\t\t\t&& d.pricing_rules === pr_row.pricing_rules))[0];\n\t\t\t}\n\n\t\t\tfor (let key in pr_row) {\n\t\t\t\trow_to_modify[key] = pr_row[key];\n\t\t\t}\n\t\t});\n\n\t\t// free_item_data is a temporary variable\n\t\targs.free_item_data = '';\n\t\trefresh_field('items');\n\t},\n\n\tapply_price_list: function(item, reset_plc_conversion) {\n\t\t// We need to reset plc_conversion_rate sometimes because the call to\n\t\t// `erpnext.stock.get_item_details.apply_price_list` is sensitive to its value\n\t\tif (!reset_plc_conversion) {\n\t\t\tthis.frm.set_value(\"plc_conversion_rate\", \"\");\n\t\t}\n\n\t\tvar me = this;\n\t\tvar args = this._get_args(item);\n\t\tif (!((args.items && args.items.length) || args.price_list)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (me.in_apply_price_list == true) return;\n\n\t\tme.in_apply_price_list = true;\n\t\treturn this.frm.call({\n\t\t\tmethod: \"erpnext.stock.get_item_details.apply_price_list\",\n\t\t\targs: {\targs: args },\n\t\t\tcallback: function(r) {\n\t\t\t\tif (!r.exc) {\n\t\t\t\t\tfrappe.run_serially([\n\t\t\t\t\t\t() => me.frm.set_value(\"price_list_currency\", r.message.parent.price_list_currency),\n\t\t\t\t\t\t() => me.frm.set_value(\"plc_conversion_rate\", r.message.parent.plc_conversion_rate),\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tif(args.items.length) {\n\t\t\t\t\t\t\t\tme._set_values_for_item_list(r.message.children);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t() => { me.in_apply_price_list = false; }\n\t\t\t\t\t]);\n\n\t\t\t\t} else {\n\t\t\t\t\tme.in_apply_price_list = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}).always(() => {\n\t\t\tme.in_apply_price_list = false;\n\t\t});\n\t},\n\n\tremove_pricing_rule: function(item) {\n\t\tlet me = this;\n\t\tconst fields = [\"discount_percentage\",\n\t\t\t\"discount_amount\", \"margin_rate_or_amount\", \"rate_with_margin\"];\n\n\t\tif(item.remove_free_item) {\n\t\t\tvar items = [];\n\n\t\t\tme.frm.doc.items.forEach(d => {\n\t\t\t\tif(d.item_code != item.remove_free_item || !d.is_free_item) {\n\t\t\t\t\titems.push(d);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tme.frm.doc.items = items;\n\t\t\trefresh_field('items');\n\t\t} else if(item.applied_on_items && item.apply_on) {\n\t\t\tconst applied_on_items = item.applied_on_items.split(',');\n\t\t\tme.frm.doc.items.forEach(row => {\n\t\t\t\tif(applied_on_items.includes(row[item.apply_on])) {\n\t\t\t\t\tfields.forEach(f => {\n\t\t\t\t\t\trow[f] = 0;\n\t\t\t\t\t});\n\n\t\t\t\t\t[\"pricing_rules\", \"margin_type\"].forEach(field => {\n\t\t\t\t\t\tif (row[field]) {\n\t\t\t\t\t\t\trow[field] = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tme.trigger_price_list_rate();\n\t\t}\n\t},\n\n\ttrigger_price_list_rate: function() {\n\t\tvar me  = this;\n\n\t\tthis.frm.doc.items.forEach(child_row => {\n\t\t\tme.frm.script_manager.trigger(\"price_list_rate\",\n\t\t\t\tchild_row.doctype, child_row.name);\n\t\t})\n\t},\n\n\tvalidate_company_and_party: function() {\n\t\tvar me = this;\n\t\tvar valid = true;\n\n\t\t$.each([\"company\", \"customer\"], function(i, fieldname) {\n\t\t\tif(frappe.meta.has_field(me.frm.doc.doctype, fieldname) && me.frm.doc.doctype != \"Purchase Order\") {\n\t\t\t\tif (!me.frm.doc[fieldname]) {\n\t\t\t\t\tfrappe.msgprint(__(\"Please specify\") + \": \" +\n\t\t\t\t\t\tfrappe.meta.get_label(me.frm.doc.doctype, fieldname, me.frm.doc.name) +\n\t\t\t\t\t\t\". \" + __(\"It is needed to fetch Item Details.\"));\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn valid;\n\t},\n\n\tget_terms: function() {\n\t\tvar me = this;\n\n\t\terpnext.utils.get_terms(this.frm.doc.tc_name, this.frm.doc, function(r) {\n\t\t\tif(!r.exc) {\n\t\t\t\tme.frm.set_value(\"terms\", r.message);\n\t\t\t}\n\t\t});\n\t},\n\n\ttaxes_and_charges: function() {\n\t\tvar me = this;\n\t\tif(this.frm.doc.taxes_and_charges) {\n\t\t\treturn this.frm.call({\n\t\t\t\tmethod: \"erpnext.controllers.accounts_controller.get_taxes_and_charges\",\n\t\t\t\targs: {\n\t\t\t\t\t\"master_doctype\": frappe.meta.get_docfield(this.frm.doc.doctype, \"taxes_and_charges\",\n\t\t\t\t\t\tthis.frm.doc.name).options,\n\t\t\t\t\t\"master_name\": this.frm.doc.taxes_and_charges\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tif(me.frm.doc.shipping_rule && me.frm.doc.taxes) {\n\t\t\t\t\t\t\tfor (let tax of r.message) {\n\t\t\t\t\t\t\t\tme.frm.add_child(\"taxes\", tax);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trefresh_field(\"taxes\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme.frm.set_value(\"taxes\", r.message);\n\t\t\t\t\t\t\tme.calculate_taxes_and_totals();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\ttax_category: function() {\n\t\tvar me = this;\n\t\tif(me.frm.updating_party_details) return;\n\n\t\tfrappe.run_serially([\n\t\t\t() => this.update_item_tax_map(),\n\t\t\t() => erpnext.utils.set_taxes(this.frm, \"tax_category\"),\n\t\t]);\n\t},\n\n\tupdate_item_tax_map: function() {\n\t\tlet me = this;\n\t\tlet item_codes = [];\n\t\tlet item_rates = {};\n\t\tlet item_tax_templates = {};\n\n\t\t$.each(this.frm.doc.items || [], function(i, item) {\n\t\t\tif (item.item_code) {\n\t\t\t\t// Use combination of name and item code in case same item is added multiple times\n\t\t\t\titem_codes.push([item.item_code, item.name]);\n\t\t\t\titem_rates[item.name] = item.net_rate;\n\t\t\t\titem_tax_templates[item.name] = item.item_tax_template;\n\t\t\t}\n\t\t});\n\n\t\tif (item_codes.length) {\n\t\t\treturn this.frm.call({\n\t\t\t\tmethod: \"erpnext.stock.get_item_details.get_item_tax_info\",\n\t\t\t\targs: {\n\t\t\t\t\tcompany: me.frm.doc.company,\n\t\t\t\t\ttax_category: cstr(me.frm.doc.tax_category),\n\t\t\t\t\titem_codes: item_codes,\n\t\t\t\t\titem_rates: item_rates,\n\t\t\t\t\titem_tax_templates: item_tax_templates\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t$.each(me.frm.doc.items || [], function(i, item) {\n\t\t\t\t\t\t\tif (item.name && r.message.hasOwnProperty(item.name) && r.message[item.name].item_tax_template) {\n\t\t\t\t\t\t\t\titem.item_tax_template = r.message[item.name].item_tax_template;\n\t\t\t\t\t\t\t\titem.item_tax_rate = r.message[item.name].item_tax_rate;\n\t\t\t\t\t\t\t\tme.add_taxes_from_item_tax_template(item.item_tax_rate);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\titem_tax_template: function(doc, cdt, cdn) {\n\t\tvar me = this;\n\t\tif(me.frm.updating_party_details) return;\n\n\t\tvar item = frappe.get_doc(cdt, cdn);\n\n\t\tif(item.item_tax_template) {\n\t\t\treturn this.frm.call({\n\t\t\t\tmethod: \"erpnext.stock.get_item_details.get_item_tax_map\",\n\t\t\t\targs: {\n\t\t\t\t\tcompany: me.frm.doc.company,\n\t\t\t\t\titem_tax_template: item.item_tax_template,\n\t\t\t\t\tas_json: true\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\titem.item_tax_rate = r.message;\n\t\t\t\t\t\tme.calculate_taxes_and_totals();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\titem.item_tax_rate = \"{}\";\n\t\t\tme.calculate_taxes_and_totals();\n\t\t}\n\t},\n\n\n\n\tis_recurring: function() {\n\t\t// set default values for recurring documents\n\t\tif(this.frm.doc.is_recurring && this.frm.doc.__islocal) {\n\t\t\tfrappe.msgprint(__(\"Please set recurring after saving\"));\n\t\t\tthis.frm.set_value('is_recurring', 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.frm.doc.is_recurring) {\n\t\t\tif(!this.frm.doc.recurring_id) {\n\t\t\t\tthis.frm.set_value('recurring_id', this.frm.doc.name);\n\t\t\t}\n\n\t\t\tvar owner_email = this.frm.doc.owner==\"Administrator\"\n\t\t\t\t? frappe.user_info(\"Administrator\").email\n\t\t\t\t: this.frm.doc.owner;\n\n\t\t\tthis.frm.doc.notification_email_address = $.map([cstr(owner_email),\n\t\t\t\tcstr(this.frm.doc.contact_email)], function(v) { return v || null; }).join(\", \");\n\t\t\tthis.frm.doc.repeat_on_day_of_month = frappe.datetime.str_to_obj(this.frm.doc.posting_date).getDate();\n\t\t}\n\n\t\trefresh_many([\"notification_email_address\", \"repeat_on_day_of_month\"]);\n\t},\n\n\tfrom_date: function() {\n\t\t// set to_date\n\t\tif(this.frm.doc.from_date) {\n\t\t\tvar recurring_type_map = {'Monthly': 1, 'Quarterly': 3, 'Half-yearly': 6,\n\t\t\t\t'Yearly': 12};\n\n\t\t\tvar months = recurring_type_map[this.frm.doc.recurring_type];\n\t\t\tif(months) {\n\t\t\t\tvar to_date = frappe.datetime.add_months(this.frm.doc.from_date,\n\t\t\t\t\tmonths);\n\t\t\t\tthis.frm.doc.to_date = frappe.datetime.add_days(to_date, -1);\n\t\t\t\trefresh_field('to_date');\n\t\t\t}\n\t\t}\n\t},\n\n\tset_gross_profit: function(item) {\n\t\tif ([\"Sales Order\", \"Quotation\"].includes(this.frm.doc.doctype) && item.valuation_rate) {\n\t\t\tvar rate = flt(item.rate) * flt(this.frm.doc.conversion_rate || 1);\n\t\t\titem.gross_profit = flt(((rate - item.valuation_rate) * item.stock_qty), precision(\"amount\", item));\n\t\t}\n\t},\n\n\tsetup_item_selector: function() {\n\t\t// TODO: remove item selector\n\n\t\treturn;\n\t\t// if(!this.item_selector) {\n\t\t// \tthis.item_selector = new erpnext.ItemSelector({frm: this.frm});\n\t\t// }\n\t},\n\n\tget_advances: function() {\n\t\tif(!this.frm.is_return) {\n\t\t\treturn this.frm.call({\n\t\t\t\tmethod: \"set_advances\",\n\t\t\t\tdoc: this.frm.doc,\n\t\t\t\tcallback: function(r, rt) {\n\t\t\t\t\trefresh_field(\"advances\");\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t},\n\n\tmake_payment_entry: function() {\n\t\treturn frappe.call({\n\t\t\tmethod: cur_frm.cscript.get_method_for_payment(),\n\t\t\targs: {\n\t\t\t\t\"dt\": cur_frm.doc.doctype,\n\t\t\t\t\"dn\": cur_frm.doc.name\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tvar doclist = frappe.model.sync(r.message);\n\t\t\t\tfrappe.set_route(\"Form\", doclist[0].doctype, doclist[0].name);\n\t\t\t\t// cur_frm.refresh_fields()\n\t\t\t}\n\t\t});\n\t},\n\n\tmake_quality_inspection: function () {\n\t\tlet data = [];\n\t\tconst fields = [\n\t\t\t{\n\t\t\t\tlabel: \"Items\",\n\t\t\t\tfieldtype: \"Table\",\n\t\t\t\tfieldname: \"items\",\n\t\t\t\tcannot_add_rows: true,\n\t\t\t\tin_place_edit: true,\n\t\t\t\tdata: data,\n\t\t\t\tget_data: () => {\n\t\t\t\t\treturn data;\n\t\t\t\t},\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\t\tfieldname: \"docname\",\n\t\t\t\t\t\thidden: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: \"Read Only\",\n\t\t\t\t\t\tfieldname: \"item_code\",\n\t\t\t\t\t\tlabel: __(\"Item Code\"),\n\t\t\t\t\t\tin_list_view: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: \"Read Only\",\n\t\t\t\t\t\tfieldname: \"item_name\",\n\t\t\t\t\t\tlabel: __(\"Item Name\"),\n\t\t\t\t\t\tin_list_view: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: \"Float\",\n\t\t\t\t\t\tfieldname: \"qty\",\n\t\t\t\t\t\tlabel: __(\"Accepted Quantity\"),\n\t\t\t\t\t\tin_list_view: true,\n\t\t\t\t\t\tread_only: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: \"Float\",\n\t\t\t\t\t\tfieldname: \"sample_size\",\n\t\t\t\t\t\tlabel: __(\"Sample Size\"),\n\t\t\t\t\t\treqd: true,\n\t\t\t\t\t\tin_list_view: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\t\tfieldname: \"description\",\n\t\t\t\t\t\tlabel: __(\"Description\"),\n\t\t\t\t\t\thidden: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\t\tfieldname: \"serial_no\",\n\t\t\t\t\t\tlabel: __(\"Serial No\"),\n\t\t\t\t\t\thidden: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\t\tfieldname: \"batch_no\",\n\t\t\t\t\t\tlabel: __(\"Batch No\"),\n\t\t\t\t\t\thidden: true\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\t\tconst me = this;\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Select Items for Quality Inspection\"),\n\t\t\tfields: fields,\n\t\t\tprimary_action: function () {\n\t\t\t\tconst data = dialog.get_values();\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"erpnext.controllers.stock_controller.make_quality_inspections\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tdoctype: me.frm.doc.doctype,\n\t\t\t\t\t\tdocname: me.frm.doc.name,\n\t\t\t\t\t\titems: data.items\n\t\t\t\t\t},\n\t\t\t\t\tfreeze: true,\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tif (r.message.length > 0) {\n\t\t\t\t\t\t\tif (r.message.length === 1) {\n\t\t\t\t\t\t\t\tfrappe.set_route(\"Form\", \"Quality Inspection\", r.message[0]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfrappe.route_options = {\n\t\t\t\t\t\t\t\t\t\"reference_type\": me.frm.doc.doctype,\n\t\t\t\t\t\t\t\t\t\"reference_name\": me.frm.doc.name\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tfrappe.set_route(\"List\", \"Quality Inspection\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tprimary_action_label: __(\"Create\")\n\t\t});\n\n\t\tthis.frm.doc.items.forEach(item => {\n\t\t\tif (!item.quality_inspection) {\n\t\t\t\tlet dialog_items = dialog.fields_dict.items;\n\t\t\t\tdialog_items.df.data.push({\n\t\t\t\t\t\"docname\": item.name,\n\t\t\t\t\t\"item_code\": item.item_code,\n\t\t\t\t\t\"item_name\": item.item_name,\n\t\t\t\t\t\"qty\": item.qty,\n\t\t\t\t\t\"description\": item.description,\n\t\t\t\t\t\"serial_no\": item.serial_no,\n\t\t\t\t\t\"batch_no\": item.batch_no\n\t\t\t\t});\n\t\t\t\tdialog_items.grid.refresh();\n\t\t\t}\n\t\t});\n\n\t\tdata = dialog.fields_dict.items.df.data;\n\t\tif (!data.length) {\n\t\t\tfrappe.msgprint(__(\"All items in this document already have a linked Quality Inspection.\"));\n\t\t} else {\n\t\t\tdialog.show();\n\t\t}\n\t},\n\n\tget_method_for_payment: function(){\n\t\tvar method = \"erpnext.accounts.doctype.payment_entry.payment_entry.get_payment_entry\";\n\t\tif(cur_frm.doc.__onload && cur_frm.doc.__onload.make_payment_via_journal_entry){\n\t\t\tif(in_list(['Sales Invoice', 'Purchase Invoice'],  cur_frm.doc.doctype)){\n\t\t\t\tmethod = \"erpnext.accounts.doctype.journal_entry.journal_entry.get_payment_entry_against_invoice\";\n\t\t\t}else {\n\t\t\t\tmethod= \"erpnext.accounts.doctype.journal_entry.journal_entry.get_payment_entry_against_order\";\n\t\t\t}\n\t\t}\n\n\t\treturn method\n\t},\n\n\tset_query_for_batch: function(doc, cdt, cdn) {\n\t\t// Show item's batches in the dropdown of batch no\n\n\t\tvar me = this;\n\t\tvar item = frappe.get_doc(cdt, cdn);\n\n\t\tif(!item.item_code) {\n\t\t\tfrappe.throw(__(\"Please enter Item Code to get batch no\"));\n\t\t} else if (doc.doctype == \"Purchase Receipt\" ||\n\t\t\t(doc.doctype == \"Purchase Invoice\" && doc.update_stock)) {\n\t\t\treturn {\n\t\t\t\tfilters: {'item': item.item_code}\n\t\t\t}\n\t\t} else {\n\t\t\tlet filters = {\n\t\t\t\t'item_code': item.item_code,\n\t\t\t\t'posting_date': me.frm.doc.posting_date || frappe.datetime.nowdate(),\n\t\t\t}\n\n\t\t\tif (doc.is_return) {\n\t\t\t\tfilters[\"is_return\"] = 1;\n\t\t\t}\n\n\t\t\tif (item.warehouse) filters[\"warehouse\"] = item.warehouse;\n\n\t\t\treturn {\n\t\t\t\tquery : \"erpnext.controllers.queries.get_batch_no\",\n\t\t\t\tfilters: filters\n\t\t\t}\n\t\t}\n\t},\n\n\tset_query_for_item_tax_template: function(doc, cdt, cdn) {\n\t\tvar item = frappe.get_doc(cdt, cdn);\n\t\tif(!item.item_code) {\n\t\t\treturn doc.company ? {filters: {company: doc.company}} : {};\n\t\t} else {\n\t\t\tlet filters = {\n\t\t\t\t'item_code': item.item_code,\n\t\t\t\t'valid_from': [\"<=\", doc.transaction_date || doc.bill_date || doc.posting_date],\n\t\t\t\t'item_group': item.item_group,\n\t\t\t}\n\n\t\t\tif (doc.tax_category)\n\t\t\t\tfilters['tax_category'] = doc.tax_category;\n\t\t\tif (doc.company)\n\t\t\t\tfilters['company'] = doc.company;\n\t\t\treturn {\n\t\t\t\tquery: \"erpnext.controllers.queries.get_tax_template\",\n\t\t\t\tfilters: filters\n\t\t\t}\n\t\t}\n\t},\n\n\tpayment_terms_template: function() {\n\t\tvar me = this;\n\t\tconst doc = this.frm.doc;\n\t\tif(doc.payment_terms_template && doc.doctype !== 'Delivery Note') {\n\t\t\tvar posting_date = doc.posting_date || doc.transaction_date;\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.controllers.accounts_controller.get_payment_terms\",\n\t\t\t\targs: {\n\t\t\t\t\tterms_template: doc.payment_terms_template,\n\t\t\t\t\tposting_date: posting_date,\n\t\t\t\t\tgrand_total: doc.rounded_total || doc.grand_total,\n\t\t\t\t\tbase_grand_total: doc.base_rounded_total || doc.base_grand_total,\n\t\t\t\t\tbill_date: doc.bill_date\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(r.message && !r.exc) {\n\t\t\t\t\t\tme.frm.set_value(\"payment_schedule\", r.message);\n\t\t\t\t\t\tconst company_currency = me.get_company_currency();\n\t\t\t\t\t\tme.update_payment_schedule_grid_labels(company_currency);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t},\n\n\tpayment_term: function(doc, cdt, cdn) {\n\t\tconst me = this;\n\t\tvar row = locals[cdt][cdn];\n\t\tif(row.payment_term) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.controllers.accounts_controller.get_payment_term_details\",\n\t\t\t\targs: {\n\t\t\t\t\tterm: row.payment_term,\n\t\t\t\t\tbill_date: this.frm.doc.bill_date,\n\t\t\t\t\tposting_date: this.frm.doc.posting_date || this.frm.doc.transaction_date,\n\t\t\t\t\tgrand_total: this.frm.doc.rounded_total || this.frm.doc.grand_total,\n\t\t\t\t\tbase_grand_total: this.frm.doc.base_rounded_total || this.frm.doc.base_grand_total\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(r.message && !r.exc) {\n\t\t\t\t\t\tfor (var d in r.message) {\n\t\t\t\t\t\t\tfrappe.model.set_value(cdt, cdn, d, r.message[d]);\n\t\t\t\t\t\t\tconst company_currency = me.get_company_currency();\n\t\t\t\t\t\t\tme.update_payment_schedule_grid_labels(company_currency);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t},\n\n\tagainst_blanket_order: function(doc, cdt, cdn) {\n\t\tvar item = locals[cdt][cdn];\n\t\tif(!item.against_blanket_order) {\n\t\t\tfrappe.model.set_value(this.frm.doctype + \" Item\", item.name, \"blanket_order\", null);\n\t\t\tfrappe.model.set_value(this.frm.doctype + \" Item\", item.name, \"blanket_order_rate\", 0.00);\n\t\t}\n\t},\n\n\tblanket_order: function(doc, cdt, cdn) {\n\t\tvar me = this;\n\t\tvar item = locals[cdt][cdn];\n\t\tif (item.blanket_order && (item.parenttype==\"Sales Order\" || item.parenttype==\"Purchase Order\")) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.stock.get_item_details.get_blanket_order_details\",\n\t\t\t\targs: {\n\t\t\t\t\targs:{\n\t\t\t\t\t\titem_code: item.item_code,\n\t\t\t\t\t\tcustomer: doc.customer,\n\t\t\t\t\t\tsupplier: doc.supplier,\n\t\t\t\t\t\tcompany: doc.company,\n\t\t\t\t\t\ttransaction_date: doc.transaction_date,\n\t\t\t\t\t\tblanket_order: item.blanket_order\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif (!r.message) {\n\t\t\t\t\t\tfrappe.throw(__(\"Invalid Blanket Order for the selected Customer and Item\"));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.run_serially([\n\t\t\t\t\t\t\t() => frappe.model.set_value(cdt, cdn, \"blanket_order_rate\", r.message.blanket_order_rate),\n\t\t\t\t\t\t\t() => me.frm.script_manager.trigger(\"price_list_rate\", cdt, cdn)\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t},\n\n\tset_reserve_warehouse: function() {\n\t\tthis.autofill_warehouse(this.frm.doc.supplied_items, \"reserve_warehouse\", this.frm.doc.set_reserve_warehouse);\n\t},\n\n\tset_warehouse: function() {\n\t\tthis.autofill_warehouse(this.frm.doc.items, \"warehouse\", this.frm.doc.set_warehouse);\n\t},\n\n\tset_target_warehouse: function() {\n\t\tthis.autofill_warehouse(this.frm.doc.items, \"target_warehouse\", this.frm.doc.set_target_warehouse);\n\t},\n\n\tset_from_warehouse: function() {\n\t\tthis.autofill_warehouse(this.frm.doc.items, \"from_warehouse\", this.frm.doc.set_from_warehouse);\n\t},\n\n\tautofill_warehouse : function (child_table, warehouse_field, warehouse) {\n\t\tif (warehouse && child_table && child_table.length) {\n\t\t\tlet doctype = child_table[0].doctype;\n\t\t\t$.each(child_table || [], function(i, item) {\n\t\t\t\tfrappe.model.set_value(doctype, item.name, warehouse_field, warehouse);\n\t\t\t});\n\t\t}\n\t},\n\n\tcoupon_code: function() {\n\t\tif (this.frm.doc.coupon_code || this.frm._last_coupon_code) {\n\t\t\t// reset pricing rules if coupon code is set or is unset\n\t\t\tconst _ignore_pricing_rule = this.frm.doc.ignore_pricing_rule;\n\t\t\treturn frappe.run_serially([\n\t\t\t\t() => this.frm.doc.ignore_pricing_rule=1,\n\t\t\t\t() => this.frm.trigger('ignore_pricing_rule'),\n\t\t\t\t() => this.frm.doc.ignore_pricing_rule=_ignore_pricing_rule,\n\t\t\t\t() => this.frm.trigger('apply_pricing_rule'),\n\t\t\t\t() => this.frm._last_coupon_code = this.frm.doc.coupon_code\n\t\t\t]);\n\t\t}\n\t}\n});\n\nerpnext.show_serial_batch_selector = function (frm, d, callback, on_close, show_dialog) {\n\tlet warehouse, receiving_stock, existing_stock;\n\tif (frm.doc.is_return) {\n\t\tif ([\"Purchase Receipt\", \"Purchase Invoice\"].includes(frm.doc.doctype)) {\n\t\t\texisting_stock = true;\n\t\t\twarehouse = d.warehouse;\n\t\t} else if ([\"Delivery Note\", \"Sales Invoice\"].includes(frm.doc.doctype)) {\n\t\t\treceiving_stock = true;\n\t\t}\n\t} else {\n\t\tif (frm.doc.doctype == \"Stock Entry\") {\n\t\t\tif (frm.doc.purpose == \"Material Receipt\") {\n\t\t\t\treceiving_stock = true;\n\t\t\t} else {\n\t\t\t\texisting_stock = true;\n\t\t\t\twarehouse = d.s_warehouse;\n\t\t\t}\n\t\t} else {\n\t\t\texisting_stock = true;\n\t\t\twarehouse = d.warehouse;\n\t\t}\n\t}\n\n\tif (!warehouse) {\n\t\tif (receiving_stock) {\n\t\t\twarehouse = [\"like\", \"\"];\n\t\t} else if (existing_stock) {\n\t\t\twarehouse = [\"!=\", \"\"];\n\t\t}\n\t}\n\n\tfrappe.require(\"assets/erpnext/js/utils/serial_no_batch_selector.js\", function() {\n\t\tnew erpnext.SerialNoBatchSelector({\n\t\t\tfrm: frm,\n\t\t\titem: d,\n\t\t\twarehouse_details: {\n\t\t\t\ttype: \"Warehouse\",\n\t\t\t\tname: warehouse\n\t\t\t},\n\t\t\tcallback: callback,\n\t\t\ton_close: on_close\n\t\t}, show_dialog);\n\t});\n}\n\nerpnext.apply_putaway_rule = (frm, purpose=null) => {\n\tif (!frm.doc.company) {\n\t\tfrappe.throw({message: __(\"Please select a Company first.\"), title: __(\"Mandatory\")});\n\t}\n\tif (!frm.doc.items.length) return;\n\n\tfrappe.call({\n\t\tmethod: \"erpnext.stock.doctype.putaway_rule.putaway_rule.apply_putaway_rule\",\n\t\targs: {\n\t\t\tdoctype: frm.doctype,\n\t\t\titems: frm.doc.items,\n\t\t\tcompany: frm.doc.company,\n\t\t\tsync: true,\n\t\t\tpurpose: purpose\n\t\t},\n\t\tcallback: (result) => {\n\t\t\tif (!result.exc && result.message) {\n\t\t\t\tfrm.clear_table(\"items\");\n\n\t\t\t\tlet items =  result.message;\n\t\t\t\titems.forEach((row) => {\n\t\t\t\t\tdelete row[\"name\"]; // dont overwrite name from server side\n\t\t\t\t\tlet child = frm.add_child(\"items\");\n\t\t\t\t\tObject.assign(child, row);\n\t\t\t\t\tfrm.script_manager.trigger(\"qty\", child.doctype, child.name);\n\t\t\t\t});\n\t\t\t\tfrm.get_field(\"items\").grid.refresh();\n\t\t\t}\n\t\t}\n\t});\n};\n","erpnext.ItemSelector = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\n\t\tif (!this.item_field) {\n\t\t\tthis.item_field = 'item_code';\n\t\t}\n\n\t\tif (!this.item_query) {\n\t\t\tthis.item_query = erpnext.queries.item().query;\n\t\t}\n\n\t\tthis.grid = this.frm.get_field(\"items\").grid;\n\t\tthis.setup();\n\t},\n\n\tsetup: function() {\n\t\tvar me = this;\n\t\tif(!this.grid.add_items_button) {\n\t\t\tthis.grid.add_items_button = this.grid.add_custom_button(__('Add Items'), function() {\n\t\t\t\tif(!me.dialog) {\n\t\t\t\t\tme.make_dialog();\n\t\t\t\t}\n\t\t\t\tme.dialog.show();\n\t\t\t\tme.render_items();\n\t\t\t\tsetTimeout(function() { me.dialog.input.focus(); }, 1000);\n\t\t\t});\n\t\t}\n\t},\n\n\tmake_dialog: function() {\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Add Items')\n\t\t});\n\t\tvar body = $(this.dialog.body);\n\t\tbody.html('<div><p><input type=\"text\" class=\"form-control\"></p>\\\n\t\t\t<br><div class=\"results\"></div></div>');\n\n\t\tthis.dialog.input = body.find('.form-control');\n\t\tthis.dialog.results = body.find('.results');\n\n\t\tvar me = this;\n\t\tthis.dialog.results.on('click', '.image-view-item', function() {\n\t\t\tme.add_item($(this).attr('data-name'));\n\t\t});\n\n\t\tthis.dialog.input.on('keyup', function() {\n\t\t\tif(me.timeout_id) {\n\t\t\t\tclearTimeout(me.timeout_id);\n\t\t\t}\n\t\t\tme.timeout_id = setTimeout(function() {\n\t\t\t\tme.render_items();\n\t\t\t\tme.timeout_id = undefined;\n\t\t\t}, 500);\n\t\t});\n\t},\n\n\tadd_item: function(item_code) {\n\t\t// add row or update qty\n\t\tvar added = false;\n\n\t\t// find row with item if exists\n\t\t$.each(this.frm.doc.items || [], (i, d) => {\n\t\t\tif(d[this.item_field]===item_code) {\n\t\t\t\tfrappe.model.set_value(d.doctype, d.name, 'qty', d.qty + 1);\n\t\t\t\tfrappe.show_alert({message: __(\"Added {0} ({1})\", [item_code, d.qty]), indicator: 'green'});\n\t\t\t\tadded = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tif(!added) {\n\t\t\tvar d = null;\n\t\t\tfrappe.run_serially([\n\t\t\t\t() => { d = this.grid.add_new_row(); },\n\t\t\t\t() => frappe.model.set_value(d.doctype, d.name, this.item_field, item_code),\n\t\t\t\t() => frappe.timeout(0.1),\n\t\t\t\t() => {\n\t\t\t\t\tfrappe.model.set_value(d.doctype, d.name, 'qty', 1);\n\t\t\t\t\tfrappe.show_alert({message: __(\"Added {0} ({1})\", [item_code, 1]), indicator: 'green'});\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\n\t},\n\n\trender_items: function() {\n\t\tlet args = {\n\t\t\tquery: this.item_query,\n\t\t\tfilters: {}\n\t\t};\n\t\targs.txt = this.dialog.input.val();\n\t\targs.as_dict = 1;\n\n\t\tif (this.get_filters) {\n\t\t\t$.extend(args.filters, this.get_filters() || {});\n\t\t}\n\n\t\tvar me = this;\n\t\tfrappe.link_search(\"Item\", args, function(r) {\n\t\t\t$.each(r.values, function(i, d) {\n\t\t\t\tif(!d.image) {\n\t\t\t\t\td.abbr = frappe.get_abbr(d.item_name);\n\t\t\t\t\td.color = frappe.get_palette(d.item_name);\n\t\t\t\t}\n\t\t\t});\n\t\t\tme.dialog.results.html(frappe.render_template('item_selector', {'data':r.values}));\n\t\t});\n\t}\n});\n","frappe.provide(\"frappe.help.help_links\");\n\nconst docsUrl = \"https://erpnext.com/docs/\";\n\nfrappe.help.help_links[\"Form/Rename Tool\"] = [\n\t{\n\t\tlabel: \"Bulk Rename\",\n\t\turl: docsUrl + \"user/manual/en/using-erpnext/articles/bulk-rename\",\n\t},\n];\n\n//Setup\n\nfrappe.help.help_links[\"List/User\"] = [\n\t{\n\t\tlabel: \"New User\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/setting-up/users-and-permissions/adding-users\",\n\t},\n\t{\n\t\tlabel: \"Rename User\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/articles/rename-user\",\n\t},\n];\n\nfrappe.help.help_links[\"permission-manager\"] = [\n\t{\n\t\tlabel: \"Role Permissions Manager\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/setting-up/users-and-permissions/role-based-permissions\",\n\t},\n\t{\n\t\tlabel: \"Managing Perm Level in Permissions Manager\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/articles/managing-perm-level\",\n\t},\n\t{\n\t\tlabel: \"User Permissions\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/setting-up/users-and-permissions/user-permissions\",\n\t},\n\t{\n\t\tlabel: \"Sharing\",\n\t\turl:\n\t\t\tdocsUrl + \"user/manual/en/setting-up/users-and-permissions/sharing\",\n\t},\n\t{\n\t\tlabel: \"Password\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/articles/change-password\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/System Settings\"] = [\n\t{\n\t\tlabel: \"System Settings\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/settings/system-settings\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Data Import\"] = [\n\t{\n\t\tlabel: \"Importing and Exporting Data\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/data/data-import\",\n\t},\n\t{\n\t\tlabel: \"Overwriting Data from Data Import Tool\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/setting-up/articles/overwriting-data-from-data-import-tool\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Data Import\"] = [\n\t{\n\t\tlabel: \"Importing and Exporting Data\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/data/data-import\",\n\t},\n\t{\n\t\tlabel: \"Overwriting Data from Data Import Tool\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/setting-up/articles/overwriting-data-from-data-import-tool\",\n\t},\n];\n\nfrappe.help.help_links[\"module_setup\"] = [\n\t{\n\t\tlabel: \"Role Permissions Manager\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/setting-up/users-and-permissions/role-based-permissions\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Naming Series\"] = [\n\t{\n\t\tlabel: \"Naming Series\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/settings/naming-series\",\n\t},\n\t{\n\t\tlabel: \"Setting the Current Value for Naming Series\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/setting-up/articles/naming-series-current-value\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Global Defaults\"] = [\n\t{\n\t\tlabel: \"Global Settings\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/settings/global-defaults\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Print Heading\"] = [\n\t{\n\t\tlabel: \"Print Heading\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/print/print-headings\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Print Heading\"] = [\n\t{\n\t\tlabel: \"Print Heading\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/print/print-headings\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Letter Head\"] = [\n\t{\n\t\tlabel: \"Letter Head\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/print/letter-head\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Address Template\"] = [\n\t{\n\t\tlabel: \"Address Template\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/print/address-template\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Terms and Conditions\"] = [\n\t{\n\t\tlabel: \"Terms and Conditions\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/print/terms-and-conditions\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Cheque Print Template\"] = [\n\t{\n\t\tlabel: \"Cheque Print Template\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/print/cheque-print-template\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Email Account\"] = [\n\t{\n\t\tlabel: \"Email Account\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/email/email-account\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Notification\"] = [\n\t{\n\t\tlabel: \"Notification\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/notifications\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Notification\"] = [\n\t{\n\t\tlabel: \"Notification\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/notifications\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Email Digest\"] = [\n\t{\n\t\tlabel: \"Email Digest\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/email/email-digest\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Email Digest\"] = [\n\t{\n\t\tlabel: \"Email Digest\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/email/email-digest\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Auto Email Report\"] = [\n\t{\n\t\tlabel: \"Auto Email Reports\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/email/auto-email-reports\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Print Settings\"] = [\n\t{\n\t\tlabel: \"Print Settings\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/print/print-settings\",\n\t},\n];\n\nfrappe.help.help_links[\"print-format-builder\"] = [\n\t{\n\t\tlabel: \"Print Format Builder\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/print/print-format-builder\",\n\t},\n];\n\n//setup-integrations\n\nfrappe.help.help_links[\"Form/PayPal Settings\"] = [\n\t{\n\t\tlabel: \"PayPal Settings\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/erpnext_integration/paypal-integration\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Razorpay Settings\"] = [\n\t{\n\t\tlabel: \"Razorpay Settings\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/erpnext_integration/razorpay-integration\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Dropbox Settings\"] = [\n\t{\n\t\tlabel: \"Dropbox Settings\",\n\t\turl: docsUrl + \"user/manual/en/erpnext_integration/dropbox-backup\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/LDAP Settings\"] = [\n\t{\n\t\tlabel: \"LDAP Settings\",\n\t\turl:\n\t\t\tdocsUrl + \"user/manual/en/erpnext_integration/ldap-integration\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Stripe Settings\"] = [\n\t{\n\t\tlabel: \"Stripe Settings\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/erpnext_integration/stripe-integration\",\n\t},\n];\n\n//Sales\n\nfrappe.help.help_links[\"Form/Quotation\"] = [\n\t{ label: \"Quotation\", url: docsUrl + \"user/manual/en/selling/quotation\" },\n\t{\n\t\tlabel: \"Applying Discount\",\n\t\turl: docsUrl + \"user/manual/en/selling/articles/applying-discount\",\n\t},\n\t{\n\t\tlabel: \"Sales Person\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/selling/articles/sales-persons-in-the-sales-transactions\",\n\t},\n\t{\n\t\tlabel: \"Applying Margin\",\n\t\turl: docsUrl + \"user/manual/en/selling/articles/adding-margin\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Customer\"] = [\n\t{ label: \"Customer\", url: docsUrl + \"user/manual/en/CRM/customer\" },\n\t{\n\t\tlabel: \"Credit Limit\",\n\t\turl: docsUrl + \"user/manual/en/accounts/credit-limit\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Customer\"] = [\n\t{ label: \"Customer\", url: docsUrl + \"user/manual/en/CRM/customer\" },\n\t{\n\t\tlabel: \"Credit Limit\",\n\t\turl: docsUrl + \"user/manual/en/accounts/credit-limit\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Sales Taxes and Charges Template\"] = [\n\t{\n\t\tlabel: \"Setting Up Taxes\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/setting-up-taxes\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Sales Taxes and Charges Template\"] = [\n\t{\n\t\tlabel: \"Setting Up Taxes\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/setting-up-taxes\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Sales Order\"] = [\n\t{\n\t\tlabel: \"Sales Order\",\n\t\turl: docsUrl + \"user/manual/en/selling/sales-order\",\n\t},\n\t{\n\t\tlabel: \"Recurring Sales Order\",\n\t\turl: docsUrl + \"user/manual/en/accounts/articles/recurring-orders-and-invoices\",\n\t},\n\t{\n\t\tlabel: \"Applying Discount\",\n\t\turl: docsUrl + \"user/manual/en/selling/articles/applying-discount\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Sales Order\"] = [\n\t{\n\t\tlabel: \"Sales Order\",\n\t\turl: docsUrl + \"user/manual/en/selling/sales-order\",\n\t},\n\t{\n\t\tlabel: \"Recurring Sales Order\",\n\t\turl: docsUrl + \"user/manual/en/accounts/articles/recurring-orders-and-invoices\",\n\t},\n\t{\n\t\tlabel: \"Applying Discount\",\n\t\turl: docsUrl + \"user/manual/en/selling/articles/applying-discount\",\n\t},\n\t{\n\t\tlabel: \"Drop Shipping\",\n\t\turl: docsUrl + \"user/manual/en/selling/articles/drop-shipping\",\n\t},\n\t{\n\t\tlabel: \"Sales Person\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/selling/articles/sales-persons-in-the-sales-transactions\",\n\t},\n\t{\n\t\tlabel: \"Close Sales Order\",\n\t\turl: docsUrl + \"user/manual/en/selling/articles/close-sales-order\",\n\t},\n\t{\n\t\tlabel: \"Applying Margin\",\n\t\turl: docsUrl + \"user/manual/en/selling/articles/adding-margin\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Product Bundle\"] = [\n\t{\n\t\tlabel: \"Product Bundle\",\n\t\turl: docsUrl + \"user/manual/en/selling/product-bundle\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Selling Settings\"] = [\n\t{\n\t\tlabel: \"Selling Settings\",\n\t\turl: docsUrl + \"user/manual/en/selling/selling-settings\",\n\t},\n];\n\n//Buying\n\nfrappe.help.help_links[\"List/Supplier\"] = [\n\t{ label: \"Supplier\", url: docsUrl + \"user/manual/en/buying/supplier\" },\n];\n\nfrappe.help.help_links[\"Form/Supplier\"] = [\n\t{ label: \"Supplier\", url: docsUrl + \"user/manual/en/buying/supplier\" },\n];\n\nfrappe.help.help_links[\"Form/Request for Quotation\"] = [\n\t{\n\t\tlabel: \"Request for Quotation\",\n\t\turl: docsUrl + \"user/manual/en/buying/request-for-quotation\",\n\t},\n\t{\n\t\tlabel: \"RFQ Video\",\n\t\turl: docsUrl + \"user/videos/learn/request-for-quotation.html\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Supplier Quotation\"] = [\n\t{\n\t\tlabel: \"Supplier Quotation\",\n\t\turl: docsUrl + \"user/manual/en/buying/supplier-quotation\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Buying Settings\"] = [\n\t{\n\t\tlabel: \"Buying Settings\",\n\t\turl: docsUrl + \"user/manual/en/buying/setup/buying-settings\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Purchase Order\"] = [\n\t{\n\t\tlabel: \"Purchase Order\",\n\t\turl: docsUrl + \"user/manual/en/buying/purchase-order\",\n\t},\n\t{\n\t\tlabel: \"Recurring Purchase Order\",\n\t\turl: docsUrl + \"user/manual/en/accounts/articles/recurring-orders-and-invoices\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Purchase Order\"] = [\n\t{\n\t\tlabel: \"Purchase Order\",\n\t\turl: docsUrl + \"user/manual/en/buying/purchase-order\",\n\t},\n\t{\n\t\tlabel: \"Item UoM\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/buying/articles/purchasing-in-different-unit\",\n\t},\n\t{\n\t\tlabel: \"Supplier Item Code\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/buying/articles/maintaining-suppliers-part-no-in-item\",\n\t},\n\t{\n\t\tlabel: \"Recurring Purchase Order\",\n\t\turl: docsUrl + \"user/manual/en/accounts/articles/recurring-orders-and-invoices\",\n\t},\n\t{\n\t\tlabel: \"Subcontracting\",\n\t\turl: docsUrl + \"user/manual/en/manufacturing/subcontracting\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Purchase Taxes and Charges Template\"] = [\n\t{\n\t\tlabel: \"Setting Up Taxes\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/setting-up-taxes\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Price List\"] = [\n\t{\n\t\tlabel: \"Price List\",\n\t\turl: docsUrl + \"user/manual/en/stock/price-lists\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Authorization Rule\"] = [\n\t{\n\t\tlabel: \"Authorization Rule\",\n\t\turl: docsUrl + \"user/manual/en/customize-erpnext/authorization-rule\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/SMS Settings\"] = [\n\t{\n\t\tlabel: \"SMS Settings\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/sms-setting\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Stock Reconciliation\"] = [\n\t{\n\t\tlabel: \"Stock Reconciliation\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/stock/stock-reconciliation\",\n\t},\n];\n\nfrappe.help.help_links[\"Tree/Territory\"] = [\n\t{\n\t\tlabel: \"Territory\",\n\t\turl: docsUrl + \"user/manual/en/selling/territory\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Workflow\"] = [\n\t{ label: \"Workflow\", url: docsUrl + \"user/manual/en/setting-up/workflows\" },\n];\n\nfrappe.help.help_links[\"List/Company\"] = [\n\t{\n\t\tlabel: \"Company\",\n\t\turl: docsUrl + \"user/manual/en/setting-up/company-setup\",\n\t},\n\t{\n\t\tlabel: \"Delete All Related Transactions for a Company\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/setting-up/articles/delete-a-company-and-all-related-transactions\",\n\t},\n];\n\n//Accounts\n\nfrappe.help.help_links[\"Tree/Account\"] = [\n\t{\n\t\tlabel: \"Chart of Accounts\",\n\t\turl: docsUrl + \"user/manual/en/accounts/chart-of-accounts\",\n\t},\n\t{\n\t\tlabel: \"Managing Tree Mastes\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/setting-up/articles/managing-tree-structure-masters\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Sales Invoice\"] = [\n\t{\n\t\tlabel: \"Sales Invoice\",\n\t\turl: docsUrl + \"user/manual/en/accounts/sales-invoice\",\n\t},\n\t{\n\t\tlabel: \"Accounts Opening Balance\",\n\t\turl: docsUrl + \"user/manual/en/accounts/opening-balance\",\n\t},\n\t{\n\t\tlabel: \"Sales Return\",\n\t\turl: docsUrl + \"user/manual/en/stock/sales-return\",\n\t},\n\t{\n\t\tlabel: \"Recurring Sales Invoice\",\n\t\turl: docsUrl + \"user/manual/en/accounts/articles/recurring-orders-and-invoices\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Sales Invoice\"] = [\n\t{\n\t\tlabel: \"Sales Invoice\",\n\t\turl: docsUrl + \"user/manual/en/accounts/sales-invoice\",\n\t},\n\t{\n\t\tlabel: \"Accounts Opening Balance\",\n\t\turl: docsUrl + \"user/manual/en/accounts/opening-balances\",\n\t},\n\t{\n\t\tlabel: \"Sales Return\",\n\t\turl: docsUrl + \"user/manual/en/stock/sales-return\",\n\t},\n\t{\n\t\tlabel: \"Recurring Sales Invoice\",\n\t\turl: docsUrl + \"user/manual/en/accounts/articles/recurring-orders-and-invoices\",\n\t},\n];\n\nfrappe.help.help_links[\"point-of-sale\"] = [\n\t{\n\t\tlabel: \"Point of Sale Invoice\",\n\t\turl: docsUrl + \"user/manual/en/accounts/point-of-sales\",\n\t},\n];\n\nfrappe.help.help_links[\"List/POS Profile\"] = [\n\t{\n\t\tlabel: \"Point of Sale Profile\",\n\t\turl: docsUrl + \"user/manual/en/accounts/pos-profile\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/POS Profile\"] = [\n\t{\n\t\tlabel: \"POS Profile\",\n\t\turl: docsUrl + \"user/manual/en/accounts/pos-profile\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Purchase Invoice\"] = [\n\t{\n\t\tlabel: \"Purchase Invoice\",\n\t\turl: docsUrl + \"user/manual/en/accounts/purchase-invoice\",\n\t},\n\t{\n\t\tlabel: \"Accounts Opening Balance\",\n\t\turl: docsUrl + \"user/manual/en/accounts/opening-balance\",\n\t},\n\t{\n\t\tlabel: \"Recurring Purchase Invoice\",\n\t\turl: docsUrl + \"user/manual/en/accounts/articles/recurring-orders-and-invoices\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Journal Entry\"] = [\n\t{\n\t\tlabel: \"Journal Entry\",\n\t\turl: docsUrl + \"user/manual/en/accounts/journal-entry\",\n\t},\n\t{\n\t\tlabel: \"Advance Payment Entry\",\n\t\turl: docsUrl + \"user/manual/en/accounts/advance-payment-entry\",\n\t},\n\t{\n\t\tlabel: \"Accounts Opening Balance\",\n\t\turl: docsUrl + \"user/manual/en/accounts/opening-balance\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Payment Entry\"] = [\n\t{\n\t\tlabel: \"Payment Entry\",\n\t\turl: docsUrl + \"user/manual/en/accounts/payment-entry\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Payment Request\"] = [\n\t{\n\t\tlabel: \"Payment Request\",\n\t\turl: docsUrl + \"user/manual/en/accounts/payment-request\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Asset\"] = [\n\t{\n\t\tlabel: \"Managing Fixed Assets\",\n\t\turl: docsUrl + \"user/manual/en/asset\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Asset Category\"] = [\n\t{\n\t\tlabel: \"Asset Category\",\n\t\turl: docsUrl + \"user/manual/en/asset/asset-category\",\n\t},\n];\n\nfrappe.help.help_links[\"Tree/Cost Center\"] = [\n\t{ label: \"Budgeting\", url: docsUrl + \"user/manual/en/accounts/budgeting\" },\n];\n\n//Stock\n\nfrappe.help.help_links[\"List/Item\"] = [\n\t{ label: \"Item\", url: docsUrl + \"user/manual/en/stock/item\" },\n\t{\n\t\tlabel: \"Item Price\",\n\t\turl: docsUrl + \"user/manual/en/stock/item-price\",\n\t},\n\t{\n\t\tlabel: \"Barcode\",\n\t\turl:\n\t\t\tdocsUrl + \"user/manual/en/stock/articles/track-items-using-barcode\",\n\t},\n\t{\n\t\tlabel: \"Item Wise Taxation\",\n\t\turl: docsUrl + \"user/manual/en/accounts/item-tax-template\",\n\t},\n\t{\n\t\tlabel: \"Managing Fixed Assets\",\n\t\turl: docsUrl + \"user/manual/en/asset\",\n\t},\n\t{\n\t\tlabel: \"Item Codification\",\n\t\turl: docsUrl + \"user/manual/en/stock/articles/item-codification\",\n\t},\n\t{\n\t\tlabel: \"Item Variants\",\n\t\turl: docsUrl + \"user/manual/en/stock/item-variants\",\n\t},\n\t{\n\t\tlabel: \"Item Valuation\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/stock/articles/item-valuation-fifo-and-moving-average\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Item\"] = [\n\t{ label: \"Item\", url: docsUrl + \"user/manual/en/stock/item\" },\n\t{\n\t\tlabel: \"Item Price\",\n\t\turl: docsUrl + \"user/manual/en/stock/item-price\",\n\t},\n\t{\n\t\tlabel: \"Barcode\",\n\t\turl:\n\t\t\tdocsUrl + \"user/manual/en/stock/articles/track-items-using-barcode\",\n\t},\n\t{\n\t\tlabel: \"Item Wise Taxation\",\n\t\turl: docsUrl + \"user/manual/en/accounts/item-tax-template\",\n\t},\n\t{\n\t\tlabel: \"Managing Fixed Assets\",\n\t\turl: docsUrl + \"user/manual/en/asset\",\n\t},\n\t{\n\t\tlabel: \"Item Codification\",\n\t\turl: docsUrl + \"user/manual/en/stock/articles/item-codification\",\n\t},\n\t{\n\t\tlabel: \"Item Variants\",\n\t\turl: docsUrl + \"user/manual/en/stock/item-variants\",\n\t},\n\t{\n\t\tlabel: \"Item Valuation\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/stock/item/item-valuation-fifo-and-moving-average\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Purchase Receipt\"] = [\n\t{\n\t\tlabel: \"Purchase Receipt\",\n\t\turl: docsUrl + \"user/manual/en/stock/purchase-receipt\",\n\t},\n\t{\n\t\tlabel: \"Barcode\",\n\t\turl:\n\t\t\tdocsUrl + \"user/manual/en/stock/articles/track-items-using-barcode\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Delivery Note\"] = [\n\t{\n\t\tlabel: \"Delivery Note\",\n\t\turl: docsUrl + \"user/manual/en/stock/delivery-note\",\n\t},\n\t{\n\t\tlabel: \"Barcode\",\n\t\turl:\n\t\t\tdocsUrl + \"user/manual/en/stock/articles/track-items-using-barcode\",\n\t},\n\t{\n\t\tlabel: \"Sales Return\",\n\t\turl: docsUrl + \"user/manual/en/stock/sales-return\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Delivery Note\"] = [\n\t{\n\t\tlabel: \"Delivery Note\",\n\t\turl: docsUrl + \"user/manual/en/stock/delivery-note\",\n\t},\n\t{\n\t\tlabel: \"Sales Return\",\n\t\turl: docsUrl + \"user/manual/en/stock/sales-return\",\n\t},\n\t{\n\t\tlabel: \"Barcode\",\n\t\turl:\n\t\t\tdocsUrl + \"user/manual/en/stock/articles/track-items-using-barcode\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Installation Note\"] = [\n\t{\n\t\tlabel: \"Installation Note\",\n\t\turl: docsUrl + \"user/manual/en/stock/installation-note\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Budget\"] = [\n\t{ label: \"Budgeting\", url: docsUrl + \"user/manual/en/accounts/budgeting\" },\n];\n\nfrappe.help.help_links[\"List/Material Request\"] = [\n\t{\n\t\tlabel: \"Material Request\",\n\t\turl: docsUrl + \"user/manual/en/stock/material-request\",\n\t},\n\t{\n\t\tlabel: \"Auto-creation of Material Request\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/stock/articles/auto-creation-of-material-request\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Material Request\"] = [\n\t{\n\t\tlabel: \"Material Request\",\n\t\turl: docsUrl + \"user/manual/en/stock/material-request\",\n\t},\n\t{\n\t\tlabel: \"Auto-creation of Material Request\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/stock/articles/auto-creation-of-material-request\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Stock Entry\"] = [\n\t{ label: \"Stock Entry\", url: docsUrl + \"user/manual/en/stock/stock-entry\" },\n\t{\n\t\tlabel: \"Stock Entry Types\",\n\t\turl: docsUrl + \"user/manual/en/stock/articles/stock-entry-purpose\",\n\t},\n\t{\n\t\tlabel: \"Repack Entry\",\n\t\turl: docsUrl + \"user/manual/en/stock/articles/repack-entry\",\n\t},\n\t{\n\t\tlabel: \"Opening Stock\",\n\t\turl: docsUrl + \"user/manual/en/stock/opening-stock\",\n\t},\n\t{\n\t\tlabel: \"Subcontracting\",\n\t\turl: docsUrl + \"user/manual/en/manufacturing/subcontracting\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Stock Entry\"] = [\n\t{ label: \"Stock Entry\", url: docsUrl + \"user/manual/en/stock/stock-entry\" },\n];\n\nfrappe.help.help_links[\"Tree/Warehouse\"] = [\n\t{ label: \"Warehouse\", url: docsUrl + \"user/manual/en/stock/warehouse\" },\n];\n\nfrappe.help.help_links[\"List/Serial No\"] = [\n\t{ label: \"Serial No\", url: docsUrl + \"user/manual/en/stock/serial-no\" },\n];\n\nfrappe.help.help_links[\"Form/Serial No\"] = [\n\t{ label: \"Serial No\", url: docsUrl + \"user/manual/en/stock/serial-no\" },\n];\n\nfrappe.help.help_links[\"List/Batch\"] = [\n\t{ label: \"Batch\", url: docsUrl + \"user/manual/en/stock/batch\" },\n];\n\nfrappe.help.help_links[\"Form/Batch\"] = [\n\t{ label: \"Batch\", url: docsUrl + \"user/manual/en/stock/batch\" },\n];\n\nfrappe.help.help_links[\"Form/Packing Slip\"] = [\n\t{\n\t\tlabel: \"Packing Slip\",\n\t\turl: docsUrl + \"user/manual/en/stock/packing-slip\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Quality Inspection\"] = [\n\t{\n\t\tlabel: \"Quality Inspection\",\n\t\turl: docsUrl + \"user/manual/en/stock/quality-inspection\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Landed Cost Voucher\"] = [\n\t{\n\t\tlabel: \"Landed Cost Voucher\",\n\t\turl: docsUrl + \"user/manual/en/stock/landed-cost-voucher\",\n\t},\n];\n\nfrappe.help.help_links[\"Tree/Item Group\"] = [\n\t{\n\t\tlabel: \"Item Group\",\n\t\turl: docsUrl + \"user/manual/en/stock/item-group\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Item Attribute\"] = [\n\t{\n\t\tlabel: \"Item Attribute\",\n\t\turl: docsUrl + \"user/manual/en/stock/item-attribute\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/UOM\"] = [\n\t{\n\t\tlabel: \"Fractions in UOM\",\n\t\turl:\n\t\t\tdocsUrl + \"user/manual/en/stock/articles/managing-fractions-in-uom\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Stock Reconciliation\"] = [\n\t{\n\t\tlabel: \"Opening Stock Entry\",\n\t\turl: docsUrl + \"user/manual/en/stock/stock-reconciliation\",\n\t},\n];\n\n//CRM\n\nfrappe.help.help_links[\"Form/Lead\"] = [\n\t{ label: \"Lead\", url: docsUrl + \"user/manual/en/CRM/lead\" },\n];\n\nfrappe.help.help_links[\"Form/Opportunity\"] = [\n\t{ label: \"Opportunity\", url: docsUrl + \"user/manual/en/CRM/opportunity\" },\n];\n\nfrappe.help.help_links[\"Form/Address\"] = [\n\t{ label: \"Address\", url: docsUrl + \"user/manual/en/CRM/address\" },\n];\n\nfrappe.help.help_links[\"Form/Contact\"] = [\n\t{ label: \"Contact\", url: docsUrl + \"user/manual/en/CRM/contact\" },\n];\n\nfrappe.help.help_links[\"Form/Newsletter\"] = [\n\t{ label: \"Newsletter\", url: docsUrl + \"user/manual/en/CRM/newsletter\" },\n];\n\nfrappe.help.help_links[\"Form/Campaign\"] = [\n\t{ label: \"Campaign\", url: docsUrl + \"user/manual/en/CRM/campaign\" },\n];\n\nfrappe.help.help_links[\"Tree/Sales Person\"] = [\n\t{\n\t\tlabel: \"Sales Person\",\n\t\turl: docsUrl + \"user/manual/en/CRM/sales-person\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Sales Person\"] = [\n\t{\n\t\tlabel: \"Sales Person Target\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/selling/sales-person-target-allocation\",\n\t},\n\t{\n\t\tlabel: \"Sales Person in Transactions\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/selling/articles/sales-persons-in-the-sales-transactions\",\n\t},\n];\n\n//Manufacturing\n\nfrappe.help.help_links[\"Form/BOM\"] = [\n\t{\n\t\tlabel: \"Bill of Material\",\n\t\turl: docsUrl + \"user/manual/en/manufacturing/bill-of-materials\",\n\t},\n\t{\n\t\tlabel: \"Nested BOM Structure\",\n\t\turl:\n\t\t\tdocsUrl +\n\t\t\t\"user/manual/en/manufacturing/articles/managing-multi-level-bom\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Work Order\"] = [\n\t{\n\t\tlabel: \"Work Order\",\n\t\turl: docsUrl + \"user/manual/en/manufacturing/work-order\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Workstation\"] = [\n\t{\n\t\tlabel: \"Workstation\",\n\t\turl: docsUrl + \"user/manual/en/manufacturing/workstation\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Operation\"] = [\n\t{\n\t\tlabel: \"Operation\",\n\t\turl: docsUrl + \"user/manual/en/manufacturing/operation\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/BOM Update Tool\"] = [\n\t{\n\t\tlabel: \"BOM Update Tool\",\n\t\turl: docsUrl + \"user/manual/en/manufacturing/bom-update-tool\",\n\t},\n];\n\n//Customize\n\nfrappe.help.help_links[\"Form/Customize Form\"] = [\n\t{\n\t\tlabel: \"Custom Field\",\n\t\turl: docsUrl + \"user/manual/en/customize-erpnext/custom-field\",\n\t},\n\t{\n\t\tlabel: \"Customize Field\",\n\t\turl: docsUrl + \"user/manual/en/customize-erpnext/customize-form\",\n\t},\n];\n\nfrappe.help.help_links[\"List/Custom Field\"] = [\n\t{\n\t\tlabel: \"Custom Field\",\n\t\turl: docsUrl + \"user/manual/en/customize-erpnext/custom-field\",\n\t},\n];\n\nfrappe.help.help_links[\"Form/Custom Field\"] = [\n\t{\n\t\tlabel: \"Custom Field\",\n\t\turl: docsUrl + \"user/manual/en/customize-erpnext/custom-field\",\n\t},\n];\n","frappe.provide('agriculture');\n\nagriculture.TernaryPlot = class TernaryPlot {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\n\t\tfrappe.require('assets/frappe/js/lib/snap.svg-min.js', () => {\n\t\t\tthis.make_svg();\n\t\t\tthis.init_snap();\n\t\t\tthis.init_config();\n\t\t\tthis.make_plot();\n\t\t\tthis.make_plot_marking();\n\t\t\tthis.make_legend();\n\t\t\tthis.mark_blip();\n\t\t});\n\t}\n\n\tmake_svg() {\n\t\tthis.$svg = $('<svg height=\"350\" width=\"400\">');\n\t\t$(this.parent).append(this.$svg);\n\t}\n\n\tinit_snap() {\n\t\tthis.paper = new Snap(this.$svg.get(0));\n\t}\n\n\tinit_config() {\n\t\tthis.config = {\n\t\t\ttriangle_side: 300,\n\t\t\tspacing: 50,\n\t\t\tstrokeWidth: 1,\n\t\t\tstroke: frappe.ui.color.get('black')\n\t\t};\n\t\tthis.config.scaling_factor = this.config.triangle_side / 100;\n\t\tlet { triangle_side: t, spacing: s, scaling_factor: p } = this.config;\n\n\t\tthis.coords = {\n\t\t\tsand: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + t * Snap.cos(60), s,\n\t\t\t\t\ts, s + t * Snap.cos(30),\n\t\t\t\t\ts + t, s + t * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('peach')\n\t\t\t},\n\t\t\tloamy_sand: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + 15 * p * Snap.cos(60), s + (100 - 15) * p * Snap.cos(30),\n\t\t\t\t\ts + 10 * p * Snap.cos(60), s + (100 - 10) * p * Snap.cos(30),\n\t\t\t\t\ts + (100 - 85) * p, s + t * Snap.cos(30),\n\t\t\t\t\ts + (100 - 70) * p, s + t * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('pink')\n\t\t\t},\n\t\t\tsandy_loam: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + 20 * p * Snap.cos(60) + 27.5 * p, s + (100 - 20) * p * Snap.cos(30),\n\t\t\t\t\ts + 20 * p * Snap.cos(60), s + (100 - 20) * p * Snap.cos(30),\n\t\t\t\t\ts + 15 * p * Snap.cos(60), s + (100 - 15) * p * Snap.cos(30),\n\t\t\t\t\ts + (100 - 75) * p, s + t * Snap.cos(30),\n\t\t\t\t\ts + (100 - 50) * p, s + t * Snap.cos(30),\n\t\t\t\t\ts + (100 - 50) * p + 7.5 * p * Snap.cos(60), s + t * Snap.cos(30) - 7.5 * p * Snap.cos(30),\n\t\t\t\t\ts + (100 - 50) * p + 7.5 * p * Snap.cos(60) - 10 * p, s + t * Snap.cos(30) - 7.5 * p * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('pink', 'light')\n\t\t\t},\n\t\t\tloam: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + (100 - 50) * p + 27.5 * p * Snap.cos(60), s + t * Snap.cos(30) - 27.5 * p * Snap.cos(30),\n\t\t\t\t\ts + (100 - 50) * p + 27.5 * p * Snap.cos(60) - 22.5 * p, s + t * Snap.cos(30) - 27.5 * p * Snap.cos(30),\n\t\t\t\t\ts + 20 * p * Snap.cos(60) + 27.5 * p, s + (100 - 20) * p * Snap.cos(30),\n\t\t\t\t\ts + (100 - 50) * p + 7.5 * p * Snap.cos(60) - 10 * p, s + t * Snap.cos(30) - 7.5 * p * Snap.cos(30),\n\t\t\t\t\ts + (100 - 50) * p + 7.5 * p * Snap.cos(60), s + t * Snap.cos(30) - 7.5 * p * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('brown')\n\t\t\t},\n\t\t\tsilt_loam: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + t - 27.5 * p * Snap.cos(60), s + 72.5 * p * Snap.cos(30),\n\t\t\t\t\ts + (100 - 50) * p + 27.5 * p * Snap.cos(60), s + t * Snap.cos(30) - 27.5 * p * Snap.cos(30),\n\t\t\t\t\ts + (100 - 50) * p, s + t * Snap.cos(30),\n\t\t\t\t\ts + (100 - 20) * p, s + t * Snap.cos(30),\n\t\t\t\t\ts + (100 - 20) * p + 12.5 * p * Snap.cos(60), s + 90 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 12.5 * p * Snap.cos(60), s + (100 - 12.5) * p * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('green', 'dark')\n\t\t\t},\n\t\t\tsilt: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + t - 12.5 * p * Snap.cos(60), s + (100 - 12.5) * p * Snap.cos(30),\n\t\t\t\t\ts + (100 - 20) * p + 12.5 * p * Snap.cos(60), s + 90 * p * Snap.cos(30),\n\t\t\t\t\ts + (100 - 20) * p, s + t * Snap.cos(30),\n\t\t\t\t\ts + t, s + t * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('green')\n\t\t\t},\n\t\t\tsilty_clay_loam: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + t - 40 * p * Snap.cos(60), s + 60 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 40 * p * Snap.cos(60) - 20 * p, s + 60 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 27.5 * p * Snap.cos(60) - 20 * p, s + 72.5 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 27.5 * p * Snap.cos(60), s + 72.5 * p * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('cyan', 'dark')\n\t\t\t},\n\t\t\tsilty_clay: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + t - 60 * p * Snap.cos(60), s + 40 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 40 * p * Snap.cos(60) - 20 * p, s + 60 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 40 * p * Snap.cos(60), s + 60 * p * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('cyan')\n\t\t\t},\n\t\t\tclay_loam: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + t - 40 * p * Snap.cos(60) - 20 * p, s + 60 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 40 * p * Snap.cos(60) - 45 * p, s + 60 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 27.5 * p * Snap.cos(60) - 45 * p, s + 72.5 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 27.5 * p * Snap.cos(60) - 20 * p, s + 72.5 * p * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('green', 'light')\n\t\t\t},\n\t\t\tsandy_clay_loam: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + 35 * p * Snap.cos(60) + 20 * p, s + (100 - 35) * p * Snap.cos(30),\n\t\t\t\t\ts + 35 * p * Snap.cos(60), s + (100 - 35) * p * Snap.cos(30),\n\t\t\t\t\ts + 20 * p * Snap.cos(60), s + (100 - 20) * p * Snap.cos(30),\n\t\t\t\t\ts + 20 * p * Snap.cos(60) + 27.5 * p, s + (100 - 20) * p * Snap.cos(30),\n\t\t\t\t\ts + t - 27.5 * p * Snap.cos(60) - 45 * p, s + 72.5 * p * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('pink', 'dark')\n\t\t\t},\n\t\t\tsandy_clay: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + 55 * p * Snap.cos(60), s + (100 - 55) * p * Snap.cos(30),\n\t\t\t\t\ts + 35 * p * Snap.cos(60), s + (100 - 35) * p * Snap.cos(30),\n\t\t\t\t\ts + 35 * p * Snap.cos(60) + 20 * p, s + (100 - 35) * p * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('red')\n\t\t\t},\n\t\t\tclay: {\n\t\t\t\tpoints: [\n\t\t\t\t\ts + t * Snap.cos(60), s,\n\t\t\t\t\ts + 55 * p * Snap.cos(60), s + (100 - 55) * p * Snap.cos(30),\n\t\t\t\t\ts + t - 40 * p * Snap.cos(60) - 45 * p, s + 60 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 40 * p * Snap.cos(60) - 20 * p, s + 60 * p * Snap.cos(30),\n\t\t\t\t\ts + t - 60 * p * Snap.cos(60), s + 40 * p * Snap.cos(30)\n\t\t\t\t],\n\t\t\t\tcolor: frappe.ui.color.get('yellow')\n\t\t\t},\n\t\t};\n\t}\n\n\tget_coords(soil_type) {\n\t\treturn this.coords[soil_type].points;\n\t}\n\n\tget_color(soil_type) {\n\t\treturn this.coords[soil_type].color;\n\t}\n\n\tmake_plot() {\n\t\tfor (let soil_type in this.coords) {\n\t\t\tthis.paper.polygon(this.get_coords(soil_type)).attr({\n\t\t\t\tfill: this.get_color(soil_type),\n\t\t\t\tstroke: this.config.stroke,\n\t\t\t\tstrokeWidth: this.config.strokeWidth\n\t\t\t});\n\t\t}\n\t}\n\n\tmake_plot_marking() {\n\t\tlet { triangle_side: t, spacing: s, scaling_factor: p } = this.config;\n\n\t\tlet clay = this.paper.text(t * Snap.cos(60) / 2, s + t * Snap.cos(30) / 2, __(\"Clay\")).attr({\n\t\t\tfill: frappe.ui.color.get('black')\n\t\t});\n\t\tclay.transform(\"r300\");\n\n\t\tlet silt = this.paper.text(t, s + t * Snap.cos(30) / 2, __(\"Silt\")).attr({\n\t\t\tfill: frappe.ui.color.get('black')\n\t\t});\n\t\tsilt.transform(\"r60\");\n\n\t\tlet sand = this.paper.text(35 + t * Snap.cos(60), 90 + t * Snap.cos(30), __(\"Sand\")).attr({\n\t\t\tfill: frappe.ui.color.get('black')\n\t\t});\n\t\tsand.transform(\"r0\");\n\t}\n\n\tmake_legend() {\n\t\t// let side = len(this.coords)/2;\n\t\tlet index = 1;\n\t\tlet offset = 0;\n\t\tlet exec_once = true;\n\t\tfor (let soil_type in this.coords) {\n\t\t\tif (index > 6 && exec_once){\n\t\t\t\toffset = 300;\n\t\t\t\tindex = 1;\n\t\t\t\texec_once = false;\n\t\t\t}\n\t\t\tlet rect = this.paper.rect(0+offset, 0+index*20, 100, 19, 5, 5).attr({\n\t\t\t\tfill: this.get_color(soil_type),\n\t\t\t\tstroke: frappe.ui.color.get('black')\n\t\t\t});\n\t\t\tlet text = this.paper.text(5+offset, 16+index*20, soil_type).attr({\n\t\t\t\tfill: frappe.ui.color.get('black'),\n\t\t\t\t'font-size': 12\n\t\t\t});\n\t\t\tindex++;\n\t\t}\n\t}\n\n\tmark_blip({clay, sand, silt} = this) {\n\t\tif (clay + sand + silt != 0){\n\t\t\tlet { triangle_side: t, spacing: s, scaling_factor: p } = this.config;\n\n\t\t\tlet x_blip = s + clay * p * Snap.cos(60) + silt * p;\n\t\t\tlet y_blip = s + silt * p * Snap.cos(30) + sand * p * Snap.sin(60);\n\t\t\tthis.blip = this.paper.circle(x_blip, y_blip, 4).attr({\n\t\t\t\tfill: frappe.ui.color.get(\"orange\"),\n\t\t\t\tstroke: frappe.ui.color.get(\"orange\"),\n\t\t\t\tstrokeWidth: 2\n\t\t\t});\n\t\t}\n\t}\n\n\tremove_blip() {\n\t\tif (typeof this.blip !== 'undefined')\n\t\t\tthis.blip.remove();\n\t}\n};\n","frappe.provide('frappe.ui.form');\n\nfrappe.ui.form.ItemQuickEntryForm = frappe.ui.form.QuickEntryForm.extend({\n\tinit: function(doctype, after_insert) {\n\t\tthis._super(doctype, after_insert);\n\t},\n\n\trender_dialog: function() {\n\t\tthis.mandatory = this.get_variant_fields().concat(this.mandatory);\n\t\tthis.mandatory = this.mandatory.concat(this.get_attributes_fields());\n\t\tthis.check_naming_series_based_on();\n\t\tthis._super();\n\t\tthis.init_post_render_dialog_operations();\n\t\tthis.preset_fields_for_template();\n\t\tthis.dialog.$wrapper.find('.edit-full').text(__('Edit in full page for more options like assets, serial nos, batches etc.'))\n\t},\n\n\tcheck_naming_series_based_on: function() {\n\t\tif (frappe.defaults.get_default(\"item_naming_by\") === \"Naming Series\") {\n\t\t\tthis.mandatory = this.mandatory.filter(d => d.fieldname !== \"item_code\");\n\t\t}\n\t},\n\n\tinit_post_render_dialog_operations: function() {\n\t\tthis.dialog.fields_dict.attribute_html.$wrapper.append(frappe.render_template(\"item_quick_entry\"));\n\t\tthis.init_for_create_variant_trigger();\n\t\tthis.init_for_item_template_trigger();\n\t\t// explicitly hide manufacturing fields as hidden not working.\n\t\tthis.toggle_manufacturer_fields();\n\t\tthis.dialog.get_field(\"item_template\").df.hidden = 1;\n\t\tthis.dialog.get_field(\"item_template\").refresh();\n\t},\n\n\tregister_primary_action: function() {\n\t\tvar me = this;\n\t\tthis.dialog.set_primary_action(__('Save'), function() {\n\t\t\tif (me.dialog.working) return;\n\n\t\t\tvar data = me.dialog.get_values();\n\t\t\tvar variant_values = {};\n\n\t\t\tif (me.dialog.fields_dict.create_variant.$input.prop(\"checked\")) {\n\t\t\t\tvariant_values = me.get_variant_doc();\n\t\t\t\tif (!Object.keys(variant_values).length) {\n\t\t\t\t\tdata = null;\n\t\t\t\t}\n\t\t\t\tvariant_values.stock_uom = me.template_doc.stock_uom;\n\t\t\t\tvariant_values.item_group = me.template_doc.item_group;\n\t\t\t}\n\n\t\t\tif (data) {\n\t\t\t\tme.dialog.working = true;\n\t\t\t\tvar values = me.update_doc();\n\t\t\t\t//patch for manufacturer type variants as extend is overwriting it.\n\t\t\t\tif (variant_values['variant_based_on'] == \"Manufacturer\") {\n\t\t\t\t\tvalues['variant_based_on'] = \"Manufacturer\";\n\t\t\t\t}\n\t\t\t\t$.extend(variant_values, values);\n\t\t\t\tme.insert(variant_values);\n\t\t\t}\n\t\t});\n\t},\n\n\tinsert: function(variant_values) {\n\t\tlet me = this;\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.client.insert\",\n\t\t\t\targs: {\n\t\t\t\t\tdoc: variant_values\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tme.dialog.hide();\n\t\t\t\t\t// delete the old doc\n\t\t\t\t\tfrappe.model.clear_doc(me.dialog.doc.doctype, me.dialog.doc.name);\n\t\t\t\t\tme.dialog.doc = r.message;\n\t\t\t\t\tif (frappe._from_link) {\n\t\t\t\t\t\tfrappe.ui.form.update_calling_link(me.dialog.doc);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (me.after_insert) {\n\t\t\t\t\t\t\tme.after_insert(me.dialog.doc);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme.open_form_if_not_list();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function() {\n\t\t\t\t\tme.open_doc();\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tme.dialog.working = false;\n\t\t\t\t\tresolve(me.dialog.doc);\n\t\t\t\t},\n\t\t\t\tfreeze: true\n\t\t\t});\n\t\t});\n\t},\n\n\topen_doc: function() {\n\t\tthis.dialog.hide();\n\t\tthis.update_doc();\n\t\tif (this.dialog.fields_dict.create_variant.$input.prop(\"checked\")) {\n\t\t\tvar template = this.dialog.fields_dict.item_template.input.value;\n\t\t\tif (template)\n\t\t\t\tfrappe.set_route(\"Form\", this.doctype, template);\n\t\t} else {\n\t\t\tfrappe.set_route('Form', this.doctype, this.doc.name);\n\t\t}\n\t},\n\n\tget_variant_fields: function() {\n\t\tvar variant_fields = [{\n\t\t\tfieldname: \"create_variant\",\n\t\t\tfieldtype: \"Check\",\n\t\t\tlabel: __(\"Create Variant\")\n\t\t},\n\t\t{\n\t\t\tfieldname: 'item_template',\n\t\t\tlabel: __('Item Template'),\n\t\t\treqd: 0,\n\t\t\tfieldtype: 'Link',\n\t\t\toptions: \"Item\",\n\t\t\tget_query: function() {\n\t\t\t\treturn {\n\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\"has_variants\": 1\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}];\n\n\t\treturn variant_fields;\n\t},\n\n\tget_manufacturing_fields: function() {\n\t\tthis.manufacturer_fields = [{\n\t\t\tfieldtype: 'Link',\n\t\t\toptions: 'Manufacturer',\n\t\t\tlabel: 'Manufacturer',\n\t\t\tfieldname: \"manufacturer\",\n\t\t\thidden: 1,\n\t\t\treqd: 0\n\t\t}, {\n\t\t\tfieldtype: 'Data',\n\t\t\tlabel: 'Manufacturer Part Number',\n\t\t\tfieldname: 'manufacturer_part_no',\n\t\t\thidden: 1,\n\t\t\treqd: 0\n\t\t}];\n\t\treturn this.manufacturer_fields;\n\t},\n\n\tget_attributes_fields: function() {\n\t\tvar attribute_fields = [{\n\t\t\tfieldname: 'attribute_html',\n\t\t\tfieldtype: 'HTML'\n\t\t}]\n\n\t\tattribute_fields = attribute_fields.concat(this.get_manufacturing_fields());\n\t\treturn attribute_fields;\n\t},\n\n\tinit_for_create_variant_trigger: function() {\n\t\tvar me = this;\n\n\t\tthis.dialog.fields_dict.create_variant.$input.on(\"click\", function() {\n\t\t\tme.preset_fields_for_template();\n\t\t\tme.init_post_template_trigger_operations(false, [], true);\n\t\t});\n\t},\n\n\tpreset_fields_for_template: function() {\n\t\tvar for_variant = this.dialog.get_value('create_variant');\n\n\t\t// setup template field, seen and mandatory if variant\n\t\tlet template_field = this.dialog.get_field(\"item_template\");\n\t\ttemplate_field.df.reqd = for_variant;\n\t\ttemplate_field.set_value('');\n\t\ttemplate_field.df.hidden = !for_variant;\n\t\ttemplate_field.refresh();\n\n\t\t// hide properties for variant\n\t\t['item_code', 'item_name', 'item_group', 'stock_uom'].forEach((d) => {\n\t\t\tlet f = this.dialog.get_field(d);\n\t\t\tf.df.hidden = for_variant;\n\t\t\tf.refresh();\n\t\t});\n\n\t\tthis.dialog.get_field('attribute_html').toggle(false);\n\n\t\t// non mandatory for variants\n\t\t['item_code', 'stock_uom', 'item_group'].forEach((d) => {\n\t\t\tlet f = this.dialog.get_field(d);\n\t\t\tf.df.reqd = !for_variant;\n\t\t\tf.refresh();\n\t\t});\n\n\t},\n\n\tinit_for_item_template_trigger: function() {\n\t\tvar me = this;\n\n\t\tme.dialog.fields_dict[\"item_template\"].df.onchange = () => {\n\t\t\tvar template = me.dialog.fields_dict.item_template.input.value;\n\t\t\tme.template_doc = null;\n\t\t\tif (template) {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"frappe.client.get\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tdoctype: \"Item\",\n\t\t\t\t\t\tname: template\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tme.template_doc = r.message;\n\t\t\t\t\t\tme.is_manufacturer = false;\n\n\t\t\t\t\t\tif (me.template_doc.variant_based_on === \"Manufacturer\") {\n\t\t\t\t\t\t\tme.init_post_template_trigger_operations(true, [], true);\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tme.init_post_template_trigger_operations(false, me.template_doc.attributes, false);\n\t\t\t\t\t\t\tme.render_attributes(me.template_doc.attributes);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tme.dialog.get_field('attribute_html').toggle(false);\n\t\t\t\tme.init_post_template_trigger_operations(false, [], true);\n\t\t\t}\n\t\t}\n\t},\n\n\tinit_post_template_trigger_operations: function(is_manufacturer, attributes, attributes_flag) {\n\t\tthis.attributes = attributes;\n\t\tthis.attribute_values = {};\n\t\tthis.attributes_count = attributes.length;\n\n\t\tthis.dialog.fields_dict.attribute_html.$wrapper.find(\".attributes\").empty();\n\t\tthis.is_manufacturer = is_manufacturer;\n\t\tthis.toggle_manufacturer_fields();\n\t\tthis.dialog.fields_dict.attribute_html.$wrapper.find(\".attributes\").toggleClass(\"hide-control\", attributes_flag);\n\t\tthis.dialog.fields_dict.attribute_html.$wrapper.find(\".attributes-header\").toggleClass(\"hide-control\", attributes_flag);\n\t},\n\n\ttoggle_manufacturer_fields: function() {\n\t\tvar me = this;\n\t\t$.each(this.manufacturer_fields, function(i, dialog_field) {\n\t\t\tme.dialog.get_field(dialog_field.fieldname).df.hidden = !me.is_manufacturer;\n\t\t\tme.dialog.get_field(dialog_field.fieldname).df.reqd = dialog_field.fieldname == 'manufacturer' ? me.is_manufacturer : false;\n\t\t\tme.dialog.get_field(dialog_field.fieldname).refresh();\n\t\t});\n\t},\n\n\tinitiate_render_attributes: function() {\n\t\tthis.dialog.fields_dict.attribute_html.$wrapper.find(\".attributes\").empty();\n\t\tthis.render_attributes(this.attributes);\n\t},\n\n\trender_attributes: function(attributes) {\n\t\tvar me = this;\n\n\t\tthis.dialog.get_field('attribute_html').toggle(true);\n\n\t\t$.each(attributes, function(index, row) {\n\t\t\tvar desc = \"\";\n\t\t\tvar fieldtype = \"Data\";\n\t\t\tif (row.numeric_values) {\n\t\t\t\tfieldtype = \"Float\";\n\t\t\t\tdesc = \"Min Value: \" + row.from_range + \" , Max Value: \" + row.to_range + \", in Increments of: \" + row.increment;\n\t\t\t}\n\n\t\t\tme.init_make_control(fieldtype, row);\n\t\t\tme[row.attribute].set_value(me.attribute_values[row.attribute] || \"\");\n\t\t\tme[row.attribute].$wrapper.toggleClass(\"has-error\", me.attribute_values[row.attribute] ? false : true);\n\n\t\t\t// Set Label explicitly as make_control is not displaying label\n\t\t\t$(me[row.attribute].label_area).text(__(row.attribute));\n\n\t\t\tif (desc) {\n\t\t\t\t$(repl(`<p class=\"help-box small text-muted hidden-xs\">%(desc)s</p>`, {\n\t\t\t\t\t\"desc\": desc\n\t\t\t\t})).insertAfter(me[row.attribute].input_area);\n\t\t\t}\n\n\t\t\tif (!row.numeric_values) {\n\t\t\t\tme.init_awesomplete_for_attribute(row);\n\t\t\t} else {\n\t\t\t\tme[row.attribute].$input.on(\"change\", function() {\n\t\t\t\t\tme.attribute_values[row.attribute] = $(this).val();\n\t\t\t\t\t$(this).closest(\".frappe-control\").toggleClass(\"has-error\", $(this).val() ? false : true);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tinit_make_control: function(fieldtype, row) {\n\t\tthis[row.attribute] = frappe.ui.form.make_control({\n\t\t\tdf: {\n\t\t\t\t\"fieldtype\": fieldtype,\n\t\t\t\t\"label\": row.attribute,\n\t\t\t\t\"fieldname\": row.attribute,\n\t\t\t\t\"options\": row.options || \"\"\n\t\t\t},\n\t\t\tparent: $(this.dialog.fields_dict.attribute_html.wrapper).find(\".attributes\"),\n\t\t\tonly_input: false\n\t\t});\n\t\tthis[row.attribute].make_input();\n\t},\n\n\tinit_awesomplete_for_attribute: function(row) {\n\t\tvar me = this;\n\n\t\tthis[row.attribute].input.awesomplete = new Awesomplete(this[row.attribute].input, {\n\t\t\tminChars: 0,\n\t\t\tmaxItems: 99,\n\t\t\tautoFirst: true,\n\t\t\tlist: [],\n\t\t});\n\n\t\tthis[row.attribute].$input.on('input', function(e) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.client.get_list\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: \"Item Attribute Value\",\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\t[\"parent\", \"=\", $(e.target).attr(\"data-fieldname\")],\n\t\t\t\t\t\t[\"attribute_value\", \"like\", e.target.value + \"%\"]\n\t\t\t\t\t],\n\t\t\t\t\tfields: [\"attribute_value\"],\n\t\t\t\t\tparent: \"Item Attribute\"\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\te.target.awesomplete.list = r.message.map(function(d) {\n\t\t\t\t\t\t\treturn d.attribute_value;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}).on('focus', function(e) {\n\t\t\t$(e.target).val('').trigger('input');\n\t\t}).on(\"awesomplete-close\", function (e) {\n\t\t\tme.attribute_values[$(e.target).attr(\"data-fieldname\")] = e.target.value;\n\t\t\t$(e.target).closest(\".frappe-control\").toggleClass(\"has-error\", e.target.value ? false : true);\n\t\t});\n\t},\n\n\tget_variant_doc: function() {\n\t\tvar me = this;\n\t\tvar variant_doc = {};\n\t\tvar attribute = this.validate_mandatory_attributes();\n\n\t\tif (Object.keys(attribute).length) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.controllers.item_variant.create_variant_doc_for_quick_entry\",\n\t\t\t\targs: {\n\t\t\t\t\t\"template\": me.dialog.fields_dict.item_template.$input.val(),\n\t\t\t\t\targs: attribute\n\t\t\t\t},\n\t\t\t\tasync: false,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif (Object.prototype.toString.call(r.message) == \"[object Object]\") {\n\t\t\t\t\t\tvariant_doc = r.message;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar msgprint_dialog = frappe.msgprint(__(\"Item Variant {0} already exists with same attributes\", [repl('<a class=\"strong variant-click\" data-item-code=\"%(item)s\" \\\n\t\t\t\t\t\t\t\t>%(item)s</a>', {\n\t\t\t\t\t\t\t\titem: r.message\n\t\t\t\t\t\t\t})]));\n\n\t\t\t\t\t\tmsgprint_dialog.$wrapper.find(\".variant-click\").on(\"click\", function() {\n\t\t\t\t\t\t\tmsgprint_dialog.hide();\n\t\t\t\t\t\t\tme.dialog.hide();\n\t\t\t\t\t\t\tif (frappe._from_link) {\n\t\t\t\t\t\t\t\tfrappe._from_link.set_value($(this).attr(\"data-item-code\"));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfrappe.set_route('Form', \"Item\", $(this).attr(\"data-item-code\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\treturn variant_doc;\n\t},\n\n\tvalidate_mandatory_attributes: function() {\n\t\tvar me = this;\n\t\tvar attribute = {};\n\t\tvar mandatory = [];\n\n\t\t$.each(this.attributes, function(index, attr) {\n\t\t\tvar value = me.attribute_values[attr.attribute] || \"\";\n\t\t\tif (value) {\n\t\t\t\tattribute[attr.attribute] = attr.numeric_values ? flt(value) : value;\n\t\t\t} else {\n\t\t\t\tmandatory.push(attr.attribute);\n\t\t\t}\n\t\t})\n\n\t\tif (this.is_manufacturer) {\n\t\t\t$.each(this.manufacturer_fields, function(index, field) {\n\t\t\t\tattribute[field.fieldname] = me.dialog.fields_dict[field.fieldname].input.value;\n\t\t\t});\n\t\t}\n\t\treturn attribute;\n\t}\n});\n","frappe.provide('frappe.ui.form');\n\nfrappe.ui.form.CustomerQuickEntryForm = frappe.ui.form.QuickEntryForm.extend({\n\tinit: function(doctype, after_insert, init_callback, doc, force) {\n\t\tthis._super(doctype, after_insert, init_callback, doc, force);\n\t\tthis.skip_redirect_on_error = true;\n\t},\n\n\trender_dialog: function() {\n\t\tthis.mandatory = this.mandatory.concat(this.get_variant_fields());\n\t\tthis._super();\n\t},\n\n\tget_variant_fields: function() {\n\t\tvar variant_fields = [{\n\t\t\tfieldtype: \"Section Break\",\n\t\t\tlabel: __(\"Primary Contact Details\"),\n\t\t\tcollapsible: 1\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"Email Id\"),\n\t\t\tfieldname: \"email_id\",\n\t\t\tfieldtype: \"Data\"\n\t\t},\n\t\t{\n\t\t\tfieldtype: \"Column Break\"\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"Mobile Number\"),\n\t\t\tfieldname: \"mobile_no\",\n\t\t\tfieldtype: \"Data\"\n\t\t},\n\t\t{\n\t\t\tfieldtype: \"Section Break\",\n\t\t\tlabel: __(\"Primary Address Details\"),\n\t\t\tcollapsible: 1\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"Address Line 1\"),\n\t\t\tfieldname: \"address_line1\",\n\t\t\tfieldtype: \"Data\"\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"Address Line 2\"),\n\t\t\tfieldname: \"address_line2\",\n\t\t\tfieldtype: \"Data\"\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"ZIP Code\"),\n\t\t\tfieldname: \"pincode\",\n\t\t\tfieldtype: \"Data\"\n\t\t},\n\t\t{\n\t\t\tfieldtype: \"Column Break\"\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"City\"),\n\t\t\tfieldname: \"city\",\n\t\t\tfieldtype: \"Data\"\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"State\"),\n\t\t\tfieldname: \"state\",\n\t\t\tfieldtype: \"Data\"\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"Country\"),\n\t\t\tfieldname: \"country\",\n\t\t\tfieldtype: \"Link\",\n\t\t\toptions: \"Country\"\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"Customer POS Id\"),\n\t\t\tfieldname: \"customer_pos_id\",\n\t\t\tfieldtype: \"Data\",\n\t\t\thidden: 1\n\t\t}];\n\n\t\treturn variant_fields;\n\t},\n})\n","frappe.provide('frappe.ui.form');\n\nfrappe.ui.form.SupplierQuickEntryForm = class SupplierQuickEntryForm extends frappe.ui.form.QuickEntryForm {\n\tconstructor(doctype, after_insert, init_callback, doc, force) {\n\t\tsuper(doctype, after_insert, init_callback, doc, force);\n\t\tthis.skip_redirect_on_error = true;\n\t}\n\n\trender_dialog() {\n\t\tthis.mandatory = this.mandatory.concat(this.get_variant_fields());\n\t\tsuper.render_dialog();\n\t}\n\n\tget_variant_fields() {\n\t\tvar variant_fields = [\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tlabel: __(\"Primary Contact Details\"),\n\t\t\t\tcollapsible: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Email Id\"),\n\t\t\t\tfieldname: \"email_id\",\n\t\t\t\tfieldtype: \"Data\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Column Break\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Mobile Number\"),\n\t\t\t\tfieldname: \"mobile_no\",\n\t\t\t\tfieldtype: \"Data\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tlabel: __(\"Primary Address Details\"),\n\t\t\t\tcollapsible: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Address Line 1\"),\n\t\t\t\tfieldname: \"address_line1\",\n\t\t\t\tfieldtype: \"Data\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Address Line 2\"),\n\t\t\t\tfieldname: \"address_line2\",\n\t\t\t\tfieldtype: \"Data\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"ZIP Code\"),\n\t\t\t\tfieldname: \"pincode\",\n\t\t\t\tfieldtype: \"Data\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Column Break\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"City\"),\n\t\t\t\tfieldname: \"city\",\n\t\t\t\tfieldtype: \"Data\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"State\"),\n\t\t\t\tfieldname: \"state\",\n\t\t\t\tfieldtype: \"Data\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Country\"),\n\t\t\t\tfieldname: \"country\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\toptions: \"Country\"\n\t\t\t}\n\t\t];\n\n\t\treturn variant_fields;\n\t}\n};\n","frappe.provide('erpnext.hub');\n\nfrappe.views.MarketplaceFactory = class MarketplaceFactory extends frappe.views.Factory {\n\tshow() {\n\t\tis_marketplace_disabled()\n\t\t\t.then(disabled => {\n\t\t\t\tif (disabled) {\n\t\t\t\t\tfrappe.show_not_found('Marketplace');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (frappe.pages.marketplace) {\n\t\t\t\t\tfrappe.container.change_to('marketplace');\n\t\t\t\t\terpnext.hub.marketplace.refresh();\n\t\t\t\t} else {\n\t\t\t\t\tthis.make('marketplace');\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tmake(page_name) {\n\t\tconst assets = [\n\t\t\t'/assets/js/marketplace.min.js'\n\t\t];\n\n\t\tfrappe.require(assets, () => {\n\t\t\terpnext.hub.marketplace = new erpnext.hub.Marketplace({\n\t\t\t\tparent: this.make_page(true, page_name)\n\t\t\t});\n\t\t});\n\t}\n};\n\nfunction is_marketplace_disabled() {\n\treturn frappe.call({\n\t\tmethod: \"erpnext.hub_node.doctype.marketplace_settings.marketplace_settings.is_marketplace_enabled\"\n\t}).then(r => r.message)\n}\n","class CallPopup {\n\tconstructor(call_log) {\n\t\tthis.caller_number = call_log.from;\n\t\tthis.call_log = call_log;\n\t\tthis.setup_listener();\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tfrappe.utils.play_sound('incoming-call');\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\t'static': true,\n\t\t\t'minimizable': true\n\t\t});\n\t\tthis.dialog.get_close_btn().show();\n\t\tthis.setup_dialog();\n\t\tthis.set_call_status();\n\t\tfrappe.utils.bind_actions_with_object(this.dialog.$body, this);\n\t\tthis.dialog.$wrapper.addClass('call-popup');\n\t\tthis.dialog.get_close_btn().unbind('click').click(this.close_modal.bind(this));\n\t\tthis.dialog.show();\n\t}\n\n\tsetup_dialog() {\n\t\tthis.setup_call_details();\n\t\tthis.dialog.$body.empty().append(this.caller_info);\n\t}\n\n\tset_indicator(color, blink=false) {\n\t\tlet classes = `indicator ${color} ${blink ? 'blink': ''}`;\n\t\tthis.dialog.header.find('.indicator').attr('class', classes);\n\t}\n\n\tset_call_status(call_status) {\n\t\tlet title = '';\n\t\tcall_status = call_status || this.call_log.status;\n\t\tif (['Ringing'].includes(call_status) || !call_status) {\n\t\t\ttitle = __('Incoming call from {0}', [this.get_caller_name() || this.caller_number]);\n\t\t\tthis.set_indicator('blue', true);\n\t\t} else if (call_status === 'In Progress') {\n\t\t\ttitle = __('Call Connected');\n\t\t\tthis.set_indicator('green');\n\t\t} else if (['No Answer', 'Missed'].includes(call_status)) {\n\t\t\tthis.set_indicator('yellow');\n\t\t\ttitle = __('Call Missed');\n\t\t} else if (['Completed', 'Busy', 'Failed'].includes(call_status)) {\n\t\t\tthis.set_indicator('red');\n\t\t\ttitle = __('Call Ended');\n\t\t} else {\n\t\t\tthis.set_indicator('blue');\n\t\t\ttitle = call_status;\n\t\t}\n\t\tthis.dialog.set_title(title);\n\t}\n\n\tupdate_call_log(call_log, missed) {\n\t\tthis.call_log = call_log;\n\t\tthis.set_call_status(missed ? 'Missed': null);\n\t}\n\n\tclose_modal() {\n\t\tthis.dialog.hide();\n\t\tdelete erpnext.call_popup;\n\t}\n\n\tcall_ended(call_log, missed) {\n\t\tfrappe.utils.play_sound('call-disconnect');\n\t\tthis.update_call_log(call_log, missed);\n\t\tsetTimeout(() => {\n\t\t\tif (!this.dialog.get_value('call_summary')) {\n\t\t\t\tthis.close_modal();\n\t\t\t}\n\t\t}, 60000);\n\t\tthis.clear_listeners();\n\t}\n\n\tget_caller_name() {\n\t\tconst contact_link = this.get_contact_link();\n\t\treturn contact_link.link_title || contact_link.link_name;\n\t}\n\n\tget_contact_link() {\n\t\tlet log = this.call_log;\n\t\tlet contact_link = log.links.find(d => d.link_doctype === 'Contact');\n\t\treturn contact_link || {};\n\t}\n\n\tsetup_listener() {\n\t\tfrappe.realtime.on(`call_${this.call_log.id}_ended`, call_log => {\n\t\t\tthis.call_ended(call_log);\n\t\t});\n\n\t\tfrappe.realtime.on(`call_${this.call_log.id}_missed`, call_log => {\n\t\t\tthis.call_ended(call_log, true);\n\t\t});\n\t}\n\n\tclear_listeners() {\n\t\tfrappe.realtime.off(`call_${this.call_log.id}_ended`);\n\t\tfrappe.realtime.off(`call_${this.call_log.id}_missed`);\n\t}\n\n\tsetup_call_details() {\n\t\tthis.caller_info = $(`<div></div>`);\n\t\tthis.call_details = new frappe.ui.FieldGroup({\n\t\t\tfields: [{\n\t\t\t\t'fieldname': 'name',\n\t\t\t\t'label': 'Name',\n\t\t\t\t'default': this.get_caller_name() || __('Unknown Caller'),\n\t\t\t\t'fieldtype': 'Data',\n\t\t\t\t'read_only': 1\n\t\t\t}, {\n\t\t\t\t'fieldtype': 'Button',\n\t\t\t\t'label': __('Open Contact'),\n\t\t\t\t'click': () => frappe.set_route('Form', 'Contact', this.get_contact_link().link_name),\n\t\t\t\t'depends_on': () => this.get_caller_name()\n\t\t\t}, {\n\t\t\t\t'fieldtype': 'Button',\n\t\t\t\t'label': __('Create New Contact'),\n\t\t\t\t'click': this.create_new_contact.bind(this),\n\t\t\t\t'depends_on': () => !this.get_caller_name()\n\t\t\t}, {\n\t\t\t\t'fieldtype': 'Button',\n\t\t\t\t'label': __('Create New Customer'),\n\t\t\t\t'click': this.create_new_customer.bind(this),\n\t\t\t\t'depends_on': () => !this.get_caller_name()\n\t\t\t}, {\n\t\t\t\t'fieldtype': 'Button',\n\t\t\t\t'label': __('Create New Lead'),\n\t\t\t\t'click': () => frappe.new_doc('Lead', { 'mobile_no': this.caller_number }),\n\t\t\t\t'depends_on': () => !this.get_caller_name()\n\t\t\t}, {\n\t\t\t\t'fieldtype': 'Column Break',\n\t\t\t}, {\n\t\t\t\t'fieldname': 'number',\n\t\t\t\t'label': 'Phone Number',\n\t\t\t\t'fieldtype': 'Data',\n\t\t\t\t'default': this.caller_number,\n\t\t\t\t'read_only': 1\n\t\t\t}, {\n\t\t\t\t'fieldtype': 'Section Break',\n\t\t\t\t'hide_border': 1,\n\t\t\t}, {\n\t\t\t\t'fieldtype': 'Small Text',\n\t\t\t\t'label': __('Call Summary'),\n\t\t\t\t'fieldname': 'call_summary',\n\t\t\t}, {\n\t\t\t\t'fieldtype': 'Button',\n\t\t\t\t'label': __('Save'),\n\t\t\t\t'click': () => {\n\t\t\t\t\tconst call_summary = this.call_details.get_value('call_summary');\n\t\t\t\t\tif (!call_summary) return;\n\t\t\t\t\tfrappe.xcall('erpnext.telephony.doctype.call_log.call_log.add_call_summary', {\n\t\t\t\t\t\t'call_log': this.call_log.name,\n\t\t\t\t\t\t'summary': call_summary,\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.close_modal();\n\t\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\t\tmessage: `\n\t\t\t\t\t\t\t\t${__('Call Summary Saved')}\n\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclass=\"text-small text-muted\"\n\t\t\t\t\t\t\t\t\thref=\"/app/call-log/${this.call_log.name}\">\n\t\t\t\t\t\t\t\t\t${__('View call log')}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\tindicator: 'green'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}],\n\t\t\tbody: this.caller_info\n\t\t});\n\t\tthis.call_details.make();\n\t}\n\n\tis_known_caller() {\n\t\treturn Boolean(this.get_caller_name());\n\t}\n\n\tcreate_new_customer() {\n\t\t// to avoid quick entry form\n\t\tconst new_customer = frappe.model.get_new_doc('Customer');\n\t\tnew_customer.mobile_no = this.caller_number;\n\t\tfrappe.set_route('Form', new_customer.doctype, new_customer.name);\n\t}\n\n\tcreate_new_contact() {\n\t\t// TODO: fix new_doc, it should accept child table values\n\t\tconst new_contact = frappe.model.get_new_doc('Contact');\n\t\tconst phone_no = frappe.model.add_child(new_contact, 'Contact Phone', 'phone_nos');\n\t\tphone_no.phone = this.caller_number;\n\t\tphone_no.is_primary_mobile_no = 1;\n\t\tfrappe.set_route('Form', new_contact.doctype, new_contact.name);\n\t}\n}\n\n$(document).on('app_ready', function () {\n\tfrappe.realtime.on('show_call_popup', call_log => {\n\t\tlet call_popup = erpnext.call_popup;\n\t\tif (call_popup && call_log.name === call_popup.call_log.name) {\n\t\t\tcall_popup.update_call_log(call_log);\n\t\t\tcall_popup.dialog.show();\n\t\t} else {\n\t\t\terpnext.call_popup = new CallPopup(call_log);\n\t\t}\n\t});\n});\n\nwindow.CallPopup = CallPopup;\n","frappe.provide('erpnext.accounts');\n\nerpnext.accounts.dimensions = {\n\tsetup_dimension_filters(frm, doctype) {\n\t\tthis.accounting_dimensions = [];\n\t\tthis.default_dimensions = {};\n\t\tthis.fetch_custom_dimensions(frm, doctype);\n\t},\n\n\tfetch_custom_dimensions(frm, doctype) {\n\t\tlet me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext.accounts.doctype.accounting_dimension.accounting_dimension.get_dimensions\",\n\t\t\targs: {\n\t\t\t\t'with_cost_center_and_project': true\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tme.accounting_dimensions = r.message[0];\n\t\t\t\tme.default_dimensions = r.message[1];\n\t\t\t\tme.setup_filters(frm, doctype);\n\t\t\t}\n\t\t});\n\t},\n\n\tsetup_filters(frm, doctype) {\n\t\tif (this.accounting_dimensions) {\n\t\t\tthis.accounting_dimensions.forEach((dimension) => {\n\t\t\t\tfrappe.model.with_doctype(dimension['document_type'], () => {\n\t\t\t\t\tlet parent_fields = [];\n\t\t\t\t\tfrappe.meta.get_docfields(doctype).forEach((df) => {\n\t\t\t\t\t\tif (df.fieldtype === 'Link' && df.options === 'Account') {\n\t\t\t\t\t\t\tparent_fields.push(df.fieldname);\n\t\t\t\t\t\t} else if (df.fieldtype === 'Table') {\n\t\t\t\t\t\t\tthis.setup_child_filters(frm, df.options, df.fieldname, dimension['fieldname']);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (frappe.meta.has_field(doctype, dimension['fieldname'])) {\n\t\t\t\t\t\t\tthis.setup_account_filters(frm, dimension['fieldname'], parent_fields);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\tsetup_child_filters(frm, doctype, parentfield, dimension) {\n\t\tlet fields = [];\n\n\t\tif (frappe.meta.has_field(doctype, dimension)) {\n\t\t\tfrappe.model.with_doctype(doctype, () => {\n\t\t\t\tfrappe.meta.get_docfields(doctype).forEach((df) => {\n\t\t\t\t\tif (df.fieldtype === 'Link' && df.options === 'Account') {\n\t\t\t\t\t\tfields.push(df.fieldname);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfrm.set_query(dimension, parentfield, function(doc, cdt, cdn) {\n\t\t\t\t\tlet row = locals[cdt][cdn];\n\t\t\t\t\treturn erpnext.queries.get_filtered_dimensions(row, fields, dimension, doc.company);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\tsetup_account_filters(frm, dimension, fields) {\n\t\tfrm.set_query(dimension, function(doc) {\n\t\t\treturn erpnext.queries.get_filtered_dimensions(doc, fields, dimension, doc.company);\n\t\t});\n\t},\n\n\tupdate_dimension(frm, doctype) {\n\t\tif (this.accounting_dimensions) {\n\t\t\tthis.accounting_dimensions.forEach((dimension) => {\n\t\t\t\tif (frm.is_new()) {\n\t\t\t\t\tif (frm.doc.company && Object.keys(this.default_dimensions || {}).length > 0\n\t\t\t\t\t\t&& this.default_dimensions[frm.doc.company]) {\n\n\t\t\t\t\t\tlet default_dimension = this.default_dimensions[frm.doc.company][dimension['fieldname']];\n\n\t\t\t\t\t\tif (default_dimension) {\n\t\t\t\t\t\t\tif (frappe.meta.has_field(doctype, dimension['fieldname'])) {\n\t\t\t\t\t\t\t\tfrm.set_value(dimension['fieldname'], default_dimension);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$.each(frm.doc.items || frm.doc.accounts || [], function(i, row) {\n\t\t\t\t\t\t\t\tfrappe.model.set_value(row.doctype, row.name, dimension['fieldname'], default_dimension);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tcopy_dimension_from_first_row(frm, cdt, cdn, fieldname) {\n\t\tif (frappe.meta.has_field(frm.doctype, fieldname) && this.accounting_dimensions) {\n\t\t\tthis.accounting_dimensions.forEach((dimension) => {\n\t\t\t\tlet row = frappe.get_doc(cdt, cdn);\n\t\t\t\tfrm.script_manager.copy_from_first_row(fieldname, row, [dimension['fieldname']]);\n\t\t\t});\n\t\t}\n\t}\n};\n","frappe.ui.form.ControlData = frappe.ui.form.ControlData.extend( {\n\tmake_input() {\n\t\tthis._super();\n\t\tif (this.df.options == 'Phone') {\n\t\t\tthis.setup_phone();\n\t\t}\n\t\tif (this.frm && this.frm.fields_dict) {\n\t\t\tObject.values(this.frm.fields_dict).forEach(function(field) {\n\t\t\t\tif (field.df.read_only === 1 && field.df.options === 'Phone'\n\t\t\t\t\t&& field.disp_area.style[0] != 'display' && !field.has_icon) {\n\t\t\t\t\tfield.setup_phone();\n\t\t\t\t\tfield.has_icon = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tsetup_phone() {\n\t\tif (frappe.phone_call.handler) {\n\t\t\tlet control = this.df.read_only ? '.control-value' : '.control-input';\n\t\t\tthis.$wrapper.find(control)\n\t\t\t\t.append(`\n\t\t\t\t\t<span class=\"phone-btn\">\n\t\t\t\t\t\t<a class=\"btn-open no-decoration\" title=\"${__('Make a call')}\">\n\t\t\t\t\t\t\t${frappe.utils.icon('call')}\n\t\t\t\t\t</span>\n\t\t\t\t`)\n\t\t\t\t.find('.phone-btn')\n\t\t\t\t.click(() => {\n\t\t\t\t\tfrappe.phone_call.handler(this.get_value(), this.frm);\n\t\t\t\t});\n\t\t}\n\t}\n});\n"],"names":["const","let","this","write_off_amount"],"mappings":"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"}